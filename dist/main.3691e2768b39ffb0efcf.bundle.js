webpackJsonp([1],{"/byE":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"}},"/ygB":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.forEach=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},e.extend=function(t,n){return e.forEach(n,function(e,n){t[e]=n}),t},e.clone=function(t){return e.extend({},t)},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.findKey=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},e.findValue=function(t,n,r){var i=e.findKey(t,n,r);return i&&t[i]},e.getAnyKey=function(t){for(var e in t)return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0}},0:function(t,e,n){t.exports=n("cDNt")},"05/P":function(t,e,n){"use strict";var r=n("2K0D"),i=n("WJ2g"),o=n("xEcM"),s=n("gwp7"),a=n("CdVW"),u=n("Hwfe");class l{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const e=new l;return e.source=this,e.operator=t,e}subscribe(t,e,n){const{operator:r}=this,a=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(s.a)}(t,e,n);if(r?r.call(a,this.source):a.add(this.source||!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}}forEach(t,e){if(e||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?e=r.a.Rx.config.Promise:r.a.Promise&&(e=r.a.Promise)),!e)throw new Error("no Promise impl found");return new e((e,n)=>{let r;r=this.subscribe(e=>{if(r)try{t(e)}catch(t){n(t),r.unsubscribe()}else t(e)},n,e)})}_subscribe(t){return this.source.subscribe(t)}[a.a](){return this}pipe(...t){return 0===t.length?this:Object(u.b)(t)(this)}toPromise(t){if(t||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?t=r.a.Rx.config.Promise:r.a.Promise&&(t=r.a.Promise)),!t)throw new Error("no Promise impl found");return new t((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}e.a=l,l.create=(t=>new l(t))},"0mJR":function(t,e,n){"use strict";var r,i=n("ElHI"),o=n("tiL7"),s=n("GcAb"),a=n("CLKv"),u=n("jLix");class l extends Error{constructor(t){super(),this.errors=t;const e=Error.call(this,t?`${t.length} errors occurred during unsubscription:\n  ${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"");this.name=e.name="UnsubscriptionError",this.stack=e.stack,this.message=e.message}}class c{constructor(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t,e=!1;if(this.closed)return;let{_parent:n,_parents:r,_unsubscribe:c,_subscriptions:d}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let f=-1,p=r?r.length:0;for(;n;)n.remove(this),n=++f<p&&r[f]||null;if(Object(s.a)(c)&&Object(a.a)(c).call(this)===u.a&&(e=!0,t=t||(u.a.e instanceof l?h(u.a.e.errors):[u.a.e])),Object(i.a)(d))for(f=-1,p=d.length;++f<p;){const n=d[f];if(Object(o.a)(n)&&Object(a.a)(n.unsubscribe).call(n)===u.a){e=!0,t=t||[];let n=u.a.e;n instanceof l?t=t.concat(h(n.errors)):t.push(n)}}if(e)throw new l(t)}add(t){if(!t||t===c.EMPTY)return c.EMPTY;if(t===this)return this;let e=t;switch(typeof t){case"function":e=new c(t);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){const t=e;(e=new c)._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}_addParent(t){let{_parent:e,_parents:n}=this;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t}}function h(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}e.a=c,c.EMPTY=((r=new c).closed=!0,r)},"1GK5":function(t,e,n){"use strict";(function(t){n.d(e,"g",function(){return Ae}),n.d(e,"Q",function(){return _e}),n.d(e,"T",function(){return we}),n.d(e,"P",function(){return Ce}),n.d(e,"w",function(){return Ee}),n.d(e,"c",function(){return Pt}),n.d(e,"A",function(){return Vt}),n.d(e,"z",function(){return Ut}),n.d(e,"b",function(){return Ft}),n.d(e,"d",function(){return xt}),n.d(e,"e",function(){return Dt}),n.d(e,"S",function(){return Qe}),n.d(e,"K",function(){return de}),n.d(e,"V",function(){return pe}),n.d(e,"s",function(){return fn}),n.d(e,"f",function(){return yn}),n.d(e,"m",function(){return ie}),n.d(e,"l",function(){return st}),n.d(e,"E",function(){return bn}),n.d(e,"F",function(){return vn}),n.d(e,"a",function(){return m}),n.d(e,"N",function(){return v}),n.d(e,"L",function(){return b}),n.d(e,"R",function(){return D}),n.d(e,"p",function(){return U}),n.d(e,"o",function(){return a}),n.d(e,"n",function(){return w}),n.d(e,"y",function(){return E}),n.d(e,"G",function(){return S}),n.d(e,"x",function(){return oe}),n.d(e,"B",function(){return Re}),n.d(e,"C",function(){return Ne}),n.d(e,"D",function(){return Oe}),n.d(e,"i",function(){return qt}),n.d(e,"j",function(){return Qt}),n.d(e,"k",function(){return xe}),n.d(e,"t",function(){return Yt}),n.d(e,"v",function(){return Jt}),n.d(e,"u",function(){return De}),n.d(e,"H",function(){return Fe}),n.d(e,"I",function(){return Ve}),n.d(e,"J",function(){return Be}),n.d(e,"M",function(){return qe}),n.d(e,"h",function(){return He}),n.d(e,"q",function(){return sn}),n.d(e,"r",function(){return an}),n.d(e,"O",function(){return Je}),n.d(e,"U",function(){return dn}),n.d(e,"_6",function(){return Ze}),n.d(e,"X",function(){return jt}),n.d(e,"W",function(){return $t}),n.d(e,"_4",function(){return A}),n.d(e,"_9",function(){return R}),n.d(e,"_20",function(){return x}),n.d(e,"_7",function(){return Rt}),n.d(e,"_8",function(){return Ot}),n.d(e,"Y",function(){return lr}),n.d(e,"Z",function(){return kr}),n.d(e,"_0",function(){return xo}),n.d(e,"_1",function(){return Vn}),n.d(e,"_2",function(){return Jr}),n.d(e,"_3",function(){return cr}),n.d(e,"_10",function(){return br}),n.d(e,"_11",function(){return vr}),n.d(e,"_13",function(){return Fr}),n.d(e,"_16",function(){return Yr}),n.d(e,"_18",function(){return Zr}),n.d(e,"_15",function(){return _i}),n.d(e,"_17",function(){return bi}),n.d(e,"_21",function(){return Ei}),n.d(e,"_22",function(){return Pn}),n.d(e,"_23",function(){return Ti}),n.d(e,"_12",function(){return pn}),n.d(e,"_14",function(){return mn}),n.d(e,"_19",function(){return gn}),n.d(e,"_5",function(){return Mt});var r=n("05/P"),i=n("cv3d"),o=n("IKzn"),s=n("9i4M");class a{constructor(t){this._desc=t,this.ngMetadataName="InjectionToken"}toString(){return`InjectionToken ${this._desc}`}}const u="__annotations__",l="__paramaters__",c="__prop__metadata__";function h(t,e,n,r){const i=d(e);function o(t){if(this instanceof o)return i.call(this,t),this;const e=new o(t),n=function(t){return(t.hasOwnProperty(u)?t[u]:Object.defineProperty(t,u,{value:[]})[u]).push(e),t};return r&&r(n),n}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}function d(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}function f(t,e,n){const r=d(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(l)?t[l]:Object.defineProperty(t,l,{value:[]})[l];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}function p(t,e,n){const r=d(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return function(t,n){const r=t.constructor,i=r.hasOwnProperty(c)?r[c]:Object.defineProperty(r,c,{value:{}})[c];i[n]=i.hasOwnProperty(n)&&i[n]||[],i[n].unshift(e)}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}const m=new a("AnalyzeForEntryComponents");f("Attribute",t=>({attributeName:t}));class g{}p("ContentChildren",(t,e={})=>Object.assign({selector:t,first:!1,isViewQuery:!1,descendants:!1},e),g),p("ContentChild",(t,e={})=>Object.assign({selector:t,first:!0,isViewQuery:!1,descendants:!0},e),g),p("ViewChildren",(t,e={})=>Object.assign({selector:t,first:!1,isViewQuery:!0,descendants:!0},e),g),p("ViewChild",(t,e)=>Object.assign({selector:t,first:!0,isViewQuery:!0,descendants:!0},e),g);const y=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}();h("Component",(t={})=>Object.assign({changeDetection:y.Default},t),h("Directive",(t={})=>t)),h("Pipe",t=>Object.assign({pure:!0},t)),p("Input",t=>({bindingPropertyName:t})),p("Output",t=>({bindingPropertyName:t})),p("HostBinding",t=>({hostPropertyName:t})),p("HostListener",(t,e)=>({eventName:t,args:e})),h("NgModule",t=>t);const v=function(){var t={Emulated:0,Native:1,None:2};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t}();class b{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const _=new b("5.2.2"),w=f("Inject",t=>({token:t})),E=f("Optional"),C=(h("Injectable"),f("Self")),S=f("SkipSelf"),T=(f("Host"),"undefined"!=typeof window&&window),I="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,A=T||"undefined"!=typeof t&&t||I;let k=null;function N(){if(!k){const t=A.Symbol;if(t&&t.iterator)k=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(k=n)}}}return k}function O(t){Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function R(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function x(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(x).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function D(t){return t.__forward_ref__=D,t.toString=function(){return x(this())},t}function P(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===D?t():t}const M="__source",L=new Object,V=L;class U{static create(t,e){return Array.isArray(t)?new X(t,e):new X(t.providers,t.parent,t.name||null)}}U.THROW_IF_NOT_FOUND=L,U.NULL=new class{get(t,e=L){if(e===L)throw new Error(`NullInjectorError: No provider for ${x(t)}!`);return e}};const F=function(t){return t},j=[],B=F,q=function(){return Array.prototype.slice.call(arguments)},H={},G=function(t){for(let e in t)if(t[e]===H)return e;throw Error("!prop")}({provide:String,useValue:H}),K="ngTokenPath",W="ngTempTokenPath",z=U.NULL,Q=/\n/gm,$="\u0275";class X{constructor(t,e=z,n=null){this.parent=e,this.source=n;const r=this._records=new Map;r.set(U,{token:U,fn:F,deps:j,value:this,useNew:!1}),function t(e,n){if(n)if((n=P(n))instanceof Array)for(let r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Z("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Z("Unexpected provider",n);{let t=P(n.provide);const r=function(t){const e=function(t){let e=j;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let r=6,i=P(n[t]);if(i instanceof Array)for(let t=0,e=i;t<e.length;t++){const n=e[t];n instanceof E||n==E?r|=1:n instanceof S||n==S?r&=-3:n instanceof C||n==C?r&=-5:i=n instanceof w?n.token:P(n)}e.push({token:i,options:r})}}else if(t.useExisting)e=[{token:P(t.useExisting),options:6}];else if(!(n||G in t))throw Z("'deps' required",t);return e}(t);let n=F,r=j,i=!1,o=P(t.provide);if(G in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=P(t.useClass);else{if("function"!=typeof o)throw Z("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){let r=e.get(t);if(r){if(r.fn!==q)throw J(t)}else e.set(t,r={token:n.provide,deps:[],useNew:!1,fn:q,value:j});r.deps.push({token:t=n,options:6})}const i=e.get(t);if(i&&i.fn==q)throw J(t);e.set(t,r)}}}(r,t)}get(t,e){const n=this._records.get(t);try{return function t(e,n,r,i,o){try{return function(e,n,r,i,o){let s;if(n){if((s=n.value)==B)throw Error($+"Circular dependency");if(s===j){n.value=B;let e=void 0,o=n.useNew,a=n.fn,u=n.deps,l=j;if(u.length){l=[];for(let e=0;e<u.length;e++){const n=u[e],o=n.options,s=2&o?r.get(n.token):void 0;l.push(t(n.token,s,r,s||4&o?i:z,1&o?null:U.THROW_IF_NOT_FOUND))}}n.value=s=o?new a(...l):a.apply(e,l)}}else s=i.get(e,o);return s}(e,n,r,i,o)}catch(t){throw t instanceof Error||(t=new Error(t)),(t[W]=t[W]||[]).unshift(e),n&&n.value==B&&(n.value=j),t}}(t,n,this._records,this.parent,e)}catch(e){const n=e[W];throw t[M]&&n.unshift(t[M]),e.message=Y("\n"+e.message,n,this.source),e[K]=n,e[W]=null,e}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(x(n))),`StaticInjector[${t.join(", ")}]`}}function J(t){return Z("Cannot mix multi providers and regular providers",t)}function Y(t,e,n=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==$?t.substr(2):t;let r=x(e);if(e instanceof Array)r=e.map(x).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):x(r)))}r=`{${t.join(", ")}}`}return`StaticInjectorError${n?"("+n+")":""}[${r}]: ${t.replace(Q,"\n  ")}`}function Z(t,e){return new Error(Y(t,e))}const tt="ngDebugContext",et="ngOriginalError",nt="ngErrorLogger";function rt(t){return t[tt]}function it(t){return t[et]}function ot(t,...e){t.error(...e)}class st{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[nt]||ot}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?rt(t)?rt(t):this._findContext(it(t)):null}_findOriginalError(t){let e=it(t);for(;e&&it(e);)e=it(e);return e}}function at(t){return t.length>1?" ("+function(t){const e=[];for(let n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map(t=>x(t.token)).join(" -> ")+")":""}function ut(t,e,n,r){const i=[e],o=n(i),s=r?function(t,e){const n=`${o} caused by: ${e instanceof Error?e.message:e}`,r=Error(n);return r[et]=e,r}(0,r):Error(o);return s.addKey=lt,s.keys=i,s.injectors=[t],s.constructResolvingMessage=n,s[et]=r,s}function lt(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function ct(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const t=e[r];n.push(t&&0!=t.length?t.map(x).join(" "):"?")}return Error("Cannot resolve all parameters for '"+x(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+x(t)+"' is decorated with Injectable.")}class ht{constructor(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=x(this.token)}static get(t){return dt.get(P(t))}static get numberOfKeys(){return dt.numberOfKeys}}const dt=new class{constructor(){this._allKeys=new Map}get(t){if(t instanceof ht)return t;if(this._allKeys.has(t))return this._allKeys.get(t);const e=new ht(t,ht.numberOfKeys);return this._allKeys.set(t,e),e}get numberOfKeys(){return this._allKeys.size}},ft=Function;function pt(t){return"function"==typeof t}const mt=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/;function gt(t){return t?t.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function yt(t){const e=Object.getPrototypeOf(t.prototype);return(e?e.constructor:null)||Object}const vt=new class{constructor(t){this.reflectionCapabilities=t}updateCapabilities(t){this.reflectionCapabilities=t}factory(t){return this.reflectionCapabilities.factory(t)}parameters(t){return this.reflectionCapabilities.parameters(t)}annotations(t){return this.reflectionCapabilities.annotations(t)}propMetadata(t){return this.reflectionCapabilities.propMetadata(t)}hasLifecycleHook(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)}getter(t){return this.reflectionCapabilities.getter(t)}setter(t){return this.reflectionCapabilities.setter(t)}method(t){return this.reflectionCapabilities.method(t)}importUri(t){return this.reflectionCapabilities.importUri(t)}resourceUri(t){return this.reflectionCapabilities.resourceUri(t)}resolveIdentifier(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)}resolveEnum(t,e){return this.reflectionCapabilities.resolveEnum(t,e)}}(new class{constructor(t){this._reflect=t||A.Reflect}isReflectionEnabled(){return!0}factory(t){return(...e)=>new t(...e)}_zipTypesAndAnnotations(t,e){let n;n="undefined"==typeof t?new Array(e.length):new Array(t.length);for(let r=0;r<n.length;r++)n[r]="undefined"==typeof t?[]:t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n}_ownParameters(t,e){if(mt.exec(t.toString()))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;const n=t.ctorParameters;if(n&&n!==e.ctorParameters){const t="function"==typeof n?n():n,e=t.map(t=>t&&t.type),r=t.map(t=>t&&gt(t.decorators));return this._zipTypesAndAnnotations(e,r)}const r=t.hasOwnProperty(l)&&t[l],i=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return i||r?this._zipTypesAndAnnotations(i,r):new Array(t.length).fill(void 0)}parameters(t){if(!pt(t))return[];const e=yt(t);let n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]}_ownAnnotations(t,e){if(t.annotations&&t.annotations!==e.annotations){let e=t.annotations;return"function"==typeof e&&e.annotations&&(e=e.annotations),e}return t.decorators&&t.decorators!==e.decorators?gt(t.decorators):t.hasOwnProperty(u)?t[u]:null}annotations(t){if(!pt(t))return[];const e=yt(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)}_ownPropMetadata(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){let e=t.propMetadata;return"function"==typeof e&&e.propMetadata&&(e=e.propMetadata),e}if(t.propDecorators&&t.propDecorators!==e.propDecorators){const e=t.propDecorators,n={};return Object.keys(e).forEach(t=>{n[t]=gt(e[t])}),n}return t.hasOwnProperty(c)?t[c]:null}propMetadata(t){if(!pt(t))return{};const e=yt(t),n={};if(e!==Object){const t=this.propMetadata(e);Object.keys(t).forEach(e=>{n[e]=t[e]})}const r=this._ownPropMetadata(t,e);return r&&Object.keys(r).forEach(t=>{const e=[];n.hasOwnProperty(t)&&e.push(...n[t]),e.push(...r[t]),n[t]=e}),n}hasLifecycleHook(t,e){return t instanceof ft&&e in t.prototype}guards(t){return{}}getter(t){return new Function("o","return o."+t+";")}setter(t){return new Function("o","v","return o."+t+" = v;")}method(t){const e=`if (!o.${t}) throw new Error('"${t}" is undefined');\n        return o.${t}.apply(o, args);`;return new Function("o","args",e)}importUri(t){return"object"==typeof t&&t.filePath?t.filePath:`./${x(t)}`}resourceUri(t){return`./${x(t)}`}resolveIdentifier(t,e,n,r){return r}resolveEnum(t,e){return t[e]}});class bt{constructor(t,e,n){this.key=t,this.optional=e,this.visibility=n}static fromKey(t){return new bt(t,!1,null)}}const _t=[];class wt{constructor(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}class Et{constructor(t,e){this.factory=t,this.dependencies=e}}function Ct(t){return new wt(ht.get(t.provide),[function(t){let e,n;if(t.useClass){const r=P(t.useClass);e=vt.factory(r),n=St(r)}else t.useExisting?(e=(t=>t),n=[bt.fromKey(ht.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){const n=e.map(t=>[t]);return e.map(e=>Tt(t,e,n))}return St(t)}(t.useFactory,t.deps)):(e=(()=>t.useValue),n=_t);return new Et(e,n)}(t)],t.multi||!1)}function St(t){const e=vt.parameters(t);if(!e)return[];if(e.some(t=>null==t))throw ct(t,e);return e.map(n=>Tt(t,n,e))}function Tt(t,e,n){let r=null,i=!1;if(!Array.isArray(e))return It(e instanceof w?e.token:e,i,null);let o=null;for(let s=0;s<e.length;++s){const t=e[s];t instanceof ft?r=t:t instanceof w?r=t.token:t instanceof E?i=!0:t instanceof C||t instanceof S?o=t:t instanceof a&&(r=t)}if(null!=(r=P(r)))return It(r,i,o);throw ct(t,n)}function It(t,e,n){return new bt(ht.get(t),e,n)}const At=new Object;class kt{static resolve(t){return function(t){const e=function(t,e){for(let n=0;n<t.length;n++){const r=t[n],i=e.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error(`Cannot mix multi providers and regular providers, got: ${i} ${r}`);if(r.multiProvider)for(let t=0;t<r.resolvedFactories.length;t++)i.resolvedFactories.push(r.resolvedFactories[t]);else e.set(r.key.id,r)}else{let t;t=r.multiProvider?new wt(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,t)}}return e}(function t(e,n){return e.forEach(e=>{if(e instanceof ft)n.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)n.push(e);else{if(!(e instanceof Array))throw Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${e}`);t(e,n)}}),n}(t,[]).map(Ct),new Map);return Array.from(e.values())}(t)}static resolveAndCreate(t,e){const n=kt.resolve(t);return kt.fromResolvedProviders(n,e)}static fromResolvedProviders(t,e){return new Nt(t,e)}}class Nt{constructor(t,e){this._constructionCounter=0,this._providers=t,this.parent=e||null;const n=t.length;this.keyIds=new Array(n),this.objs=new Array(n);for(let r=0;r<n;r++)this.keyIds[r]=t[r].key.id,this.objs[r]=At}get(t,e=V){return this._getByKey(ht.get(t),null,e)}resolveAndCreateChild(t){const e=kt.resolve(t);return this.createChildFromResolved(e)}createChildFromResolved(t){const e=new Nt(t);return e.parent=this,e}resolveAndInstantiate(t){return this.instantiateResolved(kt.resolve([t])[0])}instantiateResolved(t){return this._instantiateProvider(t)}getProviderAtIndex(t){if(t<0||t>=this._providers.length)throw function(t){return Error(`Index ${t} is out-of-bounds.`)}(t);return this._providers[t]}_new(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw ut(this,t.key,function(t){return`Cannot instantiate cyclic dependency!${at(t)}`});return this._instantiateProvider(t)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(t){if(t.multiProvider){const e=new Array(t.resolvedFactories.length);for(let n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])}_instantiate(t,e){const n=e.factory;let r,i;try{r=e.dependencies.map(t=>this._getByReflectiveDependency(t))}catch(e){throw e.addKey&&e.addKey(this,t.key),e}try{i=n(...r)}catch(e){throw ut(this,t.key,function(t){const e=x(t[0].token);return`${o.message}: Error during instantiation of ${e}!${at(t)}.`},o=e)}var o;return i}_getByReflectiveDependency(t){return this._getByKey(t.key,t.visibility,t.optional?null:V)}_getByKey(t,e,n){return t===Nt.INJECTOR_KEY?this:e instanceof C?this._getByKeySelf(t,n):this._getByKeyDefault(t,n,e)}_getObjByKeyId(t){for(let e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===At&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return At}_throwOrNull(t,e){if(e!==V)return e;throw function(t,e){return ut(t,e,function(t){return`No provider for ${x(t[0].token)}!${at(t)}`})}(this,t)}_getByKeySelf(t,e){const n=this._getObjByKeyId(t.id);return n!==At?n:this._throwOrNull(t,e)}_getByKeyDefault(t,e,n){let r;for(r=n instanceof S?this.parent:this;r instanceof Nt;){const e=r,n=e._getObjByKeyId(t.id);if(n!==At)return n;r=e.parent}return null!==r?r.get(t.token,e):this._throwOrNull(t,e)}get displayName(){return`ReflectiveInjector(providers: [${function(t,e){const n=new Array(t._providers.length);for(let r=0;r<t._providers.length;++r)n[r]=e(t.getProviderAtIndex(r));return n}(this,t=>' "'+t.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}function Ot(t){return!!t&&"function"==typeof t.then}function Rt(t){return!!t&&"function"==typeof t.subscribe}Nt.INJECTOR_KEY=ht.get(U);const xt=new a("Application Initializer");class Dt{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ot(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}const Pt=new a("AppId");function Mt(){return`${Lt()}${Lt()}${Lt()}`}function Lt(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vt=new a("Platform Initializer"),Ut=new a("Platform ID"),Ft=new a("appBootstrapListener");new a("Application Packages Root URL");class jt{log(t){console.log(t)}warn(t){console.warn(t)}}function Bt(){throw new Error("Runtime compiler is not loaded")}jt.ctorParameters=(()=>[]);class qt{compileModuleSync(t){throw Bt()}compileModuleAsync(t){throw Bt()}compileModuleAndAllComponentsSync(t){throw Bt()}compileModuleAndAllComponentsAsync(t){throw Bt()}clearCache(){}clearCacheFor(t){}}new a("compilerOptions");class Ht{}class Gt{}class Kt{}function Wt(t){const e=Error(`No component factory found for ${x(t)}. Did you add it to @NgModule.entryComponents?`);return e[zt]=t,e}const zt="ngComponent";class Qt{}Qt.NULL=new class{resolveComponentFactory(t){throw Wt(t)}};class $t{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let r=0;r<t.length;r++){const e=t[r];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Wt(t);return new Xt(e,this._ngModule)}}class Xt extends Kt{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}class Jt{}class Yt{}let Zt,te;const ee=function(){const t=A.wtf;return!(!t||!(Zt=t.trace)||(te=Zt.events,0))}(),ne=ee?function(t,e=null){return te.createScope(t,e)}:(t,e)=>(function(t,e){return null}),re=ee?function(t,e){return Zt.leaveScope(t,e),e}:(t,e)=>e;class ie extends s.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,o=()=>null;return t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()})),super.subscribe(r,i,o)}}class oe{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ie(!1),this.onMicrotaskEmpty=new ie(!1),this.onStable=new ie(!1),this.onError=new ie(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,i,o,s)=>{try{return le(e),t.invokeTask(r,i,o,s)}finally{ce(e)}},onInvoke:(t,n,r,i,o,s,a)=>{try{return le(e),t.invoke(r,i,o,s,a)}finally{ce(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,ue(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oe.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(oe.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ae,se,se);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function se(){}const ae={};function ue(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function le(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ce(t){t._nesting--,ue(t)}class he{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ie,this.onMicrotaskEmpty=new ie,this.onStable=new ie,this.onError=new ie}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}class de{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oe.assertNotInAngularZone(),O(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){this.isStable()?O(()=>{for(;0!==this._callbacks.length;)this._callbacks.pop()(this._didWork);this._didWork=!1}):this._didWork=!0}whenStable(t){this._callbacks.push(t),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}class fe{constructor(){this._applications=new Map,ge.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ge.findTestabilityInTree(this,t,e)}}function pe(t){ge=t}fe.ctorParameters=(()=>[]);let me,ge=new class{addToWindow(t){}findTestabilityInTree(t,e,n){return null}},ye=!0,ve=!1;const be=new a("AllowMultipleToken");function _e(){if(ve)throw new Error("Cannot enable prod mode after platform setup.");ye=!1}function we(){return ve=!0,ye}class Ee{constructor(t,e){this.name=t,this.token=e}}function Ce(t,e,n=[]){const r=`Platform: ${e}`,i=new a(r);return(e=[])=>{let o=Se();if(!o||o.injector.get(be,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(me&&!me.destroyed&&!me.injector.get(be,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");me=t.get(Te);const e=t.get(Vt,null);e&&e.forEach(t=>t())}(U.create({providers:t,name:r}))}return function(t){const e=Se();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Se(){return me&&!me.destroyed?me:null}class Te{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n="noop"===(i=e?e.ngZone:void 0)?new he:("zone.js"===i?void 0:i)||new oe({enableLongStackTrace:we()}),r=[{provide:oe,useValue:n}];var i;return n.run(()=>{const e=U.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(st,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>ke(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Ot(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(n){throw e.runOutsideAngular(()=>t.handleError(n)),n}}(o,n,()=>{const t=i.injector.get(Dt);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=this.injector.get(Ht),r=Ie({},e);return n.createCompiler([r]).compileModuleAsync(t).then(t=>this.bootstrapModuleFactory(t,r))}_moduleDoBootstrap(t){const e=t.injector.get(Ae);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${x(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}function Ie(t,e){return Array.isArray(e)?e.reduce(Ie,t):Object.assign({},t,e)}class Ae{constructor(t,e,n,s,a,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=s,this._componentFactoryResolver=a,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=we(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new r.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new r.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{oe.assertNotInAngularZone(),O(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{oe.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(i.a)(l,o.a.call(c))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Kt?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n instanceof Xt?null:this._injector.get(Jt),i=n.create(U.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(de,null);return o&&i.injector.get(fe).registerApplication(i.location.nativeElement,o),this._loadComponent(i),we()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const t=Ae._tickScope();try{this._runningTick=!0,this._views.forEach(t=>t.detectChanges()),this._enforceNoNewChanges&&this._views.forEach(t=>t.checkNoChanges())}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1,re(t)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ke(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ft,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),ke(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}function ke(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}Ae._tickScope=ne("ApplicationRef#tick()"),new a("Renderer2Interceptor");class Ne{}const Oe=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();class Re{}class xe{constructor(t){this.nativeElement=t}}class De{}new Map;class Pe{constructor(){this.dirty=!0,this._results=[],this.changes=new ie}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}[N()](){return this._results[N()]()}toString(){return this._results.toString()}reset(t){this._results=function t(e){return e.reduce((e,n)=>{const r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Me="#",Le="NgFactory";class Ve{}const Ue={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class Fe{constructor(t,e){this._compiler=t,this._config=e||Ue}load(t){return this._compiler instanceof qt?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split(Me);return void 0===r&&(r="default"),n("YuZA")(e).then(t=>t[r]).then(t=>je(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split(Me),i=Le;return void 0===r&&(r="default",i=""),n("YuZA")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>je(t,e,r))}}function je(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class Be{}class qe{}class He{}class Ge{constructor(t,e){this.name=t,this.callback=e}}class Ke{constructor(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof We?e.addChild(this):this.parent=null,this.listeners=[]}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class We extends Ke{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(t=>{t.parent&&t.parent.removeChild(t),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,r){e.childNodes.forEach(e=>{e instanceof We&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,r){e instanceof We&&e.childNodes.forEach(e=>{n(e)&&r.push(e),e instanceof We&&t(e,n,r)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof We)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const ze=new Map;function Qe(t){return ze.get(t)||null}function $e(t){ze.set(t.nativeNode,t)}function Xe(t,e){const n=Ze(t),r=Ze(e);return n&&r?function(t,e,n){const r=t[N()](),i=e[N()]();for(;;){const t=r.next(),e=i.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,Xe):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||R(t,e)}class Je{constructor(t){this.wrapped=t}static wrap(t){return new Je(t)}static unwrap(t){return Je.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Je}}class Ye{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ze(t){return!!tn(t)&&(Array.isArray(t)||!(t instanceof Map)&&N()in t)}function tn(t){return null!==t&&("function"==typeof t||"object"==typeof t)}const en=(t,e)=>e;class nn{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&R(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class rn{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new nn,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function on(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class sn{constructor(t){this.factories=t}static create(t,e){if(null!=e){const n=e.factories.slice();return t=t.concat(n),new sn(t)}return new sn(t)}static extend(t){return{provide:sn,useFactory:e=>{if(!e)throw new Error("Cannot extend IterableDiffers without a parent injector");return sn.create(t,e)},deps:[[sn,new S,new E]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}class an{constructor(t){this.factories=t}static create(t,e){if(e){const n=e.factories.slice();t=t.concat(n)}return new an(t)}static extend(t){return{provide:an,useFactory:e=>{if(!e)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return an.create(t,e)},deps:[[an,new S,new E]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}const un=[new class{constructor(){}supports(t){return t instanceof Map||tn(t)}create(){return new class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||tn(t)))throw new Error(`Error trying to diff '${x(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){R(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}}}],ln=[new class{constructor(){}supports(t){return Ze(t)}create(t){return new class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||en}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<on(n,r,i)?e:n,s=on(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ze(t))throw new Error(`Error trying to diff '${x(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)r=this._trackByFn(e,n=t[e]),null!==i&&R(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),R(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[N()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&R(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),R(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(R(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(R(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new rn),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}(t)}}],cn=new sn(ln),hn=new an(un),dn=Ce(null,"core",[{provide:Ut,useValue:"unknown"},{provide:Te,deps:[U]},{provide:fe,deps:[]},{provide:jt,deps:[]}]),fn=new a("LocaleId");function pn(){return cn}function mn(){return hn}function gn(t){return t||"en-US"}new a("Translations"),new a("TranslationsFormat");class yn{constructor(t){}}const vn=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class bn{}function _n(t,e,n){const r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function wn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function En(t,e){return t.nodes[e]}function Cn(t,e){return t.nodes[e]}function Sn(t,e){return t.nodes[e]}function Tn(t,e){return t.nodes[e]}function In(t,e){return t.nodes[e]}const An={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function kn(t,e,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Nn(n,e),n}(i,t)}function Nn(t,e){t[tt]=e,t[nt]=e.logError.bind(e)}function On(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}const Rn=()=>{},xn=new Map;function Dn(t){let e=xn.get(t);return e||(e=x(t)+"_"+xn.size,xn.set(t,e)),e}function Pn(t,e,n,r){if(Je.isWrapped(r)){r=Je.unwrap(r);const i=t.def.nodes[e].bindingIndex+n,o=Je.unwrap(t.oldValues[i]);t.oldValues[i]=new Je(o)}return r}const Mn="$$undefined",Ln="$$empty";function Vn(t){return{id:Mn,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let Un=0;function Fn(t,e,n,r){return!(!(2&t.state)&&R(t.oldValues[e.bindingIndex+n],r))}function jn(t,e,n,r){return!!Fn(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Bn(t,e,n,r){const i=t.oldValues[e.bindingIndex+n];if(1&t.state||!Xe(i,r)){const n=e.bindings[e.bindingIndex].name;throw kn(An.createDebugContext(t,e.nodeIndex),`${n}: ${i}`,`${n}: ${r}`,0!=(1&t.state))}}function qn(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Hn(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Gn(t,e,n,r){try{return qn(33554432&t.def.nodes[e].flags?Cn(t,e).componentView:t),An.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function Kn(t){return t.parent?Cn(t.parent,t.parentNodeDef.nodeIndex):null}function Wn(t){return t.parent?t.parentNodeDef.parent:null}function zn(t,e){switch(201347067&e.flags){case 1:return Cn(t,e.nodeIndex).renderElement;case 2:return En(t,e.nodeIndex).renderText}}function Qn(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function $n(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function Xn(t){const e={};let n=0;const r={};return t&&t.forEach(([t,i])=>{"number"==typeof t?(e[t]=i,n|=1<<t%32):r[t]=i}),{matchedQueries:e,references:r,matchedQueryIds:n}}function Jn(t,e){return t.map(t=>{let n,r;return Array.isArray(t)?[r,n]=t:(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,M,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:Dn(n)}})}function Yn(t,e,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===v.Native?Cn(t,n.renderParent.nodeIndex).renderElement:void 0:e}const Zn=new WeakMap;function tr(t){let e=Zn.get(t);return e||((e=t(()=>Rn)).factory=t,Zn.set(t,e)),e}function er(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(zn(t,t.def.lastRenderRootNode))),nr(t,e,0,t.def.nodes.length-1,n,r,i)}function nr(t,e,n,r,i,o,s){for(let a=n;a<=r;a++){const n=t.def.nodes[a];11&n.flags&&ir(t,n,e,i,o,s),a+=n.childCount}}function rr(t,e,n,r,i,o){let s=t;for(;s&&!Qn(s);)s=s.parent;const a=s.parent,u=Wn(s),l=u.nodeIndex+u.childCount;for(let c=u.nodeIndex+1;c<=l;c++){const t=a.def.nodes[c];t.ngContentIndex===e&&ir(a,t,n,r,i,o),c+=t.childCount}if(!a.parent){const s=t.root.projectableNodes[e];if(s)for(let e=0;e<s.length;e++)or(t,s[e],n,r,i,o)}}function ir(t,e,n,r,i,o){if(8&e.flags)rr(t,e.ngContent.index,n,r,i,o);else{const s=zn(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&or(t,s,n,r,i,o),32&e.bindingFlags&&or(Cn(t,e.nodeIndex).componentView,s,n,r,i,o)):or(t,s,n,r,i,o),16777216&e.flags){const s=Cn(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<s.length;t++)er(s[t],n,r,i,o)}1&e.flags&&!e.element.name&&nr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function or(t,e,n,r,i,o){const s=t.renderer;switch(n){case 1:s.appendChild(r,e);break;case 2:s.insertBefore(r,e,i);break;case 3:s.removeChild(r,e);break;case 0:o.push(e)}}const sr=/^:([^:]+):(.+)$/;function ar(t){if(":"===t[0]){const e=t.match(sr);return[e[1],e[2]]}return["",t]}function ur(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}function lr(t,e,n,r,i,o){t|=1;const{matchedQueries:s,references:a,matchedQueryIds:u}=Xn(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:u,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?tr(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Rn},provider:null,text:null,query:null,ngContent:null}}function cr(t,e,n,r,i,o,s=[],a,u,l,c,h){l||(l=Rn);const{matchedQueries:d,references:f,matchedQueryIds:p}=Xn(n);let m=null,g=null;o&&([m,g]=ar(o)),a=a||[];const y=new Array(a.length);for(let v=0;v<a.length;v++){const[t,e,n]=a[v],[r,i]=ar(e);let o=void 0,s=void 0;switch(15&t){case 4:s=n;break;case 1:case 8:o=n}y[v]={flags:t,ns:r,name:i,nonMinifiedName:i,securityContext:o,suffix:s}}u=u||[];const b=new Array(u.length);for(let v=0;v<u.length;v++){const[t,e]=u[v];b[v]={type:0,target:t,eventName:e,propName:null}}const _=(s=s||[]).map(([t,e])=>{const[n,r]=ar(t);return[n,r,e]});return h=function(t){if(t&&t.id===Mn){const e=null!=t.encapsulation&&t.encapsulation!==v.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${Un++}`:Ln}return t&&t.id===Ln&&(t=null),t||null}(h),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:p,references:f,ngContentIndex:r,childCount:i,bindings:y,bindingFlags:ur(y),outputs:b,element:{ns:m,name:g,attrs:_,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:l||Rn},provider:null,text:null,query:null,ngContent:null}}function hr(t,e,n){const r=n.element,i=t.root.selectorOrNode,o=t.renderer;let s;if(t.parent||!i){s=r.name?o.createElement(r.name,r.ns):o.createComment("");const i=Yn(t,e,n);i&&o.appendChild(i,s)}else s=o.selectRootElement(i);if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[t,e,n]=r.attrs[a];o.setAttribute(s,e,n,t)}return s}function dr(t,e,n,r){for(let s=0;s<n.outputs.length;s++){const a=n.outputs[s],u=fr(t,n.nodeIndex,(o=a.eventName,(i=a.target)?`${i}:${o}`:o));let l=a.target,c=t;"component"===a.target&&(l=null,c=e);const h=c.renderer.listen(l||r,a.eventName,u);t.disposables[n.outputIndex+s]=h}var i,o}function fr(t,e,n){return r=>Gn(t,e,n,r)}function pr(t,e,n,r){if(!jn(t,e,n,r))return!1;const i=e.bindings[n],o=Cn(t,e.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){const s=e.securityContext;let a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;const u=t.renderer;null!=o?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(t,i,s,i.ns,a,r);break;case 2:!function(t,e,n,r){const i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,s,a,r);break;case 4:!function(t,e,n,r,i){let o=t.root.sanitizer.sanitize(vn.STYLE,i);if(null!=o){o=o.toString();const t=e.suffix;null!=t&&(o+=t)}else o=null;const s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,s,a,r);break;case 8:!function(t,e,n,r,i){const o=e.securityContext;let s=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,s)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,s,a,r)}return!0}const mr=new Object,gr=Dn(U),yr=Dn(Jt);function vr(t,e,n,r){return n=P(n),{index:-1,deps:Jn(r,x(e)),flags:t,token:e,value:n}}function br(t){const e={};for(let n=0;n<t.length;n++){const r=t[n];r.index=n,e[Dn(r.token)]=r}return{factory:null,providersByKey:e,providers:t}}function _r(t,e,n=U.THROW_IF_NOT_FOUND){if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const r=e.tokenKey;switch(r){case gr:case yr:return t}const i=t._def.providersByKey[r];if(i){let e=t._providers[i.index];return void 0===e&&(e=t._providers[i.index]=wr(t,i)),e===mr?void 0:e}return t._parent.get(e.token,n)}function wr(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const r=n.length;switch(r){case 0:return new e;case 1:return new e(_r(t,n[0]));case 2:return new e(_r(t,n[0]),_r(t,n[1]));case 3:return new e(_r(t,n[0]),_r(t,n[1]),_r(t,n[2]));default:const i=new Array(r);for(let e=0;e<r;e++)i[e]=_r(t,n[e]);return new e(...i)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const r=n.length;switch(r){case 0:return e();case 1:return e(_r(t,n[0]));case 2:return e(_r(t,n[0]),_r(t,n[1]));case 3:return e(_r(t,n[0]),_r(t,n[1]),_r(t,n[2]));default:const i=Array(r);for(let e=0;e<r;e++)i[e]=_r(t,n[e]);return e(...i)}}(t,e.value,e.deps);break;case 2048:n=_r(t,e.deps[0]);break;case 256:n=e.value}return void 0===n?mr:n}function Er(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const r=n[e];return r.viewContainerParent=null,Ir(n,e),An.dirtyParentQueries(r),Sr(r),r}function Cr(t,e,n){const r=e?zn(e,e.def.lastRenderRootNode):t.renderElement;er(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Sr(t){er(t,3,null,null,void 0)}function Tr(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ir(t,e){e>=t.length-1?t.pop():t.splice(e,1)}const Ar=new Object;function kr(t,e,n,r,i,o){return new Nr(t,e,n,r,i,o)}class Nr extends Kt{constructor(t,e,n,r,i,o){super(),this.selector=t,this.componentType=e,this._inputs=r,this._outputs=i,this.ngContentSelectors=o,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,r){if(!r)throw new Error("ngModule should be provided");const i=tr(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=An.createRootView(t,e||[],n,i,r,Ar),a=Sn(s,o).instance;return n&&s.renderer.setAttribute(Cn(s,0).renderElement,"ng-version",_.full),new Or(s,new Pr(s),a)}}class Or extends Gt{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new xe(Cn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Ur(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function Rr(t,e,n){return new xr(t,e,n)}class xr{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new xe(this._data.renderElement)}get injector(){return new Ur(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=Wn(t),t=t.parent;return t?new Ur(t,e):new Ur(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Er(this._data,t);An.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new Pr(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;i||t instanceof Xt||(i=o.get(Jt));const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,r){let i=e.viewContainer._embeddedViews;null!==n&&void 0!==n||(n=i.length),r.viewContainerParent=t,Tr(i,n,r),function(t,e){const n=Kn(e);if(!n||n===t||16&e.state)return;e.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,e){if(4&e.flags)return;t.nodeFlags|=4,e.flags|=4;let n=e.parent;for(;n;)n.childFlags|=4,n=n.parent}(e.parent.def,e.parentNodeDef)}(e,r),An.dirtyParentQueries(r),Cr(e,n>0?i[n-1]:null,r)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,r){const i=t.viewContainer._embeddedViews,o=i[n];Ir(i,n),null==r&&(r=i.length),Tr(i,r,o),An.dirtyParentQueries(o),Sr(o),Cr(t,r>0?i[r-1]:null,o)}(this._data,0,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Er(this._data,t);e&&An.destroyView(e)}detach(t){const e=Er(this._data,t);return e?new Pr(e):null}}function Dr(t){return new Pr(t)}class Pr{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return er(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){qn(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{An.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){An.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),An.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Sr(this._view),An.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function Mr(t,e){return new Lr(t,e)}class Lr extends Be{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new Pr(An.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new xe(Cn(this._parentView,this._def.nodeIndex).renderElement)}}function Vr(t,e){return new Ur(t,e)}class Ur{constructor(t,e){this.view=t,this.elDef=e}get(t,e=U.THROW_IF_NOT_FOUND){return An.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Dn(t)},e)}}function Fr(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=Cn(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return En(t,n.nodeIndex).renderText;if(20240&n.flags)return Sn(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function jr(t){return new Br(t.renderer)}class Br{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,r]=ar(e),i=this.delegate.createElement(r,n);return t&&this.delegate.appendChild(t,i),i}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t);for(let i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[r,i]=ar(e);null!=n?this.delegate.setAttribute(t,i,n,r):this.delegate.removeAttribute(t,i,r)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function qr(t,e,n,r){return new Hr(t,e,n,r)}class Hr{constructor(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let r=0;r<e.providers.length;r++){const i=e.providers[r];4096&i.flags||(n[r]=wr(t,i))}}(this)}get(t,e=U.THROW_IF_NOT_FOUND){return _r(this,{token:t,tokenKey:Dn(t),flags:0},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(Qt)}destroy(){if(this._destroyed)throw new Error(`The ng module ${x(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def;for(let r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){const e=t._providers[r];e&&e!==mr&&e.ngOnDestroy()}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const Gr=Dn(class{}),Kr=Dn(Re),Wr=Dn(xe),zr=Dn(qe),Qr=Dn(Be),$r=Dn(He),Xr=Dn(U);function Jr(t,e,n,r,i,o,s,a){const u=[];if(s)for(let c in s){const[t,e]=s[c];u[t]={flags:8,name:c,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const l=[];if(a)for(let c in a)l.push({type:1,propName:c,target:null,eventName:a[c]});return ti(t,e|=16384,n,r,i,i,o,u,l)}function Yr(t,e,n){return ti(-1,t|=16,null,0,e,e,n)}function Zr(t,e,n,r,i){return ti(-1,t,e,0,n,r,i)}function ti(t,e,n,r,i,o,s,a,u){const{matchedQueries:l,references:c,matchedQueryIds:h}=Xn(n);u||(u=[]),a||(a=[]),o=P(o);const d=Jn(s,x(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:ur(a),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function ei(t,e){return oi(t,e)}function ni(t,e){let n=t;for(;n.parent&&!Qn(n);)n=n.parent;return si(n.parent,Wn(n),!0,e.provider.value,e.provider.deps)}function ri(t,e){const n=si(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let r=0;r<e.outputs.length;r++){const i=e.outputs[r],o=n[i.propName].subscribe(ii(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=o.unsubscribe.bind(o)}return n}function ii(t,e,n){return r=>Gn(t,e,n,r)}function oi(t,e){const n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return si(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){const o=i.length;switch(o){case 0:return r();case 1:return r(ui(t,e,n,i[0]));case 2:return r(ui(t,e,n,i[0]),ui(t,e,n,i[1]));case 3:return r(ui(t,e,n,i[0]),ui(t,e,n,i[1]),ui(t,e,n,i[2]));default:const s=Array(o);for(let r=0;r<o;r++)s[r]=ui(t,e,n,i[r]);return r(...s)}}(t,e.parent,n,r.value,r.deps);case 2048:return ui(t,e.parent,n,r.deps[0]);case 256:return r.value}}function si(t,e,n,r,i){const o=i.length;switch(o){case 0:return new r;case 1:return new r(ui(t,e,n,i[0]));case 2:return new r(ui(t,e,n,i[0]),ui(t,e,n,i[1]));case 3:return new r(ui(t,e,n,i[0]),ui(t,e,n,i[1]),ui(t,e,n,i[2]));default:const s=new Array(o);for(let r=0;r<o;r++)s[r]=ui(t,e,n,i[r]);return new r(...s)}}const ai={};function ui(t,e,n,r,i=U.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const o=t;2&r.flags&&(i=null);const s=r.tokenKey;for(s===$r&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);t;){if(e)switch(s){case Gr:return jr(li(t,e,n));case Kr:return li(t,e,n).renderer;case Wr:return new xe(Cn(t,e.nodeIndex).renderElement);case zr:return Cn(t,e.nodeIndex).viewContainer;case Qr:if(e.element.template)return Cn(t,e.nodeIndex).template;break;case $r:return Dr(li(t,e,n));case Xr:return Vr(t,e);default:const r=(n?e.element.allProviders:e.element.publicProviders)[s];if(r){let e=Sn(t,r.nodeIndex);return e||(e={instance:oi(t,r)},t.nodes[r.nodeIndex]=e),e.instance}}n=Qn(t),e=Wn(t),t=t.parent}const a=o.root.injector.get(r.token,ai);return a!==ai||i===ai?a:o.root.ngModule.injector.get(r.token,i)}function li(t,e,n){let r;if(n)r=Cn(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!Qn(r);)r=r.parent;return r}function ci(t,e,n,r,i,o){if(32768&n.flags){const e=Cn(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};const e=Je.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Ye(e,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function hi(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let r=0;for(let i=0;i<n.length;i++){const o=n[i];let s=o.parent;for(!s&&o.flags&e&&fi(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(r=di(t,s,e,r)),s=s.parent}}function di(t,e,n,r){for(let i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){const e=t.def.nodes[i];e.flags&n&&fi(t,i,e.flags&n,r++),i+=e.childCount}return r}function fi(t,e,n,r){const i=Sn(t,e);if(!i)return;const o=i.instance;o&&(An.setCurrentNode(t,e),1048576&n&&wn(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&wn(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}function pi(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&$n(t);){let n=t.parentNodeDef;t=t.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=t.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&In(t,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&In(t,n).setDirty(),n+=e.childCount}}function mi(t,e){const n=In(t,e.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&e.flags){const n=e.parent.parent;i=gi(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),r=Sn(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=gi(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);const o=e.query.bindings;let s=!1;for(let a=0;a<o.length;a++){const t=o[a];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,s=!0}r[t.propName]=e}s&&n.notifyOnChanges()}function gi(t,e,n,r,i){for(let o=e;o<=n;o++){const e=t.def.nodes[o],n=e.matchedQueries[r.id];if(null!=n&&i.push(yi(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=Cn(t,o);if((e.childMatchedQueries&r.filterId)===r.filterId&&(gi(t,o+1,o+e.childCount,r,i),o+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const o=t[e],s=Kn(o);s&&s===n&&gi(o,0,o.def.nodes.length-1,r,i)}}const s=n.template._projectedViews;if(s)for(let t=0;t<s.length;t++){const e=s[t];gi(e,0,e.def.nodes.length-1,r,i)}}(e.childMatchedQueries&r.filterId)!==r.filterId&&(o+=e.childCount)}return i}function yi(t,e,n){if(null!=n)switch(n){case 1:return Cn(t,e.nodeIndex).renderElement;case 0:return new xe(Cn(t,e.nodeIndex).renderElement);case 2:return Cn(t,e.nodeIndex).template;case 3:return Cn(t,e.nodeIndex).viewContainer;case 4:return Sn(t,e.nodeIndex).instance}}function vi(t,e,n){const r=Yn(t,e,n);r&&rr(t,n.ngContent.index,1,r,null,void 0)}function bi(t,e){return wi(128,t,new Array(e+1))}function _i(t,e){return wi(32,t,new Array(e))}function wi(t,e,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const t=n[i];r[i]={flags:8,name:t,ns:null,nonMinifiedName:t,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:ur(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function Ei(t,e,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Ci(t,e,n){let r;const i=t.renderer;r=i.createText(n.text.prefix);const o=Yn(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function Si(t,e){return(null!=t?t.toString():"")+e.suffix}function Ti(t,e,n,r){let i=0,o=0,s=0,a=0,u=0,l=null,c=null,h=!1,d=!1,f=null;for(let p=0;p<e.length;p++){const t=e[p];if(t.nodeIndex=p,t.parent=l,t.bindingIndex=i,t.outputIndex=o,t.renderParent=c,s|=t.flags,u|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=l?l.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,h=!1,d=!1,t.element.template&&(u|=t.element.template.nodeMatchedQueries)}if(Ai(l,t,e.length),i+=t.bindings.length,o+=t.outputs.length,!c&&3&t.flags&&(f=t),20224&t.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?l.element.publicProviders[Dn(t.provider.token)]=t:(d||(d=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Dn(t.provider.token)]=t),e&&(l.element.componentProvider=t)}if(l?(l.childFlags|=t.flags,l.directChildFlags|=t.flags,l.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(l.childMatchedQueries|=t.element.template.nodeMatchedQueries)):a|=t.flags,t.childCount>0)l=t,Ii(t)||(c=t);else for(;l&&p===l.nodeIndex+l.childCount;){const t=l.parent;t&&(t.childFlags|=l.childFlags,t.childMatchedQueries|=l.childMatchedQueries),c=(l=t)&&Ii(l)?l.renderParent:l}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Rn,updateRenderer:r||Rn,handleEvent:(t,n,r,i)=>e[n].element.handleEvent(t,r,i),bindingCount:i,outputCount:o,lastRenderRootNode:f}}function Ii(t){return 0!=(1&t.flags)&&null===t.element.name}function Ai(t,e,n){const r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function ki(t,e,n,r){const i=Ri(t.root,t.renderer,t,e,n);return xi(i,t.component,r),Di(i),i}function Ni(t,e,n){const r=Ri(t,t.renderer,null,null,e);return xi(r,n,n),Di(r),r}function Oi(t,e,n,r){const i=e.element.componentRendererType;let o;return o=i?t.root.rendererFactory.createRenderer(r,i):t.root.renderer,Ri(t.root,o,t,e.element.componentProvider,n)}function Ri(t,e,n,r,i){const o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function xi(t,e,n){t.component=e,t.context=n}function Di(t){let e;Qn(t)&&(e=Cn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,r=t.nodes;for(let i=0;i<n.nodes.length;i++){const o=n.nodes[i];let s;switch(An.setCurrentNode(t,i),201347067&o.flags){case 1:const n=hr(t,e,o);let a=void 0;if(33554432&o.flags){const e=tr(o.element.componentView);a=An.createComponentView(t,o,e,n)}dr(t,a,o,n),s={renderElement:n,componentView:a,viewContainer:null,template:o.element.template?Mr(t,o):void 0},16777216&o.flags&&(s.viewContainer=Rr(t,o,s));break;case 2:s=Ci(t,e,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:ei(t,o)});break;case 16:s={instance:ni(t,o)};break;case 16384:(s=r[i])||(s={instance:ri(t,o)}),32768&o.flags&&xi(Cn(t,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new Pe;break;case 8:vi(t,e,o),s=void 0}r[i]=s}qi(t,Bi.CreateViewNodes),Wi(t,201326592,268435456,0)}function Pi(t){Vi(t),An.updateDirectives(t,1),Hi(t,Bi.CheckNoChanges),An.updateRenderer(t,1),qi(t,Bi.CheckNoChanges),t.state&=-97}function Mi(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,_n(t,0,256),Vi(t),An.updateDirectives(t,0),Hi(t,Bi.CheckAndUpdate),Wi(t,67108864,536870912,0);let e=_n(t,256,512);hi(t,2097152|(e?1048576:0)),An.updateRenderer(t,0),qi(t,Bi.CheckAndUpdate),Wi(t,134217728,536870912,0),hi(t,8388608|((e=_n(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,_n(t,768,1024)}function Li(t,e,n,r,i,o,s,a,u,l,c,h,d){return 0===n?function(t,e,n,r,i,o,s,a,u,l,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,s,a,u,l,c,h){const d=e.bindings.length;let f=!1;return d>0&&pr(t,e,0,n)&&(f=!0),d>1&&pr(t,e,1,r)&&(f=!0),d>2&&pr(t,e,2,i)&&(f=!0),d>3&&pr(t,e,3,o)&&(f=!0),d>4&&pr(t,e,4,s)&&(f=!0),d>5&&pr(t,e,5,a)&&(f=!0),d>6&&pr(t,e,6,u)&&(f=!0),d>7&&pr(t,e,7,l)&&(f=!0),d>8&&pr(t,e,8,c)&&(f=!0),d>9&&pr(t,e,9,h)&&(f=!0),f}(t,e,n,r,i,o,s,a,u,l,c,h);case 2:return function(t,e,n,r,i,o,s,a,u,l,c,h){let d=!1;const f=e.bindings,p=f.length;if(p>0&&jn(t,e,0,n)&&(d=!0),p>1&&jn(t,e,1,r)&&(d=!0),p>2&&jn(t,e,2,i)&&(d=!0),p>3&&jn(t,e,3,o)&&(d=!0),p>4&&jn(t,e,4,s)&&(d=!0),p>5&&jn(t,e,5,a)&&(d=!0),p>6&&jn(t,e,6,u)&&(d=!0),p>7&&jn(t,e,7,l)&&(d=!0),p>8&&jn(t,e,8,c)&&(d=!0),p>9&&jn(t,e,9,h)&&(d=!0),d){let d=e.text.prefix;p>0&&(d+=Si(n,f[0])),p>1&&(d+=Si(r,f[1])),p>2&&(d+=Si(i,f[2])),p>3&&(d+=Si(o,f[3])),p>4&&(d+=Si(s,f[4])),p>5&&(d+=Si(a,f[5])),p>6&&(d+=Si(u,f[6])),p>7&&(d+=Si(l,f[7])),p>8&&(d+=Si(c,f[8])),p>9&&(d+=Si(h,f[9]));const m=En(t,e.nodeIndex).renderText;t.renderer.setValue(m,d)}return d}(t,e,n,r,i,o,s,a,u,l,c,h);case 16384:return function(t,e,n,r,i,o,s,a,u,l,c,h){const d=Sn(t,e.nodeIndex),f=d.instance;let p=!1,m=void 0;const g=e.bindings.length;return g>0&&Fn(t,e,0,n)&&(p=!0,m=ci(t,d,e,0,n,m)),g>1&&Fn(t,e,1,r)&&(p=!0,m=ci(t,d,e,1,r,m)),g>2&&Fn(t,e,2,i)&&(p=!0,m=ci(t,d,e,2,i,m)),g>3&&Fn(t,e,3,o)&&(p=!0,m=ci(t,d,e,3,o,m)),g>4&&Fn(t,e,4,s)&&(p=!0,m=ci(t,d,e,4,s,m)),g>5&&Fn(t,e,5,a)&&(p=!0,m=ci(t,d,e,5,a,m)),g>6&&Fn(t,e,6,u)&&(p=!0,m=ci(t,d,e,6,u,m)),g>7&&Fn(t,e,7,l)&&(p=!0,m=ci(t,d,e,7,l,m)),g>8&&Fn(t,e,8,c)&&(p=!0,m=ci(t,d,e,8,c,m)),g>9&&Fn(t,e,9,h)&&(p=!0,m=ci(t,d,e,9,h,m)),m&&f.ngOnChanges(m),65536&e.flags&&wn(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),p}(t,e,n,r,i,o,s,a,u,l,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,s,a,u,l,c,h){const d=e.bindings;let f=!1;const p=d.length;if(p>0&&jn(t,e,0,n)&&(f=!0),p>1&&jn(t,e,1,r)&&(f=!0),p>2&&jn(t,e,2,i)&&(f=!0),p>3&&jn(t,e,3,o)&&(f=!0),p>4&&jn(t,e,4,s)&&(f=!0),p>5&&jn(t,e,5,a)&&(f=!0),p>6&&jn(t,e,6,u)&&(f=!0),p>7&&jn(t,e,7,l)&&(f=!0),p>8&&jn(t,e,8,c)&&(f=!0),p>9&&jn(t,e,9,h)&&(f=!0),f){const f=Tn(t,e.nodeIndex);let m;switch(201347067&e.flags){case 32:m=new Array(d.length),p>0&&(m[0]=n),p>1&&(m[1]=r),p>2&&(m[2]=i),p>3&&(m[3]=o),p>4&&(m[4]=s),p>5&&(m[5]=a),p>6&&(m[6]=u),p>7&&(m[7]=l),p>8&&(m[8]=c),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[d[0].name]=n),p>1&&(m[d[1].name]=r),p>2&&(m[d[2].name]=i),p>3&&(m[d[3].name]=o),p>4&&(m[d[4].name]=s),p>5&&(m[d[5].name]=a),p>6&&(m[d[6].name]=u),p>7&&(m[d[7].name]=l),p>8&&(m[d[8].name]=c),p>9&&(m[d[9].name]=h);break;case 128:const t=n;switch(p){case 1:m=t.transform(n);break;case 2:m=t.transform(r);break;case 3:m=t.transform(r,i);break;case 4:m=t.transform(r,i,o);break;case 5:m=t.transform(r,i,o,s);break;case 6:m=t.transform(r,i,o,s,a);break;case 7:m=t.transform(r,i,o,s,a,u);break;case 8:m=t.transform(r,i,o,s,a,u,l);break;case 9:m=t.transform(r,i,o,s,a,u,l,c);break;case 10:m=t.transform(r,i,o,s,a,u,l,c,h)}}f.value=m}return f}(t,e,n,r,i,o,s,a,u,l,c,h);default:throw"unreachable"}}(t,e,r,i,o,s,a,u,l,c,h,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let r=!1;for(let i=0;i<n.length;i++)pr(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){const r=e.bindings;let i=!1;for(let o=0;o<n.length;o++)jn(t,e,o,n[o])&&(i=!0);if(i){let i="";for(let t=0;t<n.length;t++)i+=Si(n[t],r[t]);i=e.text.prefix+i;const o=En(t,e.nodeIndex).renderText;t.renderer.setValue(o,i)}return i}(t,e,n);case 16384:return function(t,e,n){const r=Sn(t,e.nodeIndex),i=r.instance;let o=!1,s=void 0;for(let a=0;a<n.length;a++)Fn(t,e,a,n[a])&&(o=!0,s=ci(t,r,e,a,n[a],s));return s&&i.ngOnChanges(s),65536&e.flags&&wn(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const r=e.bindings;let i=!1;for(let o=0;o<n.length;o++)jn(t,e,o,n[o])&&(i=!0);if(i){const i=Tn(t,e.nodeIndex);let o;switch(201347067&e.flags){case 32:o=n;break;case 64:o={};for(let e=0;e<n.length;e++)o[r[e].name]=n[e];break;case 128:const t=n[0],i=n.slice(1);o=t.transform(...i)}i.value=o}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Vi(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(4&r.flags){const e=Cn(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const r=e[n];r.state|=32,Hn(r,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Ui(t,e,n,r,i,o,s,a,u,l,c,h,d){return 0===n?function(t,e,n,r,i,o,s,a,u,l,c,h){const d=e.bindings.length;d>0&&Bn(t,e,0,n),d>1&&Bn(t,e,1,r),d>2&&Bn(t,e,2,i),d>3&&Bn(t,e,3,o),d>4&&Bn(t,e,4,s),d>5&&Bn(t,e,5,a),d>6&&Bn(t,e,6,u),d>7&&Bn(t,e,7,l),d>8&&Bn(t,e,8,c),d>9&&Bn(t,e,9,h)}(t,e,r,i,o,s,a,u,l,c,h,d):function(t,e,n){for(let r=0;r<n.length;r++)Bn(t,e,r,n[r])}(t,e,r),!1}function Fi(t,e){if(In(t,e.nodeIndex).dirty)throw kn(An.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function ji(t){if(!(128&t.state)){if(Hi(t,Bi.Destroy),qi(t,Bi.Destroy),hi(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=Kn(t);if(e){const n=e.template._projectedViews;n&&(Ir(n,n.indexOf(t)),An.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(Cn(t,n).renderElement):2&e.flags?t.renderer.destroyNode(En(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&In(t,n).destroy()}}(t),Qn(t)&&t.renderer.destroy(),t.state|=128}}const Bi=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function qi(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?Gi(Cn(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Hi(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=Cn(t,r).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)Gi(n[t],e)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Gi(t,e){const n=t.state;switch(e){case Bi.CheckNoChanges:0==(128&n)&&(12==(12&n)?Pi(t):64&n&&Ki(t,Bi.CheckNoChangesProjectedViews));break;case Bi.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Pi(t):64&n&&Ki(t,e));break;case Bi.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Mi(t):64&n&&Ki(t,Bi.CheckAndUpdateProjectedViews));break;case Bi.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Mi(t):64&n&&Ki(t,e));break;case Bi.Destroy:ji(t);break;case Bi.CreateViewNodes:Di(t)}}function Ki(t,e){Hi(t,e),qi(t,e)}function Wi(t,e,n,r){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const i=t.def.nodes.length;for(let o=0;o<i;o++){const i=t.def.nodes[o];if(i.flags&e&&i.flags&n)switch(An.setCurrentNode(t,i.nodeIndex),r){case 0:mi(t,i);break;case 1:Fi(t,i)}i.childFlags&e&&i.childFlags&n||(o+=i.childCount)}}let zi=!1;function Qi(t,e,n,r,i,o){return Ni(Xi(t,i,i.injector.get(Ne),e,n),r,o)}function $i(t,e,n,r,i,o){const s=i.injector.get(Ne),a=Xi(t,i,new Oo(s),e,n),u=oo(r);return ko(ho.create,Ni,null,[a,u,o])}function Xi(t,e,n,r,i){const o=e.injector.get(bn),s=e.injector.get(st);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:s}}function Ji(t,e,n,r){const i=oo(n);return ko(ho.create,ki,null,[t,e,i,r])}function Yi(t,e,n,r){return n=eo.get(e.element.componentProvider.provider.token)||oo(n),ko(ho.create,Oi,null,[t,e,n,r])}function Zi(t,e,n,r){return qr(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===to.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const r=to.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const r=t.providers[e];n&&(r.flags|=4096);const i=to.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=Jn(i.deps),r.value=i.value)}}(t=t.factory(()=>Rn)),t):t}(r))}const to=new Map,eo=new Map;function no(t){to.set(t.token,t)}function ro(t,e){const n=tr(tr(e.viewDefFactory).nodes[0].element.componentView);eo.set(t,n)}function io(){to.clear(),eo.clear()}function oo(t){if(0===to.size)return t;const e=function(t){const e=[];let n=null;for(let r=0;r<t.nodes.length;r++){const i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&to.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>Rn);for(let r=0;r<e.length;r++)n(t,e[r]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=to.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=Jn(n.deps),t.value=n.value)}}}}function so(t,e,n,r,i,o,s,a,u,l,c,h,d){const f=t.def.nodes[e];return Li(t,f,n,r,i,o,s,a,u,l,c,h,d),224&f.flags?Tn(t,e).value:void 0}function ao(t,e,n,r,i,o,s,a,u,l,c,h,d){const f=t.def.nodes[e];return Ui(t,f,n,r,i,o,s,a,u,l,c,h,d),224&f.flags?Tn(t,e).value:void 0}function uo(t){return ko(ho.detectChanges,Mi,null,[t])}function lo(t){return ko(ho.checkNoChanges,Pi,null,[t])}function co(t){return ko(ho.destroy,ji,null,[t])}const ho=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let fo,po,mo;function go(t,e){po=t,mo=e}function yo(t,e,n,r){return go(t,e),ko(ho.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function vo(t,e){if(128&t.state)throw On(ho[fo]);return go(t,So(t,0)),t.def.updateDirectives(function(t,n,r,...i){const o=t.def.nodes[n];return 0===e?_o(t,o,r,i):wo(t,o,r,i),16384&o.flags&&go(t,So(t,n)),224&o.flags?Tn(t,o.nodeIndex).value:void 0},t)}function bo(t,e){if(128&t.state)throw On(ho[fo]);return go(t,To(t,0)),t.def.updateRenderer(function(t,n,r,...i){const o=t.def.nodes[n];return 0===e?_o(t,o,r,i):wo(t,o,r,i),3&o.flags&&go(t,To(t,n)),224&o.flags?Tn(t,o.nodeIndex).value:void 0},t)}function _o(t,e,n,r){if(Li(t,e,n,...r)){const o=1===n?r[0]:r;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const r=e.bindings[t],s=o[t];8&r.flags&&(n[(i=r.nonMinifiedName,`ng-reflect-${i=i.replace(/[$@]/g,"_").replace(Eo,(...t)=>"-"+t[1].toLowerCase())}`)]=Co(s))}const r=e.parent,s=Cn(t,r.nodeIndex).renderElement;if(r.element.name)for(let e in n){const r=n[e];null!=r?t.renderer.setAttribute(s,e,r):t.renderer.removeAttribute(s,e)}else t.renderer.setValue(s,`bindings=${JSON.stringify(n,null,2)}`)}}var i}function wo(t,e,n,r){Ui(t,e,n,...r)}const Eo=/([A-Z])/g;function Co(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function So(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function To(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class Io{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,r=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=Wn(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return Cn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Vr(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){Ao(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&Ao(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!Qn(t);)t=t.parent;return t.parent?Cn(t.parent,Wn(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?zn(this.view,this.nodeDef):zn(this.elView,this.elDef)}logError(t,...e){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(t,e){let n=-1;for(let r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(n,r);let o=-1;n.factory(()=>++o===i?t.error.bind(t,...e):Rn),o<i&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function Ao(t,e,n){for(let r in e.references)n[r]=yi(t,e,e.references[r])}function ko(t,e,n,r){const i=fo,o=po,s=mo;try{fo=t;const a=e.apply(n,r);return po=o,mo=s,fo=i,a}catch(t){if(rt(t)||!po)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Nn(t,e),t}(t,No())}}function No(){return po?new Io(po,mo):null}class Oo{constructor(t){this.delegate=t}createRenderer(t,e){return new Ro(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class Ro{constructor(t){this.delegate=t,this.data=this.delegate.data}destroyNode(t){!function(t){ze.delete(t.nativeNode)}(Qe(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),r=No();if(r){const e=new We(n,null,r);e.name=t,$e(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=No();return n&&$e(new Ke(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=No();return n&&$e(new Ke(e,null,n)),e}appendChild(t,e){const n=Qe(t),r=Qe(e);n&&r&&n instanceof We&&n.addChild(r),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const r=Qe(t),i=Qe(e),o=Qe(n);r&&i&&r instanceof We&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Qe(t),r=Qe(e);n&&r&&n instanceof We&&n.removeChild(r),this.delegate.removeChild(t,e)}selectRootElement(t){const e=this.delegate.selectRootElement(t),n=No();return n&&$e(new We(e,null,n)),e}setAttribute(t,e,n,r){const i=Qe(t);i&&i instanceof We&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){const r=Qe(t);r&&r instanceof We&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Qe(t);n&&n instanceof We&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Qe(t);n&&n instanceof We&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,r){const i=Qe(t);i&&i instanceof We&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){const r=Qe(t);r&&r instanceof We&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const r=Qe(t);r&&r instanceof We&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const r=Qe(t);r&&r.listeners.push(new Ge(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function xo(t,e,n){return new Do(t,e,n)}class Do extends Yt{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(zi)return;zi=!0;const t=we()?{setCurrentNode:go,createRootView:$i,createEmbeddedView:Ji,createComponentView:Yi,createNgModuleRef:Zi,overrideProvider:no,overrideComponentView:ro,clearOverrides:io,checkAndUpdateView:uo,checkNoChangesView:lo,destroyView:co,createDebugContext:(t,e)=>new Io(t,e),handleEvent:yo,updateDirectives:vo,updateRenderer:bo}:{setCurrentNode:()=>{},createRootView:Qi,createEmbeddedView:ki,createComponentView:Oi,createNgModuleRef:qr,overrideProvider:Rn,overrideComponentView:Rn,clearOverrides:Rn,checkAndUpdateView:Mi,checkNoChangesView:Pi,destroyView:ji,createDebugContext:(t,e)=>new Io(t,e),handleEvent:(t,e,n,r)=>t.def.handleEvent(t,e,n,r),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?so:ao,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?so:ao,t)};An.setCurrentNode=t.setCurrentNode,An.createRootView=t.createRootView,An.createEmbeddedView=t.createEmbeddedView,An.createComponentView=t.createComponentView,An.createNgModuleRef=t.createNgModuleRef,An.overrideProvider=t.overrideProvider,An.overrideComponentView=t.overrideComponentView,An.clearOverrides=t.clearOverrides,An.checkAndUpdateView=t.checkAndUpdateView,An.checkNoChangesView=t.checkNoChangesView,An.destroyView=t.destroyView,An.resolveDep=ui,An.createDebugContext=t.createDebugContext,An.handleEvent=t.handleEvent,An.updateDirectives=t.updateDirectives,An.updateRenderer=t.updateRenderer,An.dirtyParentQueries=pi}();const e=tr(this._ngModuleDefFactory);return An.createNgModuleRef(this.moduleType,t||U.NULL,this._bootstrapComponents,e)}}let Po;"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&(window.ngDevMode=!0),"undefined"!=typeof self&&(self.ngDevMode=!0),"undefined"!=typeof t&&(t.ngDevMode=!0)),Po={parent:Po,id:null,node:null,data:[],ngStaticData:[],cleanup:null,renderer:null,child:null,tail:null,next:null,bindingStartIndex:null,creationMode:!0,viewHookStartIndex:null}}).call(e,n("fRUx"))},"2K0D":function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});const r="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=r||"undefined"!=typeof t&&t||i;!function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(e,n("fRUx"))},"2mbX":function(t,e,n){"use strict";e.a=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},"2mdx":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("EqqR");e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var s=o-55296;r.assert(++i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},"32XG":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=function(){this.blockSize=-1}},"4yfK":function(t,e,n){"use strict";e.a=class extends Error{constructor(){const t=super("object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}}},"6Xbx":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"__assign",function(){return i}),e.__rest=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n},e.__decorate=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},e.__param=function(t,e){return function(n,r){e(n,r,t)}},e.__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},e.__awaiter=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},e.__generator=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},e.__exportStar=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},e.__values=o,e.__read=s,e.__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},e.__await=a,e.__asyncGenerator=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||u(t,e)})})}function u(t,e){try{(n=i[t](e)).value instanceof a?Promise.resolve(n.value.v).then(l,c):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function l(t){u("next",t)}function c(t){u("throw",t)}function h(t,e){t(e),o.shift(),o.length&&u(o[0][0],o[0][1])}},e.__asyncDelegator=function(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:a(t[r](e)),done:"return"===r}:i?i(e):e})}},e.__asyncValues=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"==typeof o?o(t):t[Symbol.iterator]()},e.__makeTemplateObject=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},e.__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__importDefault=function(t){return t&&t.__esModule?t:{default:t}};var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(t){return this instanceof a?(this.v=t,this):new a(t)}},"7wpj":function(t,e,n){"use strict";var r=n("WJ2g");e.a=class extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},"9i4M":function(t,e,n){"use strict";var r=n("05/P"),i=n("WJ2g"),o=n("0mJR"),s=n("4yfK"),a=n("jOLw"),u=n("xEcM");class l extends i.a{constructor(t){super(t),this.destination=t}}e.b=l;class c extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new l(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}e.a=c,c.create=((t,e)=>new h(t,e));class h extends c{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},CLKv:function(t,e,n){"use strict";e.a=function(t){return i=t,o};var r=n("jLix");let i;function o(){try{return i.apply(this,arguments)}catch(t){return r.a.e=t,r.a}}},COMn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Error.captureStackTrace;e.patchCapture=function(t){var e=r;return r=t,e};var i=function(){return function(t,e){if(this.code=t,this.message=e,r)r(this,o.prototype.create);else{var n=Error.apply(this,arguments);this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();e.FirebaseError=i,i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.name="FirebaseError";var o=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],o=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"});var s=new i(o,n=this.serviceName+": "+n+" ("+o+").");for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(s[a]=e[a]);return s},t}();e.ErrorFactory=o},CdVW:function(t,e,n){"use strict";const r=function(t){let e,r=n("2K0D").a.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}();e.a=r},ElHI:function(t,e,n){"use strict";const r=Array.isArray||(t=>t&&"number"==typeof t.length);e.a=r},EqqR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("/byE");e.assert=function(t,n){if(!t)throw e.assertionError(n)},e.assertionError=function(t){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)}},G3Tt:function(t,e,n){"use strict";e.a=function(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,null,t)};var r=n("rhNu"),i=n("PK/U")},G9H4:function(t,e,n){"use strict";e.a=function(){}},GcAb:function(t,e,n){"use strict";e.a=function(t){return"function"==typeof t}},Hwfe:function(t,e,n){"use strict";e.a=function(...t){return i(t)},e.b=i;var r=n("G9H4");function i(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:r.a}},Hyt9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Deferred=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}()},IKzn:function(t,e,n){"use strict";e.a=function(){return Object(r.a)()(this)};var r=n("o1Kc")},JCUt:function(t,e,n){"use strict";function r(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=r(t[n],e[n]));return t}Object.defineProperty(e,"__esModule",{value:!0}),e.deepCopy=function(t){return r(void 0,t)},e.deepExtend=r,e.patchProperty=function(t,e,n){t[e]=n}},JEJ4:function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n("EqqR")),r(n("e9+7")),r(n("/byE")),r(n("JCUt")),r(n("Hyt9")),r(n("U4XL")),r(n("COMn")),r(n("WH8D")),r(n("NYZW")),r(n("/ygB")),r(n("NeHU")),r(n("uzI5")),r(n("Xp63")),r(n("Tmcl")),r(n("2mdx"))},Lq4y:function(t,e,n){"use strict";const r=function(t){const e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;{const{Set:e}=t;if(e&&"function"==typeof(new e)["@@iterator"])return"@@iterator";const{Map:n}=t;if(n){let t=Object.getOwnPropertyNames(n.prototype);for(let e=0;e<t.length;++e){let r=t[e];if("entries"!==r&&"size"!==r&&n.prototype[r]===n.prototype.entries)return r}}return"@@iterator"}}(n("2K0D").a);e.a=r},NYZW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("e9+7"),i=n("WH8D");e.decode=function(t){var e={},n={},o={},s="";try{var a=t.split(".");e=i.jsonEval(r.base64Decode(a[0])||""),n=i.jsonEval(r.base64Decode(a[1])||""),s=a[2],o=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:o,signature:s}},e.isValidTimestamp=function(t){var n,r,i=e.decode(t).claims,o=Math.floor((new Date).getTime()/1e3);return"object"==typeof i&&(i.hasOwnProperty("nbf")?n=i.nbf:i.hasOwnProperty("iat")&&(n=i.iat),r=i.hasOwnProperty("exp")?i.exp:n+86400),o&&n&&r&&o>=n&&o<=r},e.issuedAtTime=function(t){var n=e.decode(t).claims;return"object"==typeof n&&n.hasOwnProperty("iat")?n.iat:null},e.isValidFormat=function(t){var n=e.decode(t),r=n.claims;return!!n.signature&&!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},e.isAdmin=function(t){var n=e.decode(t).claims;return"object"==typeof n&&!0===n.admin}},NeHU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("/ygB");e.querystring=function(t){var e=[];return r.forEach(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e}},P6aB:function(t,e,n){"use strict";var r=n("05/P");class i extends r.a{constructor(t){super(),this.scheduler=t}static create(t){return new i(t)}static dispatch(t){const{subscriber:e}=t;e.complete()}_subscribe(t){const e=this.scheduler;if(e)return e.schedule(i.dispatch,0,{subscriber:t});t.complete()}}e.a=i},P9wo:function(module,exports,__webpack_require__){(function(global){(function(){var g,goog=goog||{},k=this;function l(t){return"string"==typeof t}function aa(){}function ba(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function n(t){return"array"==ba(t)}function ca(t){var e=ba(t);return"array"==e||"object"==e&&"number"==typeof t.length}function da(t){return"function"==ba(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var q="closure_uid_"+(1e9*Math.random()>>>0),ea=0;function fa(t,e,n){return t.call.apply(t.bind,arguments)}function ha(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function r(t,e,n){return(r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fa:ha).apply(null,arguments)}function ia(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var t=Date.now||function(){return+new Date};function u(t,e){function n(){}n.prototype=e.prototype,t.H=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Cb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ja(t){if(Error.captureStackTrace)Error.captureStackTrace(this,ja);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function ka(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}u(ja,Error),ja.prototype.name="CustomError";var la=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function ma(t,e){return t<e?-1:t>e?1:0}function na(t,e){e.unshift(t),ja.call(this,ka.apply(null,e)),e.shift()}function oa(t,e){throw new na("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function w(){0!=qa&&(ra[this[q]||(this[q]=++ea)]=this),this.i=this.i,this.w=this.w}u(na,ja),na.prototype.name="AssertionError";var qa=0,ra={};w.prototype.i=!1,w.prototype.Z=function(){if(!this.i&&(this.i=!0,this.A(),0!=qa)){var t=this[q]||(this[q]=++ea);delete ra[t]}},w.prototype.A=function(){if(this.w)for(;this.w.length;)this.w.shift()()};var sa=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(l(t))return l(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ta=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=l(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},x;function ua(t){t:{for(var e=va,n=t.length,r=l(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:l(t)?t.charAt(e):t[e]}function wa(t){if(!n(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function xa(t){return Array.prototype.concat.apply([],arguments)}function ya(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}t:{var za=k.navigator;if(za){var Aa=za.userAgent;if(Aa){x=Aa;break t}}x=""}function y(t){return-1!=x.indexOf(t)}function Ba(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ca(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function Da(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function Ea(t){var e,n={};for(e in t)n[e]=t[e];return n}var Fa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ga(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Fa.length;o++)n=Fa[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ha(t){return Ha[" "](t),t}function Ia(t,e){var n=Ja;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}Ha[" "]=aa;var Ka=y("Opera"),z=y("Trident")||y("MSIE"),La=y("Edge"),Ma=y("Gecko")&&!(-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),Na=-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"),Pa,a;function Oa(){var t=k.document;return t?t.documentMode:void 0}t:{var Qa="",Ra=(a=x,Ma?/rv:([^\);]+)(\)|;)/.exec(a):La?/Edge\/([\d\.]+)/.exec(a):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Na?/WebKit\/(\S+)/.exec(a):Ka?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Ra&&(Qa=Ra?Ra[1]:""),z){var Sa=Oa();if(null!=Sa&&Sa>parseFloat(Qa)){Pa=String(Sa);break t}}Pa=Qa}var Ja={},Ua;function Ta(t){return Ia(t,function(){for(var e=0,n=la(String(Pa)).split("."),r=la(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ma(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ma(0==s[2].length,0==a[2].length)||ma(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Va=k.document;Ua=Va&&z?Oa()||("CSS1Compat"==Va.compatMode?parseInt(Pa,10):5):void 0;var Wa=Object.freeze||function(t){return t},Xa=!z||9<=Number(Ua),Ya=z&&!Ta("9"),Za=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return k.addEventListener("test",aa,e),k.removeEventListener("test",aa,e),t}();function A(t,e){this.type=t,this.a=this.target=e,this.Pa=!0}function $a(t,e){if(A.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ma){t:{try{Ha(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=l(t.pointerType)?t.pointerType:ab[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}A.prototype.b=function(){this.Pa=!1},u($a,A);var ab=Wa({2:"touch",3:"pen",4:"mouse"});$a.prototype.b=function(){$a.H.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ya)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var bb="closure_listenable_"+(1e6*Math.random()|0);function cb(t){return!(!t||!t[bb])}var db=0;function eb(t,e,n,r,i){this.listener=t,this.a=null,this.src=e,this.type=n,this.capture=!!r,this.ga=i,this.key=++db,this.Y=this.ca=!1}function fb(t){t.Y=!0,t.listener=null,t.a=null,t.src=null,t.ga=null}function gb(t){this.src=t,this.a={},this.b=0}function ib(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=sa(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fb(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function jb(t,e,n,r,i){return t=t.a[e.toString()],e=-1,t&&(e=hb(t,n,r,i)),-1<e?t[e]:null}function hb(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ga==r)return i}return-1}gb.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=hb(t,e,r,i);return-1<s?(e=t[s],n||(e.ca=!1)):((e=new eb(e,this.src,o,!!r,i)).ca=n,t.push(e)),e};var kb="closure_lm_"+(1e6*Math.random()|0),lb={},mb=0;function nb(t,e,r,i,o){if(i&&i.once)return ob(t,e,r,i,o);if(n(e)){for(var s=0;s<e.length;s++)nb(t,e[s],r,i,o);return null}return r=pb(r),cb(t)?t.aa(e,r,p(i)?!!i.capture:!!i,o):qb(t,e,r,!1,i,o)}function qb(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=rb(t);if(a||(t[kb]=a=new gb(t)),(n=a.add(e,n,r,s,o)).a)return n;if(r=sb(),n.a=r,r.src=t,r.listener=n,t.addEventListener)Za||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tb(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return mb++,n}function sb(){var t=ub,e=Xa?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function ob(t,e,r,i,o){if(n(e)){for(var s=0;s<e.length;s++)ob(t,e[s],r,i,o);return null}return r=pb(r),cb(t)?t.Ha(e,r,p(i)?!!i.capture:!!i,o):qb(t,e,r,!0,i,o)}function vb(t,e,r,i,o){if(n(e))for(var s=0;s<e.length;s++)vb(t,e[s],r,i,o);else i=p(i)?!!i.capture:!!i,r=pb(r),cb(t)?t.va(e,r,i,o):t&&(t=rb(t))&&(e=jb(t,e,r,i,o))&&wb(e)}function wb(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(cb(e))ib(e.c,t);else{var n=t.type,r=t.a;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),mb--,(n=rb(e))?(ib(n,t),0==n.b&&(n.src=null,e[kb]=null)):fb(t)}}}function tb(t){return t in lb?lb[t]:lb[t]="on"+t}function xb(t,e,n,r){var i=!0;if((t=rb(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Y&&(o=yb(o,r),i=i&&!1!==o)}return i}function yb(t,e){var n=t.listener,r=t.ga||t.src;return t.ca&&wb(t),n.call(r,e)}function ub(t,e){if(t.Y)return!0;if(!Xa){if(!e)t:{e=["window","event"];for(var n=k,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new $a(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.a;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.a=r[i];var o=xb(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.a=r[i],o=xb(r[i],t,!1,e),n=n&&o}return n}return yb(t,new $a(e,this))}function rb(t){return(t=t[kb])instanceof gb?t:null}var zb="__closure_events_fn_"+(1e9*Math.random()>>>0);function pb(t){return da(t)?t:(t[zb]||(t[zb]=function(e){return t.handleEvent(e)}),t[zb])}function B(){w.call(this),this.c=new gb(this),this.P=this,this.K=null}function Ab(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ga||s.src;s.ca&&ib(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Pa}function Bb(t){return!/^\s*$/.test(t)&&/^[\],:{}\s\u2028\u2029]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function Cb(a){if(a=String(a),Bb(a))try{return eval("("+a+")")}catch(t){}throw Error("Invalid JSON string: "+a)}function Db(t){var e=[];return Eb(new Fb,t,e),e.join("")}function Fb(){}function Eb(t,e,r){if(null==e)r.push("null");else{if("object"==typeof e){if(n(e)){var i=e;e=i.length,r.push("[");for(var o="",s=0;s<e;s++)r.push(o),Eb(t,i[s],r),o=",";return void r.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(i in r.push("{"),o="",e)Object.prototype.hasOwnProperty.call(e,i)&&"function"!=typeof(s=e[i])&&(r.push(o),Gb(i,r),r.push(":"),Eb(t,s,r),o=",");return void r.push("}")}e=e.valueOf()}switch(typeof e){case"string":Gb(e,r);break;case"number":r.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":r.push(String(e));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}u(B,w),B.prototype[bb]=!0,g=B.prototype,g.addEventListener=function(t,e,n,r){nb(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){vb(this,t,e,n,r)},g.dispatchEvent=function(t){var e,n=this.K;if(n)for(e=[];n;n=n.K)e.push(n);n=this.P;var r=t.type||t;if(l(t))t=new A(t,n);else if(t instanceof A)t.target=t.target||n;else{var i=t;Ga(t=new A(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Ab(s,r,!0,t)&&i}if(i=Ab(s=t.a=n,r,!0,t)&&i,i=Ab(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Ab(s=t.a=e[o],r,!1,t)&&i;return i},g.A=function(){if(B.H.A.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)fb(n[r]);delete e.a[t],e.b--}}this.K=null},g.aa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},g.Ha=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)},g.va=function(t,e,n,r){var i=this.c;if((t=String(t).toString())in i.a){var o=i.a[t];-1<(e=hb(o,e,n,r))&&(fb(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete i.a[t],i.b--))}};var Hb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ib=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Gb(t,e){e.push('"',t.replace(Ib,function(t){var e=Hb[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Hb[t]=e),e}),'"')}function Jb(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Kb(){this.b=this.a=null}Jb.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Nb=new Jb(function(){return new Lb},function(t){t.reset()}),Rb,Tb;function Ob(){var t=Pb,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lb(){this.next=this.b=this.a=null}function Qb(t){k.setTimeout(function(){throw t},0)}function Sb(){var t=k.MessageChannel;if("undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!y("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=r(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),"undefined"!=typeof t&&!y("Trident")&&!y("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).za;n.za=null,t()}},function(t){i.next={za:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){k.setTimeout(t,0)}}function Ub(){if(-1!=String(k.Promise).indexOf("[native code]")){var t=k.Promise.resolve(void 0);Tb=function(){t.then(Vb)}}else Tb=function(){var t=Vb;!da(k.setImmediate)||k.Window&&k.Window.prototype&&!y("Edge")&&k.Window.prototype.setImmediate==k.setImmediate?(Rb||(Rb=Sb()),Rb(t)):k.setImmediate(t)}}Kb.prototype.add=function(t,e){var n=Nb.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lb.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lb.prototype.reset=function(){this.next=this.b=this.a=null};var Wb=!1,Pb=new Kb;function Vb(){for(var t;t=Ob();){try{t.a.call(t.b)}catch(t){Qb(t)}var e=Nb;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Wb=!1}function Xb(e,n){B.call(this),this.b=e||1,this.a=n||k,this.f=r(this.kb,this),this.g=t()}function Yb(t){t.$=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Zb(t,e,n){if(da(t))n&&(t=r(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=r(t.handleEvent,t)}return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function $b(t,e,n){w.call(this),this.f=null!=n?r(t,n):t,this.c=e,this.b=r(this.eb,this),this.a=[]}function ac(t){t.X=Zb(t.b,t.c),t.f.apply(null,t.a)}function C(t){w.call(this),this.b=t,this.a={}}u(Xb,B),g=Xb.prototype,g.$=!1,g.L=null,g.kb=function(){if(this.$){var e=t()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.$&&(this.L=this.a.setTimeout(this.f,this.b),this.g=t()))}},g.start=function(){this.$=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=t())},g.A=function(){Xb.H.A.call(this),Yb(this),delete this.a},u($b,w),g=$b.prototype,g.ha=!1,g.X=null,g.Xa=function(t){this.a=arguments,this.X?this.ha=!0:ac(this)},g.A=function(){$b.H.A.call(this),this.X&&(k.clearTimeout(this.X),this.X=null,this.ha=!1,this.a=[])},g.eb=function(){this.X=null,this.ha&&(this.ha=!1,ac(this))},u(C,w);var bc=[];function cc(t){Ba(t.a,function(t,e){this.a.hasOwnProperty(e)&&wb(t)},t),t.a={}}function dc(t,e,n){this.reset(t,e,n,void 0,void 0)}C.prototype.aa=function(t,e,r,i){n(e)||(e&&(bc[0]=e.toString()),e=bc);for(var o=0;o<e.length;o++){var s=nb(t,e[o],r||this.handleEvent,i||!1,this.b||this);if(!s)break;this.a[s.key]=s}return this},C.prototype.va=function(t,e,r,i,o){if(n(e))for(var s=0;s<e.length;s++)this.va(t,e[s],r,i,o);else r=r||this.handleEvent,i=p(i)?!!i.capture:!!i,o=o||this.b||this,r=pb(r),i=!!i,(e=cb(t)?jb(t.c,String(e),r,i,o):t&&(t=rb(t))?jb(t,e,r,i,o):null)&&(wb(e),delete this.a[e.key])},C.prototype.A=function(){C.H.A.call(this),cc(this)},C.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dc.prototype.a=null;var ec=0;function fc(t){this.f=t,this.b=this.c=this.a=null}function D(t,e){this.name=t,this.value=e}dc.prototype.reset=function(e,n,r,i,o){"number"==typeof o||ec++,i||t(),delete this.a},D.prototype.toString=function(){return this.name};var gc=new D("SEVERE",1e3),hc=new D("WARNING",900),ic=new D("INFO",800),jc=new D("CONFIG",700),kc=new D("FINE",500);function lc(t){return t.c?t.c:t.a?lc(t.a):(oa("Root logger has no level set."),null)}fc.prototype.log=function(t,e,n){if(t.value>=lc(this).value)for(da(e)&&(e=e()),t=new dc(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var mc={},nc=null;function oc(t){var e;if(nc||(nc=new fc(""),mc[""]=nc,nc.c=jc),!(e=mc[t])){e=new fc(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=oc(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,mc[t]=e}return e}function E(t,e){t&&t.log(hc,e,void 0)}function pc(t,e){t&&t.log(ic,e,void 0)}function F(t,e){t&&t.log(kc,e,void 0)}function qc(){this.a=oc("goog.labs.net.webChannel.WebChannelDebug"),this.b=!0}function rc(t,e,n,r,i,o){H(t,function(){if(t.b)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");s=2<=h.length&&"type"==h[1]?s+(c+"=")+l+"&":s+(c+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}function sc(t,e,n,r,i,o,s){H(t,function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}function tc(t,e,n,r){H(t,function(){return"XMLHTTP TEXT ("+e+"): "+uc(t,n)+(r?" "+r:"")})}function vc(t,e){H(t,function(){return"TIMEOUT: "+e})}function I(t,e){F(t.a,e)}function wc(t,e,n){(t=t.a)&&t.log(gc,n||"Exception",e)}function H(t,e){pc(t.a,e)}function xc(t,e){(t=t.a)&&t.log(gc,e,void 0)}function uc(t,e){if(!t.b)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(var i=0;i<r.length;i++)if(n(r[i])){var o=r[i];if(!(2>o.length)){var s=o[1];if(n(s)&&!(1>s.length)){var a=s[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<s.length;u++)s[u]=""}}}return Db(r)}catch(n){return I(t,"Exception parsing expected JS array - probably was not JS"),e}}qc.prototype.Ea=function(){this.b=!1};var yc=new B;function zc(t){A.call(this,"serverreachability",t)}function Ac(t){yc.dispatchEvent(new zc(yc,t))}function Bc(t){A.call(this,"statevent",t)}function J(t){yc.dispatchEvent(new Bc(yc,t))}function Cc(t){A.call(this,"timingevent",t)}function Dc(t,e,n){yc.dispatchEvent(new Cc(yc,t,e,n))}function Ec(t,e){if(!da(t))throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}u(zc,A),u(Bc,A),u(Cc,A);var Fc={NO_ERROR:0,lb:1,sb:2,rb:3,ob:4,qb:5,tb:6,Ra:7,TIMEOUT:8,wb:9},Gc={nb:"complete",Ab:"success",Sa:"error",Ra:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",pb:"downloadprogress",Bb:"uploadprogress"},Kc;function Hc(){}function Ic(t){var e;return(e=t.a)||(e={},Jc(t)&&(e[0]=!0,e[1]=!0),e=t.a=e),e}function Lc(){}function Mc(t){return(t=Jc(t))?new ActiveXObject(t):new XMLHttpRequest}function Jc(t){if(!t.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.b=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.b}function K(t,e,n,r){this.i=t,this.b=e,this.f=n,this.T=r||1,this.N=new C(this),this.S=Nc,(t=this.I=new Xb).b=Oc,t.L&&t.$?(Yb(t),t.start()):t.L&&Yb(t),this.j=null,this.c=!1,this.m=this.g=this.h=this.K=this.D=this.U=this.w=null,this.u=[],this.a=null,this.F=0,this.l=this.o=null,this.C=-1,this.B=!1,this.P=0,this.J=null,this.M=!1}Hc.prototype.a=null,u(Lc,Hc),Kc=new Lc;var Nc=45e3,Oc=250;function Pc(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}var Qc={},Rc={};function Sc(t,e,n){t.K=1,t.h=Tc(L(e)),t.m=n,t.M=!0,Uc(t,null)}function Vc(t,e,n,r){t.K=1,t.h=Tc(L(e)),t.m=null,t.M=n,Uc(t,r)}function Uc(e,n){e.D=t(),Wc(e),e.g=L(e.h),Xc(e.g,"t",e.T),e.F=0,e.a=e.i.da(e.i.ia()?n:null),0<e.P&&(e.J=new $b(r(e.Qa,e,e.a),e.P)),e.N.aa(e.a,"readystatechange",e.hb),n=e.j?Ea(e.j):{},e.m?(e.o||(e.o="POST"),n["Content-Type"]="application/x-www-form-urlencoded",e.a.fa(e.g,e.o,e.m,n)):(e.o="GET",e.a.fa(e.g,e.o,null,n)),Ac(1),rc(e.b,e.o,e.g,e.f,e.T,e.m)}function Yc(t){var e=M(t.a),n=t.a.Fa(),r=t.a.W();if(!(3>e||3==e&&!Ka&&!t.a.V())){t.B||4!=e||7==n||Ac(8==n||0>=r?3:2),Zc(t);var i=t.a.W();t.C=i,(n=t.a.V())||I(t.b,function(){return"No response text for uri "+t.g+" status "+i}),t.c=200==i,sc(t.b,t.o,t.g,t.f,t.T,e,i),t.c?(t.M?($c(t,e,n),Ka&&t.c&&3==e&&ad(t)):(tc(t.b,t.f,n,null),bd(t,n)),4==e&&cd(t),t.c&&!t.B&&(4==e?t.i.ua(t):(t.c=!1,Wc(t)))):(400==i&&0<n.indexOf("Unknown SID")?(t.l=3,J(12),E(t.b.a,"XMLHTTP Unknown SID ("+t.f+")")):(t.l=0,J(13),E(t.b.a,"XMLHTTP Bad status "+i+" ("+t.f+")")),cd(t),dd(t))}}function $c(t,e,n){for(var r=!0;!t.B&&t.F<n.length;){var i=ed(t,n);if(i==Rc){4==e&&(t.l=4,J(14),r=!1),tc(t.b,t.f,null,"[Incomplete Response]");break}if(i==Qc){t.l=4,J(15),tc(t.b,t.f,n,"[Invalid Chunk]"),r=!1;break}tc(t.b,t.f,i,null),bd(t,i)}4==e&&0==n.length&&(t.l=1,J(16),r=!1),t.c=t.c&&r,r||(tc(t.b,t.f,n,"[Invalid Chunked Response]"),cd(t),dd(t))}function ad(t){t.N.aa(t.I,"tick",t.gb),t.I.start()}function ed(t,e){var n=t.F,r=e.indexOf("\n",n);return-1==r?Rc:(n=Number(e.substring(n,r)),isNaN(n)?Qc:(r+=1)+n>e.length?Rc:(e=e.substr(r,n),t.F=r+n,e))}function Wc(e){e.U=t()+e.S,fd(e,e.S)}function fd(t,e){if(null!=t.w)throw Error("WatchDog timer not null");t.w=Ec(r(t.fb,t),e)}function Zc(t){t.w&&(k.clearTimeout(t.w),t.w=null)}function dd(t){t.i.Ja()||t.B||t.i.ua(t)}function cd(t){Zc(t);var e=t.J;e&&"function"==typeof e.Z&&e.Z(),t.J=null,Yb(t.I),cc(t.N),t.a&&(e=t.a,t.a=null,e.abort(),e.Z())}function bd(t,e){try{t.i.Ma(t,e),Ac(4)}catch(e){wc(t.b,e,"Error in httprequest callback")}}function gd(t){if(t.v&&"function"==typeof t.v)return t.v();if(l(t))return t.split("");if(ca(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return Ca(t)}function hd(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ca(t)||l(t))ta(t,e,void 0);else{if(t.O&&"function"==typeof t.O)var n=t.O();else if(t.v&&"function"==typeof t.v)n=void 0;else if(ca(t)||l(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else n=Da(t);i=(r=gd(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function N(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t){t instanceof N?(n=t.O(),r=t.v()):(n=Da(t),r=Ca(t));for(var i=0;i<n.length;i++)this.set(n[i],r[i])}}function jd(t){t.b={},t.a.length=0,t.c=0}function kd(t,e){return!!O(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&id(t),!0)}function id(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];O(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)O(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}g=K.prototype,g.setTimeout=function(t){this.S=t},g.hb=function(t){t=t.target;var e=this.J;e&&3==M(t)?(I(this.b,"Throttling readystatechange."),e.Xa()):this.Qa(t)},g.Qa=function(t){try{t==this.a?Yc(this):E(this.b.a,"Called back with an unexpected xmlhttp")}catch(t){if(I(this.b,"Failed call to OnXmlHttpReadyStateChanged_"),this.a&&this.a.V()){var e=this;wc(this.b,t,function(){return"ResponseText: "+e.a.V()})}else wc(this.b,t,"No response text")}},g.gb=function(){var t=M(this.a),e=this.a.V();this.F<e.length&&(Zc(this),$c(this,t,e),this.c&&4!=t&&Wc(this))},g.cancel=function(){this.B=!0,cd(this)},g.fb=function(){this.w=null;var e=t();0<=e-this.U?(this.c&&xc(this.b,"Received watchdog timeout even though request loaded successfully"),vc(this.b,this.g),2!=this.K&&(Ac(3),J(17)),cd(this),this.l=2,dd(this)):(E(this.b.a,"WatchDog timer called too early"),fd(this,this.U-e))},g=N.prototype,g.s=function(){return this.c},g.v=function(){id(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},g.O=function(){return id(this),this.a.concat()},g.get=function(t,e){return O(this.b,t)?this.b[t]:e},g.set=function(t,e){O(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},g.forEach=function(t,e){for(var n=this.O(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ld=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function md(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function P(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof P?(this.h=void 0!==e?e:t.h,nd(this,t.f),this.j=t.j,od(this,t.b),pd(this,t.i),this.a=t.a,qd(this,rd(t.c)),this.g=t.g):t&&(n=String(t).match(ld))?(this.h=!!e,nd(this,n[1]||"",!0),this.j=sd(n[2]||""),od(this,n[3]||"",!0),pd(this,n[4]),this.a=sd(n[5]||"",!0),qd(this,n[6]||"",!0),this.g=sd(n[7]||"")):(this.h=!!e,this.c=new td(null,this.h))}function L(t){return new P(t)}function nd(t,e,n){t.f=n?sd(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function od(t,e,n){t.b=n?sd(e,!0):e}function pd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function qd(t,e,n){e instanceof td?(t.c=e,zd(t.c,t.h)):(n||(e=ud(e,Ad)),t.c=new td(e,t.h))}function Q(t,e,n){t.c.set(e,n)}function Xc(t,e,r){n(r)||(r=[String(r)]),Bd(t.c,e,r)}function Tc(e){return Q(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^t()).toString(36)),e}function Cd(t){return t instanceof P?L(t):new P(t,void 0)}function Dd(t,e,n,r){var i=new P(null,void 0);return t&&nd(i,t),e&&od(i,e),n&&pd(i,n),r&&(i.a=r),i}function sd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ud(t,e,n){return l(t)?(t=encodeURI(t).replace(e,Ed),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ed(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}P.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ud(e,vd,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ud(e,vd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(ud(n,"/"==n.charAt(0)?wd:xd,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",ud(n,yd)),t.join("")},P.prototype.resolve=function(t){var e=L(this),n=!!t.f;n?nd(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?od(e,t.b):n=null!=t.i;var r=t.a;if(n)pd(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?qd(e,rd(t.c)):n=!!t.g,n&&(e.g=t.g),e};var vd=/[#\/\?@]/g,xd=/[#\?:]/g,wd=/[#\?]/g,Ad=/[#\?@]/g,yd=/#/g;function td(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function R(t){t.a||(t.a=new N,t.b=0,t.c&&md(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Gd(t,e){R(t),e=Fd(t,e),O(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,kd(t.a,e))}function Hd(t,e){return R(t),e=Fd(t,e),O(t.a.b,e)}function Bd(t,e,n){Gd(t,e),0<n.length&&(t.c=null,t.a.set(Fd(t,e),ya(n)),t.b+=n.length)}function rd(t){var e=new td;return e.c=t.c,t.a&&(e.a=new N(t.a),e.b=t.b),e}function Fd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function zd(t,e){e&&!t.f&&(R(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Gd(this,e),Bd(this,n,t))},t)),t.f=e}function Id(){this.a=t()}g=td.prototype,g.s=function(){return R(this),this.b},g.add=function(t,e){R(this),this.c=null,t=Fd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},g.forEach=function(t,e){R(this),this.a.forEach(function(n,r){ta(n,function(n){t.call(e,n,r,this)},this)},this)},g.O=function(){R(this);for(var t=this.a.v(),e=this.a.O(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},g.v=function(t){R(this);var e=[];if(l(t))Hd(this,t)&&(e=xa(e,this.a.get(Fd(this,t))));else{t=this.a.v();for(var n=0;n<t.length;n++)e=xa(e,t[n])}return e},g.set=function(t,e){return R(this),this.c=null,Hd(this,t=Fd(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},g.get=function(t,e){return 0<(t=t?this.v(t):[]).length?String(t[0]):e},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.O(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.v(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Jd=null;function Kd(){Jd||(Jd=new Id)}function Ld(){Jd||(Jd=new Id)}function Md(){}Id.prototype.set=function(t){this.a=t},Id.prototype.reset=function(){this.set(t())},Id.prototype.get=function(){return this.a},u(Ld,Kd);var Nd={OPEN:"a",mb:"b",Sa:"c",vb:"d"};function Od(){A.call(this,"d")}function Pd(){A.call(this,"c")}function Qd(t,e){this.a=t,this.b=e,this.c=this.i=null,this.h=!1,this.l=null,this.f=-1,this.m=this.g=null}function Rd(t){I(t.b,"TestConnection: starting stage 2");var e=t.a.I.a;if(null!=e)I(t.b,function(){return"Buffered"}),J(4),e?(J(10),Sd(t.a,t,!1)):(J(11),Sd(t.a,t,!0));else{t.c=new K(t,t.b,void 0,void 0),t.c.j=t.i;var n=Td(t.a,t.g,t.l);J(4),Xc(n,"TYPE","xmlhttp");var r=t.a.j,i=t.a.K;r&&i&&Q(n,r,i),Vc(t.c,n,!1,t.g)}}function Vd(){this.a=this.b=null}function S(){this.a=new N}function Wd(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[q]||(t[q]=++ea)):e.charAt(0)+t}function Xd(t,e){this.a=t,this.b=e}function Yd(t){this.g=t||Zd,this.f=k.pa&&k.pa.Ka&&k.pa.Ka()&&k.pa.Ka().Db?this.g:1,this.a=null,1<this.f&&(this.a=new S),this.b=null,this.c=[]}u(Od,A),u(Pd,A),g=Qd.prototype,g.R=null,g.da=function(t){return this.a.da(t)},g.abort=function(){this.c&&(this.c.cancel(),this.c=null),this.f=-1},g.Ja=function(){return!1},g.Ma=function(t,e){if(this.f=t.C,0==this.R){if(I(this.b,"TestConnection: Got data for stage 1"),!this.a.D&&(t=t.a)){var n=t.a?t.a.getResponseHeader("X-Client-Wire-Protocol"):null;this.m=n||null,this.a.j&&((t=t.a?t.a.getResponseHeader("X-HTTP-Session-Id"):null)?this.a.K=t:E(this.b.a,"Missing X_HTTP_SESSION_ID in the handshake response"))}if(e){try{var r=this.a.ma.a.parse(e)}catch(t){return wc(this.b,t),void Ud(this.a,this)}this.g=r[0]}else I(this.b,"TestConnection: Null responseText"),Ud(this.a,this)}else 1==this.R&&(this.h?J(6):"11111"==e?(J(5),this.h=!0,(!z||10<=Number(Ua))&&(this.f=200,this.c.cancel(),I(this.b,"Test connection succeeded; using streaming connection"),J(11),Sd(this.a,this,!0))):(J(7),this.h=!1))},g.ua=function(){this.f=this.c.C,this.c.c?0==this.R?(this.R=1,I(this.b,"TestConnection: request complete for initial check"),Rd(this)):1==this.R&&(I(this.b,"TestConnection: request complete for stage 2"),this.h?(I(this.b,"Test connection succeeded; using streaming connection"),J(11),Sd(this.a,this,!0)):(I(this.b,"Test connection failed; not using streaming"),J(10),Sd(this.a,this,!1))):(I(this.b,"TestConnection: request failed, in state "+this.R),0==this.R?J(8):1==this.R&&J(9),Ud(this.a,this))},g.ia=function(){return this.a.ia()},g.ra=function(){return this.a.ra()},S.prototype.s=function(){return this.a.s()},S.prototype.add=function(t){this.a.set(Wd(t),t)},S.prototype.contains=function(t){return t=Wd(t),O(this.a.b,t)},S.prototype.v=function(){return this.a.v()};var Zd=10;function $d(t,e){t.a||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(t.f=t.g,t.a=new S,t.b&&(ae(t,t.b),t.b=null))}function be(t){return!!t.b||!!t.a&&t.a.s()>=t.f}function ce(t,e){return t.b?t.b==e:!!t.a&&t.a.contains(e)}function ae(t,e){t.a?t.a.add(e):t.b=e}function de(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.contains(e)&&kd(t.a.a,Wd(e))}function ee(t){if(null!=t.b)return t.c.concat(t.b.u);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return ta(t.a.v(),function(t){e=e.concat(t.u)}),e}return ya(t.c)}function fe(t,e){t.c=t.c.concat(e)}function ge(){}function he(){this.a=new ge}function ie(t,e,n){var r=n||"";try{hd(t,function(t,n){var i=t;p(t)&&(i=Db(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function je(t,e){var n=new qc;I(n,"TestLoadImage: loading "+t);var r=new Image;r.onload=ia(ke,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ia(ke,n,r,"TestLoadImage: error",!1,e),r.onabort=ia(ke,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ia(ke,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}function ke(t,e,n,r,i){try{I(t,n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(e){wc(t,e)}}function T(t){B.call(this),this.headers=new N,this.F=t||null,this.f=!1,this.D=this.a=null,this.M=this.u="",this.j=0,this.g="",this.h=this.J=this.o=this.I=!1,this.l=0,this.B=null,this.N=le,this.C=this.m=!1}Yd.prototype.cancel=function(){this.c=ee(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(ta(this.a.v(),function(t){t.cancel()}),jd(this.a.a))},ge.prototype.stringify=function(t){return k.JSON.stringify(t,void 0)},ge.prototype.parse=function(t){return k.JSON.parse(t,void 0)},u(T,B);var le="";T.prototype.b=oc("goog.net.XhrIo");var me=/^https?$/i,ne=["POST","PUT"];function qe(t){return z&&Ta(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function va(t){return"content-type"==t.toLowerCase()}function oe(t,e){t.f=!1,t.a&&(t.h=!0,t.a.abort(),t.h=!1),t.g=e,t.j=5,re(t),se(t)}function re(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function te(t){if(t.f&&"undefined"!=typeof goog)if(t.D[1]&&4==M(t)&&2==t.W())F(t.b,U(t,"Local request error detected and ignored"));else if(t.o&&4==M(t))Zb(t.La,0,t);else if(t.dispatchEvent("readystatechange"),4==M(t)){F(t.b,U(t,"Request complete")),t.f=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.u).match(ld)[1]||null;if(!o&&k.self&&k.self.location){var s=k.self.location.protocol;o=s.substr(0,s.length-1)}i=!me.test(o?o.toLowerCase():"")}e=i}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.j=6,t.g=t.Ga()+" ["+t.W()+"]",re(t))}finally{se(t)}}}function se(t,e){if(t.a){pe(t);var n=t.a,r=t.D[0]?aa:null;t.a=null,t.D=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(gc,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function pe(t){t.a&&t.C&&(t.a.ontimeout=null),t.B&&(k.clearTimeout(t.B),t.B=null)}function M(t){return t.a?t.a.readyState:0}function U(t,e){return e+" ["+t.M+" "+t.u+" "+t.W()+"]"}function ue(t){var e="";return Ba(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function ve(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=ue(n),l(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Q(t,e,n),t}function we(t){this.ya=0,this.g=[],this.a=new qc,this.I=new Vd,this.ja=this.wa=this.F=this.ka=this.b=this.K=this.j=this.U=this.h=this.M=this.i=null,this.Ua=this.P=0,this.la=this.B=this.o=this.m=this.l=this.f=null,this.u=this.xa=this.N=-1,this.T=this.w=this.C=0,this.S=t&&t.supportsCrossDomainXhr||!1,this.J="",this.c=new Yd(t&&t.concurrentRequestLimit),this.ma=new he,this.D=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,this.Ta=t&&t.fastHandshake||!1,t&&t.Ea&&this.a.Ea()}function xe(e){if(I(e.a,"disconnect()"),ye(e),3==e.G){var n=e.P++,r=L(e.F);Q(r,"SID",e.J),Q(r,"RID",n),Q(r,"TYPE","terminate"),ze(e,r),(n=new K(e,e.a,n,void 0)).K=2,n.h=Tc(L(r)),r=!1,k.navigator&&k.navigator.sendBeacon&&(r=k.navigator.sendBeacon(n.h.toString(),"")),!r&&k.Image&&((new Image).src=n.h,r=!0),r||(n.a=n.i.da(null),n.a.fa(n.h)),n.D=t(),Wc(n)}Ae(e)}function ye(t){t.B&&(t.B.abort(),t.B=null),t.b&&(t.b.cancel(),t.b=null),t.m&&(k.clearTimeout(t.m),t.m=null),Be(t),t.c.cancel(),t.l&&(k.clearTimeout(t.l),t.l=null)}function Ce(t,e){1e3==t.g.length&&xc(t.a,function(){return"Already have 1000 queued maps upon queueing "+Db(e)}),t.g.push(new Xd(t.Ua++,e)),3==t.G&&De(t)}function De(t){be(t.c)||t.l||(t.l=Ec(r(t.Oa,t),0),t.C=0)}function Ee(t,e){var n=t.c;return(n.b?1:n.a?n.a.s():0)>=t.c.f-(t.l?1:0)?(xc(t.a,"Unexpected retry request is scheduled."),!1):t.l?(I(t.a,"Use the retry request that is already scheduled."),t.g=e.u.concat(t.g),!0):!(1==t.G||2==t.G||2<=t.C||(I(t.a,"Going to retry POST"),t.l=Ec(r(t.Oa,t,e),Fe(t,t.C)),t.C++,0))}function He(t,e){var n;n=e?e.f:t.P++;var r=L(t.F);Q(r,"SID",t.J),Q(r,"RID",n),Q(r,"AID",t.N),ze(t,r),t.h&&t.i&&ve(r,t.h,t.i),n=new K(t,t.a,n,t.C+1),null===t.h&&(n.j=t.i),e&&(t.g=e.u.concat(t.g)),e=Ge(t,n),n.setTimeout(1e4+Math.round(1e4*Math.random())),ae(t.c,n),Sc(n,r,e)}function ze(t,e){t.f&&hd({},function(t,n){Q(e,n,t)})}function Ge(t,e){var n=Math.min(t.g.length,1e3),i=t.f?r(t.f.Va,t.f,t):null;t:for(var o=t.g,s=-1;;){var a=["count="+n];-1==s?0<n?a.push("ofs="+(s=o[0].a)):s=0:a.push("ofs="+s);for(var u=!0,l=0;l<n;l++){var c=o[l].a,h=o[l].b;if(0>(c-=s))s=Math.max(0,o[l].a-100),u=!1;else try{ie(h,a,"req"+c+"_")}catch(t){i&&i(h)}}if(u){i=a.join("&");break t}}return t=t.g.splice(0,n),e.u=t,i}function Ie(t){if(!t.b&&!t.m){t.T=1;var e=t.Na;Tb||Ub(),Wb||(Tb(),Wb=!0),Pb.add(e,t),t.w=0}}function Je(t){return t.b||t.m?(xc(t.a,"Request already in progress"),!1):!(3<=t.w||(I(t.a,"Going to retry GET"),t.T++,t.m=Ec(r(t.Na,t),Fe(t,t.w)),t.w++,0))}function Sd(t,e,n){I(t.a,"Test Connection Finished");var r=e.m;r&&$d(t.c,r),t.la=n,t.u=e.f,I(t.a,"connectChannel_()"),t.F=Ke(t,t.ka),De(t)}function Ud(t,e){I(t.a,"Test Connection Failed"),t.u=e.f,V(t,2)}function Be(t){null!=t.o&&(k.clearTimeout(t.o),t.o=null)}function Fe(t,e){var n=5e3+Math.floor(1e4*Math.random());return t.ra()||(I(t.a,"Inactive channel"),n*=2),n*e}function V(t,e){if(H(t.a,"Error code "+e),2==e){var n=null;t.f&&(n=null);var i=r(t.jb,t);n||(n=new P("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||nd(n,"https"),Tc(n)),je(n.toString(),i)}else J(2);I(t.a,"HttpChannel: error - "+e),t.G=0,t.f&&t.f.Ba(e),Ae(t),ye(t)}function Ae(t){if(t.G=0,t.u=-1,t.f){var e=ee(t.c);0==e.length&&0==t.g.length||(I(t.a,function(){return"Number of undelivered maps, pending: "+e.length+", outgoing: "+t.g.length}),t.c.c.length=0,ya(t.g),t.g.length=0),t.f.Aa()}}function Ke(t,e){return e=Le(t,null,e),I(t.a,"GetForwardChannelUri: "+e),e}function Td(t,e,n){return e=Le(t,t.ia()?e:null,n),I(t.a,"GetBackChannelUri: "+e),e}function Le(t,e,n){var r=Cd(n);if(""!=r.b)e&&od(r,e+"."+r.b),pd(r,r.i);else{var i=k.location;r=Dd(i.protocol,e?e+"."+i.hostname:i.hostname,i.port,n)}return t.U&&Ba(t.U,function(t,e){Q(r,e,t)}),n=t.K,(e=t.j)&&n&&Q(r,e,n),Q(r,"VER",t.oa),ze(t,r),r}function Me(){}function Ne(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}function Oe(){if(z&&!(10<=Number(Ua)))throw Error("Environmental error: no available transport.")}function W(t,e){B.call(this),this.a=new we(e),this.b=t,this.m=e&&e.testUrl?e.testUrl:Ne(this.b,"test"),this.f=oc("goog.labs.net.webChannel.WebChannelBaseTransport"),this.g=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),this.a.M=t,(t=e&&e.httpHeadersOverwriteParam)&&!/^[\s\xa0]*$/.test(t)&&(this.a.h=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.j=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!/^[\s\xa0]*$/.test(e)&&(this.a.j=e,null!==(t=this.g)&&e in t&&(e in(t=this.g)&&delete t[e],E(this.f,"Ignore httpSessionIdParam also specified with messageUrlParams: "+e))),this.h=new Pe(this)}function Qe(t){Od.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Re(){Pd.call(this),this.status=1}function Pe(t){this.a=t}g=T.prototype,g.fa=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.u+"; newUri="+t);e=e?e.toUpperCase():"GET",this.u=t,this.g="",this.j=0,this.M=e,this.I=!1,this.f=!0,this.a=Mc(this.F?this.F:Kc),this.D=Ic(this.F?this.F:Kc),this.a.onreadystatechange=r(this.La,this);try{F(this.b,U(this,"Opening Xhr")),this.J=!0,this.a.open(e,String(t),!0),this.J=!1}catch(t){return F(this.b,U(this,"Error opening Xhr: "+t.message)),void oe(this,t)}t=n||"";var o=new N(this.headers);i&&hd(i,function(t,e){o.set(e,t)}),i=ua(o.O()),n=k.FormData&&t instanceof k.FormData,!(0<=sa(ne,e))||i||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.N&&(this.a.responseType=this.N),"withCredentials"in this.a&&this.a.withCredentials!==this.m&&(this.a.withCredentials=this.m);try{pe(this),0<this.l&&(this.C=qe(this.a),F(this.b,U(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+this.C)),this.C?(this.a.timeout=this.l,this.a.ontimeout=r(this.Ia,this)):this.B=Zb(this.Ia,this.l,this)),F(this.b,U(this,"Sending request")),this.o=!0,this.a.send(t),this.o=!1}catch(t){F(this.b,U(this,"Send error: "+t.message)),oe(this,t)}},g.Ia=function(){"undefined"!=typeof goog&&this.a&&(this.g="Timed out after "+this.l+"ms, aborting",this.j=8,F(this.b,U(this,this.g)),this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(t){this.a&&this.f&&(F(this.b,U(this,"Aborting")),this.f=!1,this.h=!0,this.a.abort(),this.h=!1,this.j=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),se(this))},g.A=function(){this.a&&(this.f&&(this.f=!1,this.h=!0,this.a.abort(),this.h=!1),se(this,!0)),T.H.A.call(this)},g.La=function(){this.i||(this.J||this.o||this.h?te(this):this.cb())},g.cb=function(){te(this)},g.W=function(){try{return 2<M(this)?this.a.status:-1}catch(t){return-1}},g.Ga=function(){try{return 2<M(this)?this.a.statusText:""}catch(t){return F(this.b,"Can not get status: "+t.message),""}},g.V=function(){try{return this.a?this.a.responseText:""}catch(t){return F(this.b,"Can not get responseText: "+t.message),""}},g.Ya=function(t){if(this.a){var e=this.a.responseText;t&&0==e.indexOf(t)&&(e=e.substring(t.length));t:{if(t=e,k.JSON)try{var n=k.JSON.parse(t);break t}catch(t){}n=Cb(t)}return n}},g.Fa=function(){return this.j},g.ab=function(){return l(this.g)?this.g:String(this.g)},g=we.prototype,g.oa=8,g.G=1,g.Ja=function(){return 0==this.G},g.Oa=function(t){if(this.l=null,I(this.a,"startForwardChannel_"),1==this.G)if(t)xc(this.a,"Not supposed to retry the open");else{I(this.a,"open_()"),this.P=Math.floor(1e5*Math.random()),t=this.P++;var e=new K(this,this.a,t,void 0),n=this.i;this.M&&(n?Ga(n=Ea(n),this.M):n=this.M),null===this.h&&(e.j=n);var r=Ge(this,e),i=L(this.F);Q(i,"RID",t),Q(i,"CVER",21),this.D&&this.j&&Q(i,"X-HTTP-Session-Id",this.j),ze(this,i),this.h&&n&&ve(i,this.h,n),ae(this.c,e),this.Ta?(Q(i,"$req",r),Sc(e,i,null)):Sc(e,i,r),this.G=2}else 3==this.G&&(t?He(this,t):0==this.g.length?I(this.a,"startForwardChannel_ returned: nothing to send"):be(this.c)?xc(this.a,"startForwardChannel_ returned: connection already in progress"):(He(this),I(this.a,"startForwardChannel_ finished, sent request")))},g.Na=function(){this.m=null,I(this.a,"Creating new HttpRequest"),this.b=new K(this,this.a,"rpc",this.T),null===this.h&&(this.b.j=this.i),this.b.P=0;var t=L(this.wa);Q(t,"RID","rpc"),Q(t,"SID",this.J),Q(t,"CI",this.la?"0":"1"),Q(t,"AID",this.N),ze(this,t),Q(t,"TYPE","xmlhttp"),this.h&&this.i&&ve(t,this.h,this.i),Vc(this.b,t,!0,this.ja),I(this.a,"New Request created")},g.Ma=function(t,e){if(0!=this.G&&(this.b==t||ce(this.c,t)))if(this.u=t.C,ce(this.c,t)&&3==this.G){try{var i=this.ma.a.parse(e)}catch(t){i=null}if(n(i)&&3==i.length)if(0==(e=i)[0])t:if(I(this.a,"Server claims our backchannel is missing."),this.m)I(this.a,"But we are currently starting the request.");else{if(this.b){if(!(this.b.D+3e3<t.D))break t;Be(this),this.b.cancel(),this.b=null}else E(this.a.a,"We do not have a BackChannel established");Je(this),J(18)}else this.xa=e[1],0<(t=this.xa-this.N)&&(I(this.a,(e=e[2])+" bytes (in "+t+" arrays) are outstanding on the BackChannel"),37500>e&&this.la&&0==this.w&&!this.o&&(this.o=Ec(r(this.bb,this),6e3)));else I(this.a,"Bad POST response data returned"),V(this,11)}else if(this.b==t&&Be(this),!/^[\s\xa0]*$/.test(e))for(e=i=this.ma.a.parse(e),i=0;i<e.length;i++){var o=e[i];if(this.N=o[0],o=o[1],2==this.G)if("c"==o[0]){this.J=o[1],this.ja=o[2];var s=o[3];null!=s&&(this.oa=s,H(this.a,"VER="+this.oa)),null!=(o=o[4])&&(this.ya=o,H(this.a,"SVER="+this.ya)),this.D&&(o=t.a)&&((s=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)&&$d(this.c,s),this.j&&((o=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)?(this.K=o,Q(this.F,this.j,o)):E(this.a.a,"Missing X_HTTP_SESSION_ID in the handshake response"))),this.G=3,this.f&&this.f.Da(),this.wa=Td(this,this.ja,this.ka),Ie(this)}else"stop"!=o[0]&&"close"!=o[0]||V(this,7);else 3==this.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?V(this,7):xe(this):"noop"!=o[0]&&this.f&&this.f.Ca(o),this.w=0)}},g.bb=function(){null!=this.o&&(this.o=null,this.b.cancel(),this.b=null,Je(this),J(19))},g.ua=function(e){I(this.a,"Request complete");var n=null;if(this.b==e){Be(this),this.b=null;var r=2}else{if(!ce(this.c,e))return;n=e.u,de(this.c,e),r=1}if(this.u=e.C,0!=this.G)if(e.c)1==r?(Dc(e.m?e.m.length:0,t()-e.D,this.C),De(this)):Ie(this);else{var i=e.l;if(3==i||0==i&&0<this.u)I(this.a,"Not retrying due to error type");else{var o=this;if(I(this.a,function(){return"Maybe retrying, last error: "+Pc(i,o.u)}),1==r&&Ee(this,e)||2==r&&Je(this))return;I(this.a,"Exceeded max number of retries")}switch(n&&0<n.length&&fe(this.c,n),I(this.a,"Error: HTTP request failed"),i){case 1:V(this,5);break;case 4:V(this,10);break;case 3:V(this,6);break;default:V(this,2)}}},g.jb=function(t){t?(H(this.a,"Successfully pinged google.com"),J(2)):(H(this.a,"Failed to ping google.com"),J(1))},g.da=function(t){if(t&&!this.S)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new T).m=this.S,t},g.ra=function(){return!!this.f&&!0},g.ia=function(){return this.S},new Ld,g=Me.prototype,g.Da=function(){},g.Ca=function(){},g.Ba=function(){},g.Aa=function(){},g.Va=function(){},Oe.prototype.a=function(t,e){return new W(t,e)},u(W,B),g=W.prototype,g.addEventListener=function(t,e,n,r){W.H.addEventListener.call(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){W.H.removeEventListener.call(this,t,e,n,r)},g.Za=function(){this.a.f=this.h,this.l&&(this.a.S=!0);var t=this.a,e=this.m,n=this.b,r=this.g||void 0;I(t.a,"connect()"),J(0),t.ka=n,t.U=r||{},t.D&&(I(t.a,"connect() bypassed channel-test."),t.I.b=[],t.I.a=!1),I(t.a,"connectTest_()"),t.B=new Qd(t,t.a),null===t.h&&(t.B.i=t.i),n=e,t.h&&t.i&&(n=ve(e,t.h,t.i)),(t=t.B).l=n,e=Ke(t.a,t.l),J(3),null!=(n=t.a.I.b)?(t.g=n[0],t.R=1,Rd(t)):(Xc(e,"MODE","init"),!t.a.D&&t.a.j&&Xc(e,"X-HTTP-Session-Id",t.a.j),t.c=new K(t,t.b,void 0,void 0),t.c.j=t.i,Vc(t.c,e,!1,null),t.R=0)},g.close=function(){xe(this.a)},g.$a=function(t){if(l(t)){var e={};e.__data__=t,Ce(this.a,e)}else this.j?((e={}).__data__=Db(t),Ce(this.a,e)):Ce(this.a,t)},g.A=function(){this.a.f=null,delete this.h,xe(this.a),delete this.a,W.H.A.call(this)},u(Qe,Od),u(Re,Pd),u(Pe,Me),Pe.prototype.Da=function(){pc(this.a.f,"WebChannel opened on "+this.a.b),this.a.dispatchEvent("a")},Pe.prototype.Ca=function(t){this.a.dispatchEvent(new Qe(t))},Pe.prototype.Ba=function(t){pc(this.a.f,"WebChannel aborted on "+this.a.b+" due to channel error: "+t),this.a.dispatchEvent(new Re(t))},Pe.prototype.Aa=function(){pc(this.a.f,"WebChannel closed on "+this.a.b),this.a.dispatchEvent("b")};var Se=ia(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},Oe);function Te(){this.b=[],this.a=[]}function Ue(t){return 0==t.b.length&&(t.b=t.a,t.b.reverse(),t.a=[]),t.b.pop()}function Ve(t,e){if(w.call(this),this.h=t||0,this.c=e||10,this.h>this.c)throw Error(We);this.a=new Te,this.b=new S,this.g=null,this.ba()}Te.prototype.s=function(){return this.b.length+this.a.length},Te.prototype.contains=function(t){return 0<=sa(this.b,t)||0<=sa(this.a,t)},Te.prototype.v=function(){for(var t=[],e=this.b.length-1;0<=e;--e)t.push(this.b[e]);var n=this.a.length;for(e=0;e<n;++e)t.push(this.a[e]);return t},u(Ve,w);var We="[goog.structs.Pool] Min can not be greater than max";function Xe(t){if("function"==typeof t.Z)t.Z();else for(var e in t)t[e]=null}function Ye(t,e){this.a=t,this.b=e}function Ze(t){if(this.a=[],t)t:{if(t instanceof Ze){var e=t.O();if(t=t.v(),0>=this.s()){for(var n=this.a,r=0;r<e.length;r++)n.push(new Ye(e[r],t[r]));break t}}else e=Da(t),t=Ca(t);for(r=0;r<e.length;r++)$e(this,e[r],t[r])}}function $e(t,e,n){var r=t.a;for(r.push(new Ye(e,n)),n=(t=t.a)[e=r.length-1];0<e&&t[r=e-1>>1].a>n.a;)t[e]=t[r],e=r;t[e]=n}function af(){Ze.call(this)}function X(t,e){this.f=new af,Ve.call(this,t,e)}function Y(t,e,n,r){this.l=t,this.j=!!r,X.call(this,e,n)}g=Ve.prototype,g.ea=function(){var e=t();if(!(null!=this.g&&0>e-this.g)){for(var n;0<this.a.s()&&(n=Ue(this.a),!this.ta(n));)this.ba();return!n&&this.s()<this.c&&(n=this.qa()),n&&(this.g=e,this.b.add(n)),n}},g.ib=function(t){return!!kd(this.b.a,Wd(t))&&(this.na(t),!0)},g.na=function(t){kd(this.b.a,Wd(t)),this.ta(t)&&this.s()<this.c?this.a.a.push(t):Xe(t)},g.ba=function(){for(var t=this.a;this.s()<this.h;){var e=this.qa();t.a.push(e)}for(;this.s()>this.c&&0<this.a.s();)Xe(Ue(t))},g.qa=function(){return{}},g.ta=function(t){return"function"!=typeof t.Wa||t.Wa()},g.contains=function(t){return this.a.contains(t)||this.b.contains(t)},g.s=function(){return this.a.s()+this.b.s()},g.A=function(){if(Ve.H.A.call(this),0<this.b.s())throw Error("[goog.structs.Pool] Objects not released");delete this.b;for(var t=this.a;0!=t.b.length||0!=t.a.length;)Xe(Ue(t));delete this.a},Ze.prototype.v=function(){for(var t=this.a,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].b);return e},Ze.prototype.O=function(){for(var t=this.a,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].a);return e},Ze.prototype.s=function(){return this.a.length},u(af,Ze),u(X,Ve),g=X.prototype,g.ea=function(t,e){if(!t)return X.H.ea.call(this);$e(this.f,void 0!==e?e:100,t),this.sa()},g.sa=function(){for(var t=this.f;0<t.s();){var e=this.ea();if(!e)break;var n=t,r=n.a,i=r.length,o=r[0];if(0>=i)o=void 0;else{if(1==i)wa(r);else{r[0]=r.pop(),i=(n=n.a).length;for(var s=n[r=0];r<i>>1;){var a=2*r+1,u=2*r+2;if(n[a=u<i&&n[u].a<n[a].a?u:a].a>s.a)break;n[r]=n[a],r=a}n[r]=s}o=o.b}o.apply(this,[e])}},g.na=function(t){X.H.na.call(this,t),this.sa()},g.ba=function(){X.H.ba.call(this),this.sa()},g.A=function(){X.H.A.call(this),k.clearTimeout(void 0),wa(this.f.a),this.f=null},u(Y,X),Y.prototype.qa=function(){var t=new T,e=this.l;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.j&&(t.m=!0),t},Y.prototype.ta=function(t){return!t.i&&!t.a},Oe.prototype.createWebChannel=Oe.prototype.a,W.prototype.send=W.prototype.$a,W.prototype.open=W.prototype.Za,W.prototype.close=W.prototype.close,Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,Gc.COMPLETE="complete",Md.EventType=Nd,Nd.OPEN="a",Nd.CLOSE="b",Nd.ERROR="c",Nd.MESSAGE="d",B.prototype.listen=B.prototype.aa,Y.prototype.getObject=Y.prototype.ea,Y.prototype.releaseObject=Y.prototype.ib,T.prototype.listenOnce=T.prototype.Ha,T.prototype.getLastError=T.prototype.ab,T.prototype.getLastErrorCode=T.prototype.Fa,T.prototype.getStatus=T.prototype.W,T.prototype.getStatusText=T.prototype.Ga,T.prototype.getResponseJson=T.prototype.Ya,T.prototype.getResponseText=T.prototype.V,T.prototype.getResponseText=T.prototype.V,T.prototype.send=T.prototype.fa,module.exports={createWebChannelTransport:Se,ErrorCode:Fc,EventType:Gc,WebChannel:Md,XhrIoPool:Y}}).call("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(exports,__webpack_require__("fRUx"))},"PK/U":function(t,e,n){"use strict";e.a=function(t){return t}},TL6u:function(t,e,n){(function(t){(function(){var t,e=n("XtH8").default,r=r||{},i=this;function o(t){return"string"==typeof t}function s(t){return"boolean"==typeof t}function a(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function l(t){return null===t}function c(t){return"array"==u(t)}function h(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==u(t)}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function w(t,e){function n(){}n.prototype=e.prototype,t.ib=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Rc=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function E(t){if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function C(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}w(E,Error),E.prototype.name="CustomError";var S=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function T(t){return x.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(I,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(A,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(k,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(N,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(O,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(R,"&#0;")),t):t}var I=/&/g,A=/</g,k=/>/g,N=/"/g,O=/'/g,R=/\x00/g,x=/[\x00&<>"']/;function D(t,e){return-1!=t.indexOf(e)}function P(t,e){return t<e?-1:t>e?1:0}function M(t,e){e.unshift(t),E.call(this,C.apply(null,e)),e.shift()}function L(t,e){throw new M("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}w(M,E),M.prototype.name="AssertionError";var V,U=Array.prototype.indexOf?function(t,e,n){return Array.prototype.indexOf.call(t,e,n)}:function(t,e,n){if(n=null==n?0:0>n?Math.max(0,t.length+n):n,o(t))return o(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},F=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)},j=Array.prototype.map?function(t,e,n){return Array.prototype.map.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=Array(r),s=o(t)?t.split(""):t,a=0;a<r;a++)a in s&&(i[a]=e.call(n,s[a],a,t));return i},B=Array.prototype.some?function(t,e,n){return Array.prototype.some.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,s=0;s<r;s++)if(s in i&&e.call(n,i[s],s,t))return!0;return!1};function q(t,e){return 0<=U(t,e)}function H(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(t,e){!function(t,e){var n=t.length,r=o(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function K(t){return Array.prototype.concat.apply([],arguments)}function W(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}t:{var z=i.navigator;if(z){var Q=z.userAgent;if(Q){V=Q;break t}}V=""}function $(t){return D(V,t)}function X(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function J(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function Y(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function Z(t){for(var e in t)return!1;return!0}function tt(t,e){for(var n in t)if(!(n in e)||t[n]!==e[n])return!1;for(n in e)if(!(n in t))return!1;return!0}function et(t){var e,n={};for(e in t)n[e]=t[e];return n}var nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<nt.length;o++)n=nt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function it(t){return it[" "](t),t}it[" "]=a;var ot,st,at=$("Opera"),ut=$("Trident")||$("MSIE"),lt=$("Edge"),ct=lt||ut,ht=$("Gecko")&&!(D(V.toLowerCase(),"webkit")&&!$("Edge"))&&!($("Trident")||$("MSIE"))&&!$("Edge"),dt=D(V.toLowerCase(),"webkit")&&!$("Edge");function ft(){var t=i.document;return t?t.documentMode:void 0}t:{var pt="",mt=(st=V,ht?/rv\:([^\);]+)(\)|;)/.exec(st):lt?/Edge\/([\d\.]+)/.exec(st):ut?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(st):dt?/WebKit\/(\S+)/.exec(st):at?/(?:Version)[ \/]?(\S+)/.exec(st):void 0);if(mt&&(pt=mt?mt[1]:""),ut){var gt=ft();if(null!=gt&&gt>parseFloat(pt)){ot=String(gt);break t}}ot=pt}var yt,vt={};function bt(t){return function(t,e){var n=vt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=S(String(ot)).split("."),r=S(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=P(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||P(0==s[2].length,0==a[2].length)||P(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var _t=i.document;function wt(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function Et(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function Ct(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function St(t,e){t.g(e),t.b<t.f&&(t.b++,e.next=t.a,t.a=e)}yt=_t&&ut?ft()||("CSS1Compat"==_t.compatMode?parseInt(ot,10):5):void 0,Ct.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Tt,It,At=new Ct(function(){return new Nt},function(t){t.reset()},100);function kt(){var t=Dt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Nt(){this.next=this.b=this.a=null}function Ot(t){i.setTimeout(function(){throw t},0)}function Rt(t,e){It||function(){if(-1!=String(i.Promise).indexOf("[native code]")){var t=i.Promise.resolve(void 0);It=function(){t.then(Pt)}}else It=function(){var t=Pt;!d(i.setImmediate)||i.Window&&i.Window.prototype&&!$("Edge")&&i.Window.prototype.setImmediate==i.setImmediate?(Tt||(Tt=function(){var t=i.MessageChannel;if("undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!$("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=v(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!=typeof t&&!$("Trident")&&!$("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).pb;n.pb=null,t()}},function(t){r.next={pb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){i.setTimeout(t,0)}}()),Tt(t)):i.setImmediate(t)}}(),xt||(It(),xt=!0);var n=Dt,r=At.get();r.set(t,e),n.b?n.b.next=r:n.a=r,n.b=r}Nt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Nt.prototype.reset=function(){this.next=this.b=this.a=null};var xt=!1,Dt=new function(){this.b=this.a=null};function Pt(){for(var t;t=kt();){try{t.a.call(t.b)}catch(t){Ot(t)}St(At,t)}xt=!1}function Mt(t,e){if(this.a=Lt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Qt(n,Vt,t)},function(t){if(!(t instanceof ee))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Qt(n,Ut,t)})}catch(t){Qt(this,Ut,t)}}var Lt=0,Vt=2,Ut=3;function Ft(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ft.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var jt=new Ct(function(){return new Ft},function(t){t.reset()},100);function Bt(t,e,n){var r=jt.get();return r.g=t,r.b=e,r.f=n,r}function qt(t){if(t instanceof Mt)return t;var e=new Mt(a);return Qt(e,Vt,t),e}function Ht(t){return new Mt(function(e,n){n(t)})}function Gt(t,e,n){$t(t,e,n,null)||Rt(b(e,t))}function Kt(t,e){return(e=Bt(e,e,void 0)).c=!0,Wt(t,e),t}function Wt(t,e){t.b||t.a!=Vt&&t.a!=Ut||Xt(t),t.f?t.f.next=e:t.b=e,t.f=e}function zt(t,e,n,r){var i=Bt(null,null,null);return i.a=new Mt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ee?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,Wt(t,i),i.a}function Qt(t,e,n){t.a==Lt&&(t===n&&(e=Ut,n=new TypeError("Promise cannot resolve to itself")),t.a=1,$t(n,t.Ac,t.Bc,t)||(t.i=n,t.a=e,t.c=null,Xt(t),e!=Ut||n instanceof ee||function(t,e){t.g=!0,Rt(function(){t.g&&te.call(null,e)})}(t,n)))}function $t(t,e,n,r){if(t instanceof Mt)return Wt(t,Bt(e||a,n||null,r)),!0;if(Et(t))return t.then(e,n,r),!0;if(f(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Xt(t){t.h||(t.h=!0,Rt(t.Qb,t))}function Jt(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Yt(t,e,n,r){if(n==Ut&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Zt(e,n,r);else try{e.c?e.g.call(e.f):Zt(e,n,r)}catch(t){te.call(null,t)}St(jt,e)}function Zt(t,e,n){e==Vt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Mt.prototype.then=function(t,e,n){return zt(this,d(t)?t:null,d(e)?e:null,n)},wt(Mt),(t=Mt.prototype).s=function(t,e){return zt(this,null,t,e)},t.cancel=function(t){this.a==Lt&&Rt(function(){!function t(e,n){if(e.a==Lt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==Lt&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Jt(r),Yt(r,o,Ut,n)))}e.c=null}else Qt(e,Ut,n)}(this,new ee(t))},this)},t.Ac=function(t){this.a=Lt,Qt(this,Vt,t)},t.Bc=function(t){this.a=Lt,Qt(this,Ut,t)},t.Qb=function(){for(var t;t=Jt(this);)Yt(this,t,this.a,this.i);this.h=!1};var te=Ot;function ee(t){E.call(this,t)}w(ee,E),ee.prototype.name="cancel";var ne=!ut||9<=Number(yt);function re(){this.a="",this.b=oe}function ie(t){return t instanceof re&&t.constructor===re&&t.b===oe?t.a:(L("expected object of type Const, got '"+t+"'"),"type_error:Const")}re.prototype.la=!0,re.prototype.ja=function(){return this.a},re.prototype.toString=function(){return"Const{"+this.a+"}"};var oe={};function se(t){var e=new re;return e.a=t,e}function ae(){this.a="",this.b=de}function ue(t){return t instanceof ae&&t.constructor===ae&&t.b===de?t.a:(L("expected object of type TrustedResourceUrl, got '"+t+"' of type "+u(t)),"type_error:TrustedResourceUrl")}function le(t,e){return t=function(t,e){var n=ie(t);if(!he.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return n.replace(ce,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof re?ie(t):encodeURIComponent(String(t))})}(t,e),(e=new ae).a=t,e}se(""),ae.prototype.la=!0,ae.prototype.ja=function(){return this.a},ae.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var ce=/%{(\w+)}/g,he=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,de={};function fe(){this.a="",this.b=ye}function pe(t){return t instanceof fe&&t.constructor===fe&&t.b===ye?t.a:(L("expected object of type SafeUrl, got '"+t+"' of type "+u(t)),"type_error:SafeUrl")}fe.prototype.la=!0,fe.prototype.ja=function(){return this.a},fe.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var me=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function ge(t){return t instanceof fe?t:(t=t.la?t.ja():String(t),me.test(t)||(t="about:invalid#zClosurez"),ve(t))}var ye={};function ve(t){var e=new fe;return e.a=t,e}function be(){this.a="",this.b=_e}ve("about:blank"),be.prototype.la=!0,be.prototype.ja=function(){return this.a},be.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var _e={};function we(t){var e=new be;return e.a=t,e}function Ee(t){var e=document;return o(t)?e.getElementById(t):t}function Ce(t,e){X(e,function(e,n){e&&e.la&&(e=e.ja()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Se.hasOwnProperty(n)?t.setAttribute(Se[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}we("<!DOCTYPE html>"),we(""),we("<br>");var Se={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Te(t){if(t&&"number"==typeof t.length){if(f(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function Ie(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(c(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Ne(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Ne(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},t,e),e.join("")}var Ae={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ke=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function Ne(t,e){e.push('"',t.replace(ke,function(t){var e=Ae[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Ae[t]=e),e}),'"')}function Oe(){0!=Re&&(xe[this[p]||(this[p]=++m)]=this),this.oa=this.oa,this.Fa=this.Fa}var Re=0,xe={};function De(t){t.oa||(t.oa=!0,t.ta(),0!=Re&&(t=t[p]||(t[p]=++m),delete xe[t]))}Oe.prototype.oa=!1,Oe.prototype.ta=function(){if(this.Fa)for(;this.Fa.length;)this.Fa.shift()()};var Pe=Object.freeze||function(t){return t},Me=!ut||9<=Number(yt),Le=ut&&!bt("9"),Ve=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return i.addEventListener("test",a,e),i.removeEventListener("test",a,e),t}();function Ue(t,e){this.type=t,this.b=this.target=e,this.Bb=!0}function Fe(t,e){if(Ue.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ht){t:{try{it(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=o(t.pointerType)?t.pointerType:je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.c()}}Ue.prototype.c=function(){this.Bb=!1},w(Fe,Ue);var je=Pe({2:"touch",3:"pen",4:"mouse"});Fe.prototype.c=function(){Fe.ib.c.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Le)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Fe.prototype.g=function(){return this.a};var Be="closure_listenable_"+(1e6*Math.random()|0),qe=0;function He(t){t.ma=!0,t.listener=null,t.a=null,t.src=null,t.La=null}function Ge(t){this.src=t,this.a={},this.b=0}function Ke(t,e,n,r,i,o){var s=e.toString();(e=t.a[s])||(e=t.a[s]=[],t.b++);var a=ze(e,n,i,o);return-1<a?(t=e[a],r||(t.Ha=!1)):((t=new function(t,e,n,r,i){this.listener=t,this.a=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++qe,this.ma=this.Ha=!1}(n,t.src,s,!!i,o)).Ha=r,e.push(t)),t}function We(t,e){var n=e.type;n in t.a&&H(t.a[n],e)&&(He(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function ze(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ma&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}var Qe="closure_lm_"+(1e6*Math.random()|0),$e={};function Xe(t,e,n,r,i){if(r&&r.once)Ye(t,e,n,r,i);else if(c(e))for(var o=0;o<e.length;o++)Xe(t,e[o],n,r,i);else n=un(n),t&&t[Be]?hn(t,e,n,f(r)?!!r.capture:!!r,i):Je(t,e,n,!1,r,i)}function Je(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=f(i)?!!i.capture:!!i,a=sn(t);if(a||(t[Qe]=a=new Ge(t)),!(n=Ke(a,e,n,r,s,o)).a)if(r=function(){var t=on,e=Me?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.a=r,r.src=t,r.listener=n,t.addEventListener)Ve||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else{if(!t.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");t.attachEvent(en(e.toString()),r)}}function Ye(t,e,n,r,i){if(c(e))for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);else n=un(n),t&&t[Be]?dn(t,e,n,f(r)?!!r.capture:!!r,i):Je(t,e,n,!0,r,i)}function Ze(t,e,n,r,i){if(c(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=un(n),t&&t[Be]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=ze(o=t.a[e],n,r,i))&&(He(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=sn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ze(e,n,r,i)),(n=-1<t?e[t]:null)&&tn(n))}function tn(t){if("number"!=typeof t&&t&&!t.ma){var e=t.src;if(e&&e[Be])We(e.u,t);else{var n=t.type,r=t.a;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent&&e.detachEvent(en(n),r),(n=sn(e))?(We(n,t),0==n.b&&(n.src=null,e[Qe]=null)):He(t)}}}function en(t){return t in $e?$e[t]:$e[t]="on"+t}function nn(t,e,n,r){var i=!0;if((t=sn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ma&&(o=rn(o,r),i=i&&!1!==o)}return i}function rn(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&tn(t),n.call(r,e)}function on(t,e){if(t.ma)return!0;if(!Me){if(!e)t:{e=["window","event"];for(var n=i,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Fe(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=e.b;o;o=o.parentNode)r.push(o);for(t=t.type,o=r.length-1;0<=o;o--){e.b=r[o];var s=nn(r[o],t,!0,e);n=n&&s}for(o=0;o<r.length;o++)e.b=r[o],s=nn(r[o],t,!1,e),n=n&&s}return n}return rn(t,new Fe(e,this))}function sn(t){return(t=t[Qe])instanceof Ge?t:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function un(t){return d(t)?t:(t[an]||(t[an]=function(e){return t.handleEvent(e)}),t[an])}function ln(){Oe.call(this),this.u=new Ge(this),this.Ib=this,this.Ra=null}function cn(t,e){var n,r=t.Ra;if(r)for(n=[];r;r=r.Ra)n.push(r);if(t=t.Ib,r=e.type||e,o(e))e=new Ue(e,t);else if(e instanceof Ue)e.target=e.target||t;else{var i=e;rt(e=new Ue(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=e.b=n[s];i=fn(a,r,!0,e)&&i}if(i=fn(a=e.b=t,r,!0,e)&&i,i=fn(a,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=fn(a=e.b=n[s],r,!1,e)&&i}function hn(t,e,n,r,i){Ke(t.u,String(e),n,!1,r,i)}function dn(t,e,n,r,i){Ke(t.u,String(e),n,!0,r,i)}function fn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ma&&s.capture==n){var a=s.listener,u=s.La||s.src;s.Ha&&We(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Bb}function pn(t,e,n){if(d(t))n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function mn(t){var e=null;return new Mt(function(n,r){-1==(e=pn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw i.clearTimeout(e),t})}function gn(t,e,n,r,i){this.reset(t,e,n,r,i)}function yn(t){this.f=t,this.b=this.c=this.a=null}function vn(t,e){this.name=t,this.value=e}w(ln,Oe),ln.prototype[Be]=!0,ln.prototype.removeEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},ln.prototype.ta=function(){if(ln.ib.ta.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)He(n[r]);delete e.a[t],e.b--}}this.Ra=null},gn.prototype.a=null,gn.prototype.reset=function(t,e,n,r,i){r||_(),this.b=e,delete this.a},vn.prototype.toString=function(){return this.name};var bn=new vn("SEVERE",1e3),_n=new vn("CONFIG",700),wn=new vn("FINE",500);yn.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(L("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new gn(t,String(e),this.f),n&&(t.a=n),n="log:"+t.b,(t=i.console)&&t.timeStamp&&t.timeStamp(n),(t=i.msWriteProfilerMark)&&t(n),n=this;n;)n=n.a};var En={},Cn=null;function Sn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t){t instanceof Sn?(n=t.S(),r=t.P()):(n=Y(t),r=J(t));for(var i=0;i<n.length;i++)this.set(n[i],r[i])}}function Tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];In(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)In(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function In(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function An(t,e){t&&t.log(wn,e,void 0)}(t=Sn.prototype).P=function(){Tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.S=function(){return Tn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return In(this.b,t)?this.b[t]:e},t.set=function(t,e){In(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.S(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kn=null,Nn=null;function On(t,e){this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function Rn(t,e,n){t.a=!0,t.c=n,t.f=!e,Mn(t)}function xn(t){if(t.a){if(!t.u)throw new Ln;t.u=!1}}function Dn(t,e,n,r){t.g.push([e,n,r]),t.a&&Mn(t)}function Pn(t){return B(t.g,function(t){return d(t[1])})}function Mn(t){if(t.h&&t.a&&Pn(t)){var e=t.h,n=jn[e];n&&(i.clearTimeout(n.a),delete jn[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var o=t.g.shift(),s=o[0],a=o[1];if(o=o[2],s=t.f?a:s)try{var u=s.call(o||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(Et(e)||"function"==typeof i.Promise&&e instanceof i.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Pn(t)||(n=!0)}}t.c=e,r&&(u=v(t.m,t,!0),r=v(t.m,t,!1),e instanceof On?(Dn(e,u,r),e.w=!0):e.then(u,r)),n&&(e=new Un(e),jn[e.a]=e,t.h=e.a)}function Ln(){E.call(this)}function Vn(){E.call(this)}function Un(t){this.a=i.setTimeout(v(this.c,this),0),this.b=t}On.prototype.cancel=function(t){if(this.a)this.c instanceof On&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new Vn,xn(this),Rn(this,!1,t))}},On.prototype.m=function(t,e){this.i=!1,Rn(this,t,e)},On.prototype.A=function(t){xn(this),Rn(this,!0,t)},On.prototype.then=function(t,e,n){var r,i,o=new Mt(function(t,e){r=t,i=e});return Dn(this,r,function(t){t instanceof Vn?o.cancel():i(t)}),o.then(t,e,n)},wt(On),w(Ln,E),Ln.prototype.message="Deferred has already fired",Ln.prototype.name="AlreadyCalledError",w(Vn,E),Vn.prototype.message="Deferred was canceled",Vn.prototype.name="CanceledError",Un.prototype.c=function(){throw delete jn[this.a],this.b};var Fn,jn={};function Bn(t,e){this.b=-1,this.b=qn,this.f=i.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=i.Int32Array?new Int32Array(64):Array(64),Fn||(Fn=i.Int32Array?new Int32Array($n):$n),this.reset()}w(Bn,function(){this.b=-1});for(var qn=64,Hn=qn-1,Gn=[],Kn=0;Kn<Hn;Kn++)Gn[Kn]=0;var Wn=K(128,Gn);function zn(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],l=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((s=(s=l&c^~l&h)+(0|Fn[e])|0)+(0|n[e])|0)|0,o=h,h=c,c=l,l=u+s|0,u=a,a=i,i=r,r=s+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+l|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Qn(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(o(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(zn(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var s=e[r++];if(!("number"==typeof s&&0<=s&&255>=s&&s==(0|s)))throw Error("message must be a byte array");t.f[i++]=s,i==t.b&&(zn(t),i=0)}}t.c=i,t.g+=n}Bn.prototype.reset=function(){this.g=this.c=0,this.a=i.Int32Array?new Int32Array(this.h):W(this.h)};var $n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Xn(){Bn.call(this,8,Jn)}w(Xn,Bn);var Jn=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Yn(t){if(t.P&&"function"==typeof t.P)return t.P();if(o(t))return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return J(t)}function Zn(t){if(t.S&&"function"==typeof t.S)return t.S();if(!t.P||"function"!=typeof t.P){if(h(t)||o(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}return Y(t)}}var tr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function er(t,e){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof er){this.f=void 0!==e?e:t.f,nr(this,t.c),this.l=t.l,this.b=t.b,rr(this,t.i),this.g=t.g,e=t.a;var n=new vr;n.c=e.c,e.a&&(n.a=new Sn(e.a),n.b=e.b),ir(this,n),this.h=t.h}else t&&(n=String(t).match(tr))?(this.f=!!e,nr(this,n[1]||"",!0),this.l=lr(n[2]||""),this.b=lr(n[3]||"",!0),rr(this,n[4]),this.g=lr(n[5]||"",!0),ir(this,n[6]||"",!0),this.h=lr(n[7]||"")):(this.f=!!e,this.a=new vr(null,0,this.f))}function nr(t,e,n){t.c=n?lr(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function rr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function ir(t,e,n){e instanceof vr?(t.a=e,function(t,e){e&&!t.f&&(br(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Er(this,e),Sr(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=cr(e,gr)),t.a=new vr(e,0,t.f))}function or(t,e,n){t.a.set(e,n)}function sr(t,e){return t.a.get(e)}function ar(t){return t instanceof er?new er(t):new er(t,void 0)}function ur(t,e){var n=new er(null,void 0);return nr(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function lr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function cr(t,e,n){return o(t)?(t=encodeURI(t).replace(e,hr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}er.prototype.toString=function(){var t=[],e=this.c;e&&t.push(cr(e,fr,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(cr(e,fr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(cr(n,"/"==n.charAt(0)?mr:pr,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",cr(n,yr)),t.join("")};var dr,fr=/[#\/\?@]/g,pr=/[\#\?:]/g,mr=/[\#\?]/g,gr=/[\#\?@]/g,yr=/#/g;function vr(t,e,n){this.b=this.a=null,this.c=t||null,this.f=!!n}function br(t){t.a||(t.a=new Sn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){wr(t,decodeURIComponent(e.replace(/\+/g," ")),n)}))}function _r(t){var e=Zn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new vr(null,0,void 0);t=Yn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];c(o)?Sr(n,i,o):wr(n,i,o)}return n}function wr(t,e,n){br(t),t.c=null,e=Tr(t,e);var r=t.a.get(e);r||t.a.set(e,r=[]),r.push(n),t.b+=1}function Er(t,e){br(t),e=Tr(t,e),In(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,In((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Tn(t)))}function Cr(t,e){return br(t),e=Tr(t,e),In(t.a.b,e)}function Sr(t,e,n){Er(t,e),0<n.length&&(t.c=null,t.a.set(Tr(t,e),W(n)),t.b+=n.length)}function Tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ir(){}function Ar(){}function kr(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Nr(t){ln.call(this),this.headers=new Sn,this.w=t||null,this.b=!1,this.v=this.a=null,this.g=this.I=this.i="",this.c=this.G=this.h=this.A=!1,this.f=0,this.m=null,this.l=Or,this.o=this.N=!1}(t=vr.prototype).clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){br(this),this.a.forEach(function(n,r){F(n,function(n){t.call(e,n,r,this)},this)},this)},t.S=function(){br(this);for(var t=this.a.P(),e=this.a.S(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.P=function(t){br(this);var e=[];if(o(t))Cr(this,t)&&(e=K(e,this.a.get(Tr(this,t))));else{t=this.a.P();for(var n=0;n<t.length;n++)e=K(e,t[n])}return e},t.set=function(t,e){return br(this),this.c=null,Cr(this,t=Tr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.P(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.S(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.P(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},Ir.prototype.c=null,w(Ar,Ir),Ar.prototype.a=function(){var t=kr(this);return t?new ActiveXObject(t):new XMLHttpRequest},Ar.prototype.b=function(){var t={};return kr(this)&&(t[0]=!0,t[1]=!0),t},dr=new Ar,w(Nr,ln);var Or="",Rr=Nr.prototype,xr=function t(e){var n;if(Cn||(Cn=new yn(""),En[""]=Cn,Cn.c=_n),!(n=En[e])){n=new yn(e);var r=e.lastIndexOf("."),i=e.substr(r+1);(r=t(e.substr(0,r))).b||(r.b={}),r.b[i]=n,n.a=r,En[e]=n}return n}("goog.net.XhrIo");Rr.J=xr;var Dr=/^https?$/i,Pr=["POST","PUT"];function Mr(t){return"content-type"==t.toLowerCase()}function Lr(t,e){t.b=!1,t.a&&(t.c=!0,t.a.abort(),t.c=!1),t.g=e,Vr(t),Fr(t)}function Vr(t){t.A||(t.A=!0,cn(t,"complete"),cn(t,"error"))}function Ur(t){if(t.b&&"undefined"!=typeof r)if(t.v[1]&&4==Br(t)&&2==qr(t))An(t.J,Hr(t,"Local request error detected and ignored"));else if(t.h&&4==Br(t))pn(t.Ab,0,t);else if(cn(t,"readystatechange"),4==Br(t)){An(t.J,Hr(t,"Request complete")),t.b=!1;try{var e,n=qr(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(e=o)){var s;if(s=0===n){var a=String(t.i).match(tr)[1]||null;if(!a&&i.self&&i.self.location){var u=i.self.location.protocol;a=u.substr(0,u.length-1)}s=!Dr.test(a?a.toLowerCase():"")}e=s}if(e)cn(t,"complete"),cn(t,"success");else{try{var l=2<Br(t)?t.a.statusText:""}catch(e){An(t.J,"Can not get status: "+e.message),l=""}t.g=l+" ["+qr(t)+"]",Vr(t)}}finally{Fr(t)}}}function Fr(t,e){if(t.a){jr(t);var n=t.a,r=t.v[0]?a:null;t.a=null,t.v=null,e||cn(t,"ready");try{n.onreadystatechange=r}catch(e){(t=t.J)&&t.log(bn,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function jr(t){t.a&&t.o&&(t.a.ontimeout=null),"number"==typeof t.m&&(i.clearTimeout(t.m),t.m=null)}function Br(t){return t.a?t.a.readyState:0}function qr(t){try{return 2<Br(t)?t.a.status:-1}catch(t){return-1}}function Hr(t,e){return e+" ["+t.I+" "+t.i+" "+qr(t)+"]"}(t=Nr.prototype).Ea=function(){"undefined"!=typeof r&&this.a&&(this.g="Timed out after "+this.f+"ms, aborting",An(this.J,Hr(this,this.g)),cn(this,"timeout"),this.abort(8))},t.abort=function(){this.a&&this.b&&(An(this.J,Hr(this,"Aborting")),this.b=!1,this.c=!0,this.a.abort(),this.c=!1,cn(this,"complete"),cn(this,"abort"),Fr(this))},t.ta=function(){this.a&&(this.b&&(this.b=!1,this.c=!0,this.a.abort(),this.c=!1),Fr(this,!0)),Nr.ib.ta.call(this)},t.Ab=function(){this.oa||(this.G||this.h||this.c?Ur(this):this.jc())},t.jc=function(){Ur(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.l){case Or:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.J;return t&&t.log(bn,"Response type "+this.l+" is not supported on this browser",void 0),null}catch(t){return An(this.J,"Can not get response: "+t.message),null}};var Gr=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Kr(t){var e={},n=e.document||document,r=ue(t),i=document.createElement("SCRIPT"),o={Cb:i,Ea:void 0},s=new On(Wr,o),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout(function(){zr(i,!0);var t=new Xr($r,"Timeout reached for loading script "+r);xn(s),Rn(s,!1,t)},u),o.Ea=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zr(i,e.Sc||!1,a),s.A(null))},i.onerror=function(){zr(i,!0,a);var t=new Xr(Qr,"Error while loading script "+r);xn(s),Rn(s,!1,t)},rt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Ce(i,o),i.src=ue(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Wr(){if(this&&this.Cb){var t=this.Cb;t&&"SCRIPT"==t.tagName&&zr(t,!0,this.Ea)}}function zr(t,e,n){null!=n&&i.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Qr=0,$r=1;function Xr(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),E.call(this,n),this.code=t}function Jr(){}function Yr(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText=this.responseXML=null,this.a.onload=v(this.Wb,this),this.a.onerror=v(this.xb,this),this.a.onprogress=v(this.Xb,this),this.a.ontimeout=v(this.Yb,this)}function Zr(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ti(){var t=yi();return ut&&!!yt&&11==yt||/Edge\/\d+/.test(t)}function ei(){return i.window&&i.window.location.href||""}function ni(t,e){e=e||i.window;var n="about:blank";t&&(n=pe(ge(t))),e.location.href=n}function ri(t){return!!((t=(t||yi()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ii(t){t=t||i.window;try{t.close()}catch(t){}}function oi(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yi().toLowerCase(),r&&(e.target=r,D(n,"crios/")&&(e.target="_blank")),pi(yi())==di&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(r=e)||(r={}),t=window,e=n instanceof fe?n:ge("undefined"!=typeof n.href?n.href:String(n)),n=r.target||n.target,i=[],r)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+r[s]);break;case"target":case"noreferrer":break;default:i.push(s+"="+(r[s]?1:0))}var s=i.join(",");if(($("iPhone")&&!$("iPod")&&!$("iPad")||$("iPad")||$("iPod"))&&t.navigator&&t.navigator.standalone&&n&&"_self"!=n?(s=t.document.createElement("A"),e instanceof fe||e instanceof fe||(e=e.la?e.ja():String(e),me.test(e)||(e="about:invalid#zClosurez"),e=ve(e)),s.href=pe(e),s.setAttribute("target",n),r.noreferrer&&s.setAttribute("rel","noreferrer"),(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,t,1),s.dispatchEvent(r),s={}):r.noreferrer?(s=t.open("",n,s),t=pe(e),s&&(ct&&D(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,se("b/12014412, meta tag with sanitized URL"),t=we(t='<META HTTP-EQUIV="refresh" content="0; url='+T(t)+'">'),s.document.write(function(t){return t instanceof be&&t.constructor===be&&t.b===_e?t.a:(L("expected object of type SafeHtml, got '"+t+"' of type "+u(t)),"type_error:SafeHtml")}(t)),s.document.close())):s=t.open(pe(e),n,s),s)try{s.focus()}catch(t){}return s}w(Xr,E),w(Jr,Ir),Jr.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Yr;throw Error("Unsupported browser")},Jr.prototype.b=function(){return{}},(t=Yr.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.Wb=function(){this.status=200,this.responseText=this.a.responseText,Zr(this,4)},t.xb=function(){this.status=500,this.responseText="",Zr(this,4)},t.Yb=function(){this.xb()},t.Xb=function(){this.status=200,Zr(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};var si=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function ai(){var t=null;return new Mt(function(e){"complete"==i.document.readyState?e():(t=function(){e()},Ye(window,"load",t))}).s(function(e){throw Ze(window,"load",t),e})}function ui(t){return t=t||yi(),!("file:"!==Ei()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function li(){var t=i.window;try{return!(!t||t==t.top)}catch(t){return!1}}function ci(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":"Browser"}function hi(){var t=ci();return"ReactNative"===t||"Node"===t}var di="Firefox",fi="Chrome";function pi(t){var e=t.toLowerCase();return D(e,"opera/")||D(e,"opr/")||D(e,"opios/")?"Opera":D(e,"iemobile")?"IEMobile":D(e,"msie")||D(e,"trident/")?"IE":D(e,"edge/")?"Edge":D(e,"firefox/")?di:D(e,"silk/")?"Silk":D(e,"blackberry")?"Blackberry":D(e,"webos")?"Webos":!D(e,"safari/")||D(e,"chrome/")||D(e,"crios/")||D(e,"android")?!D(e,"chrome/")&&!D(e,"crios/")||D(e,"edge/")?D(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":fi:"Safari"}var mi={Gc:"FirebaseCore-web",Ic:"FirebaseUI-web"};function gi(t,e){e=e||[];var n,r=[],i={};for(n in mi)i[mi[n]]=!0;for(n=0;n<e.length;n++)"undefined"!=typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),i="",(i="Browser"===(r=ci())?pi(yi()):r)+"/JsCore/"+t+"/"+e.join(",")}function yi(){return i.navigator&&i.navigator.userAgent||""}function vi(t,e){t=t.split("."),e=e||i;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function bi(){try{var t=i.localStorage,e=Ai();if(t)return t.setItem(e,"1"),t.removeItem(e),!ti()||!!i.indexedDB}catch(t){}return!1}function _i(){return(wi()||"chrome-extension:"===Ei()||ui())&&!hi()&&bi()}function wi(){return"http:"===Ei()||"https:"===Ei()}function Ei(){return i.location&&i.location.protocol||null}function Ci(t){return!ri(t=t||yi())&&pi(t)!=di}function Si(t){return"undefined"==typeof t?null:Ie(t)}function Ti(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ii(t){if(null!==t)return JSON.parse(t)}function Ai(t){return t||""+Math.floor(1e9*Math.random()).toString()}function ki(t){return"Safari"!=pi(t=t||yi())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ni(){var t=i.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Oi(){var t=i.navigator;return!t||"boolean"!=typeof t.onLine||!wi()&&"chrome-extension:"!==Ei()&&"undefined"==typeof t.connection||t.onLine}function Ri(t,e,n,r){if(t>e)throw Error("Short delay should be less than long delay!");this.c=t,this.b=e,t=n||yi(),r=r||ci(),this.a=ri(t)||"ReactNative"===r}function xi(){var t=i.document;return!t||"undefined"==typeof t.visibilityState||"visible"==t.visibilityState}function Di(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}Ri.prototype.get=function(){return this.a?this.b:this.c};var Pi,Mi={};try{var Li={};Object.defineProperty(Li,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Li,"abcd",{configurable:!0,enumerable:!0,value:2}),Pi=2==Li.abcd}catch(st){Pi=!1}function Vi(t,e,n){Pi?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ui(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Vi(t,n,e[n])}function Fi(t){var e={};return Ui(e,t),e}function ji(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Vi(e,n,ji(t[n]));return e}function Bi(t,e){this.code=Hi+t,this.message=e||Gi[t]||""}function qi(t){var e=t&&t.code;return e?new Bi(e.substring(Hi.length),t.message):null}w(Bi,Error),Bi.prototype.B=function(){return{code:this.code,message:this.message}},Bi.prototype.toJSON=function(){return this.B()};var Hi="auth/",Gi={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Ki(t){var e=t[$i];if("undefined"==typeof e)throw new Bi("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Bi("invalid-continue-uri");this.h=e,this.c=this.a=null,this.g=!1;var n=t[Wi];if(n&&"object"==typeof n){e=n[Yi];var r=n[Xi];if(n=n[Ji],"string"==typeof e&&e.length){if(this.a=e,"undefined"!=typeof r&&"boolean"!=typeof r)throw new Bi("argument-error",Xi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!=typeof n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Bi("argument-error",Ji+" property must be a non empty string when specified.");this.c=n||null}else{if("undefined"!=typeof e)throw new Bi("argument-error",Yi+" property must be a non empty string when specified.");if("undefined"!=typeof r||"undefined"!=typeof n)throw new Bi("missing-android-pkg-name")}}else if("undefined"!=typeof n)throw new Bi("argument-error",Wi+" property must be a non null object when specified.");if(this.b=null,(e=t[Qi])&&"object"==typeof e){if("string"==typeof(e=e[Zi])&&e.length)this.b=e;else if("undefined"!=typeof e)throw new Bi("argument-error",Zi+" property must be a non empty string when specified.")}else if("undefined"!=typeof e)throw new Bi("argument-error",Qi+" property must be a non null object when specified.");if("undefined"!=typeof(t=t[zi])&&"boolean"!=typeof t)throw new Bi("argument-error",zi+" property must be a boolean when specified.");if((this.f=!!t)&&!this.b&&!this.a)throw new Bi("argument-error",zi+" property can't be true when no mobile application is provided.")}var Wi="android",zi="handleCodeInApp",Qi="iOS",$i="url",Xi="installApp",Ji="minimumVersion",Yi="packageName",Zi="bundleId";function to(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.f,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.c,e.androidInstallApp=t.g),e.iOSBundleId=t.b,e)null===e[n]&&delete e[n];return e}function eo(t){if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Nn[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!kn){kn={},Nn={};for(var t=0;65>t;t++)kn[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Nn[kn[t]]=t,62<=t&&(Nn["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t));if(r.sub&&r.iss&&r.aud&&r.exp)return new function(t){this.b=t.sub,_(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null}(r)}catch(t){}return null}var no="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ro=["client_id","response_type","scope","redirect_uri","state"],io={Hc:{Ma:"locale",za:500,ya:600,Na:"facebook.com",$a:ro},Jc:{Ma:null,za:500,ya:620,Na:"github.com",$a:ro},Kc:{Ma:"hl",za:515,ya:680,Na:"google.com",$a:ro},Qc:{Ma:"lang",za:485,ya:705,Na:"twitter.com",$a:no}};function oo(t){for(var e in io)if(io[e].Na==t)return io[e];return null}function so(t){var e={};e["facebook.com"]=ho,e["google.com"]=po,e["github.com"]=fo,e["twitter.com"]=mo;var n=t&&t[uo];try{if(n)return e[n]?new e[n](t):new co(t);if("undefined"!=typeof t[ao])return new lo(t)}catch(t){}return null}var ao="idToken",uo="providerId";function lo(t){var e=t[uo];if(!e&&t[ao]){var n=eo(t[ao]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!=typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Vi(this,"providerId",e),Vi(this,"isNewUser",n)}function co(t){lo.call(this,t),Vi(this,"profile",ji((t=Ii(t.rawUserInfo||"{}"))||{}))}function ho(t){if(co.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function fo(t){if(co.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vi(this,"username",this.profile&&this.profile.login||null)}function po(t){if(co.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function mo(t){if(co.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vi(this,"username",t.screenName||null)}function go(t,e){return t.then(function(t){if(t[Ko]){var n=eo(t[Ko]);if(!n||e!=n.b)throw new Bi("user-mismatch");return t}throw new Bi("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Hi+"user-not-found"?new Bi("user-mismatch"):t})}function yo(t,e){if(e.idToken||e.accessToken)e.idToken&&Vi(this,"idToken",e.idToken),e.accessToken&&Vi(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Bi("internal-error","failed to construct a credential");Vi(this,"accessToken",e.oauthToken),Vi(this,"secret",e.oauthTokenSecret)}Vi(this,"providerId",t)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:_r(e).toString(),requestUri:"http://localhost"}}function bo(t,e){this.rc=e||[],Ui(this,{providerId:t,isOAuthProvider:!0}),this.rb={},this.Wa=(oo(t)||{}).Ma||null,this.Ua=null}function _o(t){bo.call(this,t,ro),this.a=[]}function wo(){_o.call(this,"facebook.com")}function Eo(t){if(!t)throw new Bi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return f(t)&&(e=t.accessToken),(new wo).credential(null,e)}function Co(){_o.call(this,"github.com")}function So(t){if(!t)throw new Bi("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return f(t)&&(e=t.accessToken),(new Co).credential(null,e)}function To(){_o.call(this,"google.com"),this.sa("profile")}function Io(t,e){var n=t;return f(t)&&(n=t.idToken,e=t.accessToken),(new To).credential(n,e)}function Ao(){bo.call(this,"twitter.com",no)}function ko(t,e){var n=t;if(f(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Bi("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new yo("twitter.com",n)}function No(t,e){this.a=t,this.f=e,Vi(this,"providerId","password")}function Oo(){Ui(this,{providerId:"password",isOAuthProvider:!1})}function Ro(t){if(!(t.Pa&&t.Oa||t.Da&&t.Y))throw new Bi("internal-error");this.a=t,Vi(this,"providerId","phone")}function xo(t){return t.a.Da&&t.a.Y?{temporaryProof:t.a.Da,phoneNumber:t.a.Y}:{sessionInfo:t.a.Pa,code:t.a.Oa}}function Do(t){try{this.a=t||e.auth()}catch(t){throw new Bi("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ui(this,{providerId:"phone",isOAuthProvider:!1})}function Po(t,e){if(!t)throw new Bi("missing-verification-id");if(!e)throw new Bi("missing-verification-code");return new Ro({Pa:t,Oa:e})}function Mo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({Da:t.temporaryProof,Y:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return Io(t,n);case"facebook.com":return Eo(n);case"github.com":return So(n);case"twitter.com":return ko(n,r);default:return new _o(e).credential(t,n)}}catch(t){return null}}function Lo(t){if(!t.isOAuthProvider)throw new Bi("invalid-oauth-provider")}function Vo(t,e,n,r,i){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new Bi("invalid-auth-event");if(this.f&&this.a)throw new Bi("invalid-auth-event");if(this.f&&!this.g)throw new Bi("invalid-auth-event")}function Uo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&qi(t.error)):null}function Fo(t){var e="unauthorized-domain",n=void 0,r=ar(t);t=r.b,"chrome-extension"==(r=r.c)?n=C("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=C("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Bi.call(this,e,n)}function jo(t,e,n){Bi.call(this,t,n),(t=e||{}).sb&&Vi(this,"email",t.sb),t.Y&&Vi(this,"phoneNumber",t.Y),t.credential&&Vi(this,"credential",t.credential)}function Bo(t){if(t.code){var e=t.code||"";0==e.indexOf(Hi)&&(e=e.substring(Hi.length));var n={credential:Mo(t)};if(t.email)n.sb=t.email;else{if(!t.phoneNumber)return new Bi(e,t.message||void 0);n.Y=t.phoneNumber}return new jo(e,n,t.message)}return null}function qo(t){this.f=t}function Ho(t,n,r){var o="Node"==ci();if(!(o=i.XMLHttpRequest||o&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest))throw new Bi("internal-error","The XMLHttpRequest compatibility library was not found.");this.b=t,this.i=(t=n||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||Wo,this.c=et(t.secureTokenHeaders||zo),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||Qo,this.a=et(t.firebaseHeaders||$o),r&&(this.a["X-Client-Version"]=r,this.c["X-Client-Version"]=r),this.f=new Jr,this.o=new qo(o)}w(co,lo),w(ho,co),w(fo,co),w(po,co),w(mo,co),yo.prototype.wa=function(t){return us(t,vo(this))},yo.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,ls(t,n)},yo.prototype.c=function(t,e){return go(cs(t,vo(this)),e)},yo.prototype.B=function(){var t={providerId:this.providerId};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},bo.prototype.Ba=function(t){return this.rb=et(t),this},w(_o,bo),_o.prototype.sa=function(t){return q(this.a,t)||this.a.push(t),this},_o.prototype.wb=function(){return W(this.a)},_o.prototype.credential=function(t,e){if(!t&&!e)throw new Bi("argument-error","credential failed: must provide the ID token and/or the access token.");return new yo(this.providerId,{idToken:t||null,accessToken:e||null})},w(wo,_o),Vi(wo,"PROVIDER_ID","facebook.com"),w(Co,_o),Vi(Co,"PROVIDER_ID","github.com"),w(To,_o),Vi(To,"PROVIDER_ID","google.com"),w(Ao,bo),Vi(Ao,"PROVIDER_ID","twitter.com"),No.prototype.wa=function(t){return Ls(t,xs,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return Ls(t,Is,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return go(this.wa(t),e)},No.prototype.B=function(){return{email:this.a,password:this.f}},Ui(Oo,{PROVIDER_ID:"password"}),Ro.prototype.wa=function(t){return t.Qa(xo(this))},Ro.prototype.b=function(t,e){var n=xo(this);return n.idToken=e,Ls(t,Ps,n)},Ro.prototype.c=function(t,e){var n=xo(this);return n.operation="REAUTH",go(t=Ls(t,Ms,n),e)},Ro.prototype.B=function(){var t={providerId:"phone"};return this.a.Pa&&(t.verificationId=this.a.Pa),this.a.Oa&&(t.verificationCode=this.a.Oa),this.a.Da&&(t.temporaryProof=this.a.Da),this.a.Y&&(t.phoneNumber=this.a.Y),t},Do.prototype.Qa=function(t,e){var n=this.a.c;return qt(e.verify()).then(function(r){if(!o(r))throw new Bi("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Ls(n,Ss,e)}(0,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Bi("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Ui(Do,{PROVIDER_ID:"phone"}),Vo.prototype.B=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.B()}},w(Fo,Bi),w(jo,Bi),jo.prototype.B=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.B();return e&&rt(t,e),t},jo.prototype.toJSON=function(){return this.B()},w(qo,Ir),qo.prototype.a=function(){return new this.f},qo.prototype.b=function(){return{}};var Go,Ko="idToken",Wo=new Ri(3e4,6e4),zo={"Content-Type":"application/x-www-form-urlencoded"},Qo=new Ri(3e4,6e4),$o={"Content-Type":"application/json"};function Xo(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Jo(t,e){e?(t.a["X-Client-Version"]=e,t.c["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.c["X-Client-Version"])}function Yo(t,e,n,r,o,s,a){Oi()?(function(){var t=yi();return!((t=pi(t)!=fi?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||ut&&yt&&!(9<yt))}()?t=v(t.m,t):(Go||(Go=new Mt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{i[ts]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=le(Zo,{onload:ts});!function(t,e){Dn(Kr(n),null,e,void 0)}(0,function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=v(t.u,t)),t(e,n,r,o,s,a)):n&&n(null)}Ho.prototype.m=function(t,e,n,r,s,a){var u="Node"==ci(),l=hi()?u?new Nr(this.o):new Nr:new Nr(this.f);if(a){l.f=Math.max(0,a);var c=setTimeout(function(){cn(l,"timeout")},a)}hn(l,"complete",function(){c&&clearTimeout(c);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return An(t.J,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),dn(l,"ready",function(){c&&clearTimeout(c),De(this)}),dn(l,"timeout",function(){c&&clearTimeout(c),De(this),e&&e(null)}),function(t,e,n,r,s){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.i+"; newUri="+e);n=n?n.toUpperCase():"GET",t.i=e,t.g="",t.I=n,t.A=!1,t.b=!0,t.a=t.w?t.w.a():dr.a(),t.v=function(t){return t.c||(t.c=t.b())}(t.w?t.w:dr),t.a.onreadystatechange=v(t.Ab,t);try{An(t.J,Hr(t,"Opening Xhr")),t.G=!0,t.a.open(n,String(e),!0),t.G=!1}catch(e){return An(t.J,Hr(t,"Error opening Xhr: "+e.message)),void Lr(t,e)}e=r||"";var a=new Sn(t.headers);s&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||o(t))F(t,e,void 0);else for(var n=Zn(t),r=Yn(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(s,function(t,e){a.set(e,t)}),s=function(t){t:{for(var e=Mr,n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:o(t)?t.charAt(e):t[e]}(a.S()),r=i.FormData&&e instanceof i.FormData,!q(Pr,n)||s||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.l&&(t.a.responseType=t.l),"withCredentials"in t.a&&t.a.withCredentials!==t.N&&(t.a.withCredentials=t.N);try{jr(t),0<t.f&&(t.o=function(t){return ut&&bt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),An(t.J,Hr(t,"Will abort after "+t.f+"ms if incomplete, xhr2 "+t.o)),t.o?(t.a.timeout=t.f,t.a.ontimeout=v(t.Ea,t)):t.m=pn(t.Ea,t.f,t)),An(t.J,Hr(t,"Sending request")),t.h=!0,t.a.send(e),t.h=!1}catch(e){An(t.J,Hr(t,"Send error: "+e.message)),Lr(t,e)}}(l,t,n,r,s)};var Zo=se("https://apis.google.com/js/client.js?onload=%{onload}"),ts="__fcb"+Math.floor(1e6*Math.random()).toString();function es(t){if(!Gr.test(t.email))throw new Bi("invalid-email")}function ns(t){"email"in t&&es(t)}function rs(t){if(!t[Ko])throw new Bi("internal-error")}function is(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Bi("internal-error")}else{if(!t.sessionInfo)throw new Bi("missing-verification-id");if(!t.code)throw new Bi("missing-verification-code")}}Ho.prototype.u=function(t,e,n,r,i){var o=this;Go.then(function(){window.gapi.client.setApiKey(o.b);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ho.prototype.gb=function(){return Ls(this,As,{})},Ho.prototype.kb=function(t,e){return Ls(this,Ts,{idToken:t,email:e})},Ho.prototype.lb=function(t,e){return Ls(this,Is,{idToken:t,password:e})};var os={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ss(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new Bi("internal-error")}function as(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Bo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Bo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Bo(t)):t.errorMessage&&(e=Vs(t.errorMessage)),e)throw e;if(!t[Ko])throw new Bi("internal-error")}function us(t,e){return e.returnIdpCredential=!0,Ls(t,ks,e)}function ls(t,e){return e.returnIdpCredential=!0,Ls(t,Os,e)}function cs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ls(t,Ns,e)}function hs(t){if(!t.oobCode)throw new Bi("invalid-action-code")}(t=Ho.prototype).mb=function(t,e){var n={idToken:t},r=[];return X(os,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Ls(this,Ts,n)},t.cb=function(t,e){return rt(t={requestType:"PASSWORD_RESET",email:t},e),Ls(this,_s,t)},t.bb=function(t,e){return rt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ls(this,bs,t)},t.Qa=function(t){return Ls(this,Ds,t)},t.Ta=function(t,e){return Ls(this,Cs,{oobCode:t,newPassword:e})},t.Ia=function(t){return Ls(this,fs,{oobCode:t})},t.Sa=function(t){return Ls(this,ds,{oobCode:t})};var ds={endpoint:"setAccountInfo",D:hs,ga:"email"},fs={endpoint:"resetPassword",D:hs,O:function(t){if(!t.email||!t.requestType)throw new Bi("internal-error")}},ps={endpoint:"signupNewUser",D:function(t){if(es(t),!t.password)throw new Bi("weak-password")},O:rs,T:!0},ms={endpoint:"createAuthUri"},gs={endpoint:"deleteAccount",ea:["idToken"]},ys={endpoint:"setAccountInfo",ea:["idToken","deleteProvider"],D:function(t){if(!c(t.deleteProvider))throw new Bi("internal-error")}},vs={endpoint:"getAccountInfo"},bs={endpoint:"getOobConfirmationCode",ea:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Bi("internal-error")},ga:"email"},_s={endpoint:"getOobConfirmationCode",ea:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Bi("internal-error");es(t)},ga:"email"},ws={nb:!0,endpoint:"getProjectConfig",zb:"GET"},Es={nb:!0,endpoint:"getRecaptchaParam",zb:"GET",O:function(t){if(!t.recaptchaSiteKey)throw new Bi("internal-error")}},Cs={endpoint:"resetPassword",D:hs,ga:"email"},Ss={endpoint:"sendVerificationCode",ea:["phoneNumber","recaptchaToken"],ga:"sessionInfo"},Ts={endpoint:"setAccountInfo",ea:["idToken"],D:ns,T:!0},Is={endpoint:"setAccountInfo",ea:["idToken"],D:function(t){if(ns(t),!t.password)throw new Bi("weak-password")},O:rs,T:!0},As={endpoint:"signupNewUser",O:rs,T:!0},ks={endpoint:"verifyAssertion",D:ss,O:as,T:!0},Ns={endpoint:"verifyAssertion",D:ss,O:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Bi("user-not-found");if(t.errorMessage)throw Vs(t.errorMessage);if(!t[Ko])throw new Bi("internal-error")},T:!0},Os={endpoint:"verifyAssertion",D:function(t){if(ss(t),!t.idToken)throw new Bi("internal-error")},O:as,T:!0},Rs={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Bi("invalid-custom-token")},O:rs,T:!0},xs={endpoint:"verifyPassword",D:function(t){if(es(t),!t.password)throw new Bi("wrong-password")},O:rs,T:!0},Ds={endpoint:"verifyPhoneNumber",D:is,O:rs},Ps={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Bi("internal-error");is(t)},O:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Bo(t);rs(t)}},Ms={Pb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:is,O:rs};function Ls(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.ea))return Ht(new Bi("internal-error"));var r,i=e.zb||"POST";return qt(n).then(e.D).then(function(){return e.T&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var s=ar(t.g+e);or(s,"key",t.b),o&&or(s,"cb",_().toString());var a="GET"==n;if(a)for(var u in r)r.hasOwnProperty(u)&&or(s,u,r[u]);return new Mt(function(e,o){Yo(t,s.toString(),function(t){t?t.error?o(Us(t,i||{})):e(t):o(new Bi("network-request-failed"))},n,a?void 0:Ie(Ti(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Pb,e.nb||!1)}).then(function(t){return r=t}).then(e.O).then(function(){if(!e.ga)return r;if(!(e.ga in r))throw new Bi("internal-error");return r[e.ga]})}function Vs(t){return Us({error:{errors:[{message:t}],code:400,message:t}})}function Us(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Bi(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",rt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Bi(r[i],e);return!e&&t&&(e=Si(t)),new Bi("internal-error",e)}var Fs,js={Mc:{Va:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://securetoken.googleapis.com/v1/token",id:"p"},Oc:{Va:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ab:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Pc:{Va:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ab:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Bs(t){for(var e in js)if(js[e].id===t)return{firebaseEndpoint:(t=js[e]).Va,secureTokenEndpoint:t.ab};return null}Fs=Bs("__EID__")?"__EID__":void 0;var qs,Hs=se("https://apis.google.com/js/api.js?onload=%{onload}"),Gs=new Ri(3e4,6e4),Ks=new Ri(5e3,15e3),Ws=null;function zs(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=ur(this.i,"/__/auth/iframe"),or(this.a,"apiKey",this.g),or(this.a,"appName",this.h),this.b=null,this.c=[]}function Qs(t,e,n,r,i){this.m=t,this.u=e,this.c=n,this.l=r,this.i=this.g=this.h=null,this.a=i,this.f=null}function $s(t){try{return e.app(t).auth().Ka()}catch(t){return[]}}function Xs(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Js(t){var e=ei();return function(t){return Ls(t,ws,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=ar(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=ar(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:si.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Fo(ei())})}function Ys(t){return t.l?t.l:(t.l=ai().then(function(){if(!t.o){var e=t.c,n=t.h,r=$s(t.b),o=new zs(t.u,t.f,t.b);o.f=e,o.b=n,o.c=W(r||[]),t.o=o.toString()}t.i=new function(t){this.b=t,this.a=null,this.Ya=function(t){return(Ws||(Ws=new Mt(function(t,e){if(Oi()){var n=function(){Ni(),vi("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ni(),e(Error("Network Error"))},timeout:Gs.get()})};if(vi("gapi.iframes.Iframe"))t();else if(vi("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();i[r]=function(){vi("gapi.load")?n():e(Error("Network Error"))},qt(Kr(r=le(Hs,{onload:r}))).s(function(){e(Error("Network Error"))})}}else e(Error("Network Error"))}).s(function(t){throw Ws=null,t}))).then(function(){return new Mt(function(e,n){vi("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:vi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Ks.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.Ya.then(function(){t.a.register("authEvent",e,vi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Uo(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",qt(n)}return n.status="ERROR",qt(n)})}(t)}),t.l)}function Zs(t){return t.m||(t.v=t.c?gi(t.c,$s(t.b)):null,t.m=new Ho(t.f,Bs(t.h),t.v)),t.m}function ta(t,e,n,r,i,o,s,a,u,l){return(t=new Qs(t,e,n,r,i)).h=o,t.g=s,t.i=a,t.b=et(u||null),t.f=l,t.toString()}function ea(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Bi("internal-error","The React Native compatibility library was not found.")}function na(){this.a={}}function ra(t,e,n,r,o,s){try{var a=!!i.indexedDB}catch(t){a=!1}if(!a)throw new Bi("web-storage-unsupported");this.u=t,this.h=e,this.g=n,this.l=r,this.m=o,this.f={},this.c=[],this.a=0,this.o=s||i.indexedDB}function ia(t){return t.i||(t.i=function(t){return new Mt(function(e,n){var r=t.o.open(t.u,t.m);r.onerror=function(t){n(Error(t.target.errorCode))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore(t.h,{keyPath:t.g})}catch(t){n(t)}},r.onsuccess=function(t){e(t.target.result)}})}(t)),t.i}function oa(t,e){return e.objectStore(t.h)}function sa(t,e,n){return e.transaction([t.h],n?"readwrite":"readonly")}function aa(t){return new Mt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}function ua(){if(!function(){var t="Node"==ci();if(!(t=la()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==ci())throw new Bi("internal-error","The LocalStorage compatibility library was not found.");throw new Bi("web-storage-unsupported")}this.a=la()||e.INTERNAL.node.localStorage}function la(){try{var t=i.localStorage,e=Ai();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ca(){}function ha(){if(!function(){var t="Node"==ci();if(!(t=da()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==ci())throw new Bi("internal-error","The SessionStorage compatibility library was not found.");throw new Bi("web-storage-unsupported")}this.a=da()||e.INTERNAL.node.sessionStorage}function da(){try{var t=i.sessionStorage,e=Ai();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}zs.prototype.toString=function(){return this.f?or(this.a,"v",this.f):Er(this.a.a,"v"),this.b?or(this.a,"eid",this.b):Er(this.a.a,"eid"),this.c.length?or(this.a,"fw",this.c.join(",")):Er(this.a.a,"fw"),this.a.toString()},Qs.prototype.toString=function(){var t=ur(this.m,"/__/auth/handler");if(or(t,"apiKey",this.u),or(t,"appName",this.c),or(t,"authType",this.l),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().$()}catch(t){r=null}for(var i in n.Ua=r,or(t,"providerId",this.a.providerId),r=Ti((n=this.a).rb))r[i]=r[i].toString();i=n.rc,r=et(r);for(var o=0;o<i.length;o++){var s=i[o];s in r&&delete r[s]}n.Wa&&n.Ua&&!r[n.Wa]&&(r[n.Wa]=n.Ua),Z(r)||or(t,"customParameters",Si(r))}if("function"==typeof this.a.wb&&(n=this.a.wb()).length&&or(t,"scopes",n.join(",")),this.h?or(t,"redirectUrl",this.h):Er(t.a,"redirectUrl"),this.g?or(t,"eventId",this.g):Er(t.a,"eventId"),this.i?or(t,"v",this.i):Er(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!sr(t,a)&&or(t,a,this.b[a]);return this.f?or(t,"eid",this.f):Er(t.a,"eid"),(a=$s(this.c)).length&&or(t,"fw",a.join(",")),t.toString()},(t=Xs.prototype).Ca=function(t,e,n){var r=new Bi("popup-closed-by-user"),i=new Bi("web-storage-unsupported"),o=this,s=!1;return this.ba().then(function(){(function(t){var e={type:"webStorageSupport"};return Ys(t).then(function(){return function(t,e){return t.Ya.then(function(){return new Mt(function(n){t.a.send(e.type,e,n,vi("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&"undefined"!=typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&ii(t),e(i),s=!0)})}).s(function(){}).then(function(){if(!s)return function(t){return new Mt(function(e){return function n(){mn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return mn(n).then(function(){e(r)})})},t.Db=function(){var t=yi();return!Ci(t)&&!ki(t)},t.yb=function(){return!1},t.vb=function(t,e,n,r,i,o,s){if(!t)return Ht(new Bi("popup-blocked"));if(s&&!Ci())return this.ba().s(function(e){ii(t),i(e)}),r(),qt();this.a||(this.a=Js(Zs(this)));var a=this;return this.a.then(function(){var e=a.ba().s(function(e){throw ii(t),i(e),e});return r(),e}).then(function(){Lo(n),s||ni(ta(a.u,a.f,a.b,e,n,null,o,a.c,void 0,a.h),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(a.a=null),t})},t.Aa=function(t,e,n){this.a||(this.a=Js(Zs(this)));var r=this;return this.a.then(function(){Lo(e),ni(ta(r.u,r.f,r.b,t,e,ei(),n,r.c,void 0,r.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ba=function(){var t=this;return Ys(this).then(function(){return t.i.Ya}).s(function(){throw t.a=null,new Bi("network-request-failed")})},t.Hb=function(){return!0},t.ua=function(t){this.g.push(t)},t.Ja=function(t){G(this.g,function(e){return e==t})},(t=ea.prototype).get=function(t){return qt(this.a.getItem(t)).then(function(t){return t&&Ii(t)})},t.set=function(t,e){return qt(this.a.setItem(t,Si(e)))},t.X=function(t){return qt(this.a.removeItem(t))},t.ia=function(){},t.da=function(){},(t=na.prototype).get=function(t){return qt(this.a[t])},t.set=function(t,e){return this.a[t]=e,qt()},t.X=function(t){return delete this.a[t],qt()},t.ia=function(){},t.da=function(){},(t=ra.prototype).set=function(t,e){var n,r=!1,i=this;return Kt(ia(this).then(function(e){return aa((e=oa(i,sa(i,n=e,!0))).get(t))}).then(function(o){var s=oa(i,sa(i,n,!0));return o?(o.value=e,aa(s.put(o))):(i.a++,r=!0,(o={})[i.g]=t,o[i.l]=e,aa(s.add(o)))}).then(function(){i.f[t]=e}),function(){r&&i.a--})},t.get=function(t){var e=this;return ia(this).then(function(n){return aa(oa(e,sa(e,n,!1)).get(t))}).then(function(t){return t&&t.value})},t.X=function(t){var e=!1,n=this;return Kt(ia(this).then(function(r){return e=!0,n.a++,aa(oa(n,sa(n,r,!0)).delete(t))}).then(function(){delete n.f[t]}),function(){e&&n.a--})},t.zc=function(){var t=this;return ia(this).then(function(e){var n=oa(t,sa(t,e,!1));return n.getAll?aa(n.getAll()):new Mt(function(t,e){var r=[],i=n.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){e(Error(t.target.errorCode))}})}).then(function(e){var n={},r=[];if(0==t.a){for(r=0;r<e.length;r++)n[e[r][t.g]]=e[r][t.l];r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):c(e[r])?tt(e[r],n[r])||i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.f,n),t.f=n}return r})},t.ia=function(t){0==this.c.length&&function(t){t.b&&t.b.cancel("STOP_EVENT"),function e(){return t.b=mn(800).then(v(t.zc,t)).then(function(e){0<e.length&&F(t.c,function(t){t(e)})}).then(e).s(function(t){"STOP_EVENT"!=t.message&&e()}),t.b}()}(this),this.c.push(t)},t.da=function(t){G(this.c,function(e){return e==t}),0==this.c.length&&this.b&&this.b.cancel("STOP_EVENT")},(t=ua.prototype).get=function(t){var e=this;return qt().then(function(){return Ii(e.a.getItem(t))})},t.set=function(t,e){var n=this;return qt().then(function(){var r=Si(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return qt().then(function(){e.a.removeItem(t)})},t.ia=function(t){i.window&&Xe(i.window,"storage",t)},t.da=function(t){i.window&&Ze(i.window,"storage",t)},(t=ca.prototype).get=function(){return qt(null)},t.set=function(){return qt()},t.X=function(){return qt()},t.ia=function(){},t.da=function(){},(t=ha.prototype).get=function(t){var e=this;return qt().then(function(){return Ii(e.a.getItem(t))})},t.set=function(t,e){var n=this;return qt().then(function(){var r=Si(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return qt().then(function(){e.a.removeItem(t)})},t.ia=function(){},t.da=function(){};var fa,pa,ma={C:ua,jb:ha},ga={C:ua,jb:ha},ya={C:ea,jb:ca},va={Lc:"local",NONE:"none",Nc:"session"};function ba(t,e,n,r,i){this.i=t,this.g=e,this.A=n,this.u=r,this.v=i,this.a={},fa||(fa=new function(){var t={};t.Browser=ma,t.Node=ga,t.ReactNative=ya,this.a=t[ci()]}),t=fa;try{if(ti()){qs||(qs=new ra("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1));var o=qs}else o=new t.a.C;this.l=o}catch(t){this.l=new na,this.u=!0}try{this.o=new t.a.jb}catch(t){this.o=new na}this.w=new na,this.h=v(this.m,this),this.b={}}function _a(){return pa||(pa=new ba("firebase",":",!(ki(yi())||!li()),Ci(),bi())),pa}function wa(t,e){switch(e){case"session":return t.o;case"none":return t.w;default:return t.l}}function Ea(t,e,n){return t.i+t.g+e.name+(n?t.g+n:"")}function Ca(t,e,n){return n=Ea(t,e,n),"local"==e.C&&(t.b[n]=null),wa(t,e.C).X(n)}function Sa(t,e,n,r){e=Ea(t,e,n),t.v&&(t.b[e]=i.localStorage.getItem(e)),Z(t.a)&&(wa(t,"local").ia(t.h),t.u||ti()||!t.v||function(t){Ta(t),t.f=setInterval(function(){for(var e in t.a){var n=i.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Fe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.m(n))}},1e3)}(t)),t.a[e]||(t.a[e]=[]),t.a[e].push(r)}function Ta(t){t.f&&(clearInterval(t.f),t.f=null)}ba.prototype.get=function(t,e){return wa(this,t.C).get(Ea(this,t,e))},ba.prototype.set=function(t,e,n){var r=Ea(this,t,n),i=this,o=wa(this,t.C);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.C&&(i.b[r]=e)})},ba.prototype.m=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"==typeof r&&(r=null);var o=i.localStorage.getItem(n);o!==r&&(this.b[n]=o,this.c(n))}else if(0==e.indexOf(this.i+this.g)&&this.a[e]){if("undefined"!=typeof t.a.a?wa(this,"local").da(this.h):Ta(this),this.A)if(n=i.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?i.localStorage.setItem(e,r):i.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"==typeof t.a.a)return;var s=this;n=function(){"undefined"==typeof t.a.a&&s.b[e]===i.localStorage.getItem(e)||(s.b[e]=i.localStorage.getItem(e),s.c(e))},ut&&yt&&10==yt&&i.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else F(t,v(this.c,this))},ba.prototype.c=function(t){this.a[t]&&F(this.a[t],function(t){t()})};var Ia={name:"authEvent",C:"local"};function Aa(t,e,n,r,i,o,s){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=s||null,this.h=e+":"+n,this.A=new function(){this.a=_a()},this.g=new function(t){this.a=t,this.b=_a()}(this.h),this.f=null,this.b=[],this.v=i||500,this.w=o||2e3,this.a=this.c=null}function ka(t){return new Bi("invalid-cordova-configuration",t)}function Na(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Oa(t){return t.f||(t.f=t.ba().then(function(){return new Mt(function(e){t.ua(function n(r){return e(r),t.Ja(n),!1}),function(t){function e(e){o=!0,s&&s.cancel(),Ra(t).then(function(n){var i=r;if(n&&e&&e.url){i=null;var o=e.url,s=ar(o),a=sr(s,"link"),u=sr(ar(a),"link");-1!=(o=sr(ar(s=sr(s,"deep_link_id")),"link")||s||u||a||o).indexOf("/__/auth/callback")&&(i=(i="object"==typeof(i=Ii(sr(i=ar(o),"firebaseError")||null))?qi(i):null)?new Vo(n.b,n.c,null,null,i):new Vo(n.b,n.c,o,n.g)),i=i||r}Na(t,i)})}var n=vi("universalLinks.subscribe",i);if("function"!=typeof n)throw new Bi("invalid-cordova-configuration");var r=new Vo("unknown",null,null,null,new Bi("no-auth-event")),o=!1,s=mn(t.v).then(function(){return Ra(t).then(function(){o||Na(t,r)})}),a=i.handleOpenURL;i.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(vi("BuildInfo.packageName",i).toLowerCase()+"://")&&e({url:t}),"function"==typeof a)try{a(t)}catch(t){console.error(t)}},n(null,e)}(t)})})),t.f}function Ra(t){var e=null;return function(t){return t.b.get(Ia,t.a).then(function(t){return Uo(t)})}(t.g).then(function(n){return e=n,Ca((n=t.g).b,Ia,n.a)}).then(function(){return e})}(t=Aa.prototype).ba=function(){return this.xa?this.xa:this.xa=(ui(void 0)?ai().then(function(){return new Mt(function(t,e){var n=i.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ht(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof vi("universalLinks.subscribe",i))throw ka("cordova-universal-links-plugin is not installed");if("undefined"==typeof vi("BuildInfo.packageName",i))throw ka("cordova-plugin-buildinfo is not installed");if("function"!=typeof vi("cordova.plugins.browsertab.openUrl",i))throw ka("cordova-plugin-browsertab is not installed");if("function"!=typeof vi("cordova.InAppBrowser.open",i))throw ka("cordova-plugin-inappbrowser is not installed")},function(){throw new Bi("cordova-not-ready")})},t.Ca=function(t,e){return e(new Bi("operation-not-supported-in-this-environment")),qt()},t.vb=function(){return Ht(new Bi("operation-not-supported-in-this-environment"))},t.Hb=function(){return!1},t.Db=function(){return!0},t.yb=function(){return!0},t.Aa=function(t,e,n){if(this.c)return Ht(new Bi("redirect-operation-pending"));var r=this,o=i.document,s=null,a=null,u=null,l=null;return this.c=Kt(qt().then(function(){return Lo(e),Oa(r)}).then(function(){return function(t,e,n,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Vo(e,r,null,o,new Bi("no-auth-event")),a=vi("BuildInfo.packageName",i);if("string"!=typeof a)throw new Bi("invalid-cordova-configuration");var u=vi("BuildInfo.displayName",i),l={};if(yi().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=a;else{if(!yi().toLowerCase().match(/android/))return Ht(new Bi("operation-not-supported-in-this-environment"));l.apn=a}u&&(l.appDisplayName=u),o=function(t){var e=new Xn;Qn(e,t),t=[];var n=8*e.g;Qn(e,Wn,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(zn(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return j(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var c=ta(t.u,t.i,t.l,e,n,null,r,t.m,l,t.o);return t.ba().then(function(){var e=t.h;return t.A.a.set(Ia,s.B(),e)}).then(function(){var e=vi("cordova.plugins.browsertab.isAvailable",i);if("function"!=typeof e)throw new Bi("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=vi("cordova.plugins.browsertab.openUrl",i)))throw new Bi("invalid-cordova-configuration");n(c)}else{if("function"!=typeof(n=vi("cordova.InAppBrowser.open",i)))throw new Bi("invalid-cordova-configuration");e=!(!(e=yi()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=n(c,e?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new Mt(function(t,e){a=function(){var e=vi("cordova.plugins.browsertab.close",i);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.ua(a),l=function(){xi()&&u()},o.addEventListener("resume",u=function(){s||(s=mn(r.w).then(function(){e(new Bi("redirect-cancelled-by-user"))}))},!1),yi().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).s(function(t){return Ra(r).then(function(){throw t})})}),function(){u&&o.removeEventListener("resume",u,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),a&&r.Ja(a),r.c=null})},t.ua=function(t){this.b.push(t),Oa(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new Bi("no-auth-event")),t(e))})},t.Ja=function(t){G(this.b,function(e){return e==t})};var xa={name:"pendingRedirect",C:"session"};function Da(t){return Ca(t.b,xa,t.a)}function Pa(t,e,n){this.v=t,this.l=e,this.u=n,this.h=[],this.f=!1,this.i=v(this.m,this),this.c=new Ga,this.o=new Qa,this.g=new function(t){this.a=t,this.b=_a()}(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.o,this.b.linkViaPopup=this.o,this.b.reauthViaPopup=this.o,this.a=Ma(this.v,this.l,this.u,Fs)}function Ma(t,n,r,i){var o=e.SDK_VERSION||null;return ui()?new Aa(t,n,r,o,void 0,void 0,i):new Xs(t,n,r,o,i)}function La(t){t.f||(t.f=!0,t.a.ua(t.i));var e=t.a;return t.a.ba().s(function(n){throw t.a==e&&t.reset(),n})}function Va(t){t.a.Db()&&La(t).s(function(e){var n=new Vo("unknown",null,null,null,new Bi("operation-not-supported-in-this-environment"));Ba(e)&&t.m(n)}),t.a.yb()||Ka(t.c)}Pa.prototype.reset=function(){this.f=!1,this.a.Ja(this.i),this.a=Ma(this.v,this.l,this.u)},Pa.prototype.subscribe=function(t){if(q(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(xa,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?Da(e.g).then(function(){La(e).s(function(t){var n=new Vo("unknown",null,null,null,new Bi("operation-not-supported-in-this-environment"));Ba(t)&&e.m(n)})}):Va(e)}).s(function(){Va(e)})}},Pa.prototype.unsubscribe=function(t){G(this.h,function(e){return e==t})},Pa.prototype.m=function(t){if(!t)throw new Bi("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.ob(t.b,t.c)){(e=this.b[t.b])&&e.h(t,r),e=!0;break}}return Ka(this.c),e};var Ua=new Ri(2e3,1e4),Fa=new Ri(3e4,6e4);function ja(t,e,n,r,i,o){return t.a.vb(e,n,r,function(){t.f||(t.f=!0,t.a.ua(t.i))},function(){t.reset()},i,o)}function Ba(t){return!(!t||"auth/cordova-not-ready"!=t.code)}Pa.prototype.aa=function(){return this.c.aa()},Pa.prototype.Aa=function(t,e,n){var r,i=this;return function(t){return t.b.set(xa,"pending",t.a)}(this.g).then(function(){return i.a.Aa(t,e,n).s(function(t){if(Ba(t))throw new Bi("operation-not-supported-in-this-environment");return r=t,Da(i.g).then(function(){throw r})}).then(function(){return i.a.Hb()?new Mt(function(){}):Da(i.g).then(function(){return i.aa()}).then(function(){}).s(function(){})})})},Pa.prototype.Ca=function(t,e,n,r){return this.a.Ca(n,function(n){t.fa(e,null,n,r)},Ua.get())};var qa={};function Ha(t,e,n){var r=e+":"+n;return qa[r]||(qa[r]=new Pa(t,e,n)),qa[r]}function Ga(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function Ka(t){t.g||(t.g=!0,za(t,!1,null,null))}function Wa(t,e){if(t.b=function(){return qt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function za(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ht(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wa(t,n):Wa(t,{user:null}),t.f=[],t.c=[]}function Qa(){}function $a(t,e){this.a=e,Vi(this,"verificationId",t)}function Xa(t,e,n,r){return new Do(t).Qa(e,n).then(function(t){return new $a(t,r)})}function Ja(t,e,n,r,i,o){if(this.h=t,this.i=e,this.g=n,this.c=r,this.f=i,this.l=!!o,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ya(t){t.b&&(t.b.cancel(),t.b=null)}function Za(t){this.f=t,this.b=this.a=null,this.c=0}function tu(t,e){var n=e[Ko],r=e.refreshToken;e=eu(e.expiresIn),t.b=n,t.c=e,t.a=r}function eu(t){return _()+1e3*parseInt(t,10)}function nu(t,e){this.a=t||null,this.b=e||null,Ui(this,{lastSignInTime:Di(e||null),creationTime:Di(t||null)})}function ru(t,e){for(var n in Ue.call(this,t),e)this[n]=e[n]}function iu(t,n,r){this.A=[],this.G=t.apiKey,this.o=t.appName,this.w=t.authDomain||null,t=e.SDK_VERSION?gi(e.SDK_VERSION):null,this.c=new Ho(this.G,Bs(Fs),t),this.h=new Za(this.c),hu(this,n[Ko]),tu(this.h,n),Vi(this,"refreshToken",this.h.a),pu(this,r||{}),ln.call(this),this.I=!1,this.w&&_i()&&(this.a=Ha(this.w,this.G,this.o)),this.N=[],this.i=null,this.l=function(t){return new Ja(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-_()-3e5;return 0<e?e:0},3e4,96e4,!1)}(this),this.U=v(this.Ga,this);var i=this;this.ha=null,this.ra=function(t){i.na(t.h)},this.W=null,this.R=[],this.qa=function(t){su(i,t.f)},this.V=null}function ou(t,e){t.W&&Ze(t.W,"languageCodeChanged",t.ra),(t.W=e)&&Xe(e,"languageCodeChanged",t.ra)}function su(t,n){t.R=n,Jo(t.c,e.SDK_VERSION?gi(e.SDK_VERSION,t.R):null)}function au(t,e){t.V&&Ze(t.V,"frameworkChanged",t.qa),(t.V=e)&&Xe(e,"frameworkChanged",t.qa)}function uu(t){try{return e.app(t.o).auth()}catch(e){throw new Bi("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function lu(t){t.m||t.l.b||(t.l.start(),Ze(t,"tokenChanged",t.U),Xe(t,"tokenChanged",t.U))}function cu(t){Ze(t,"tokenChanged",t.U),Ya(t.l)}function hu(t,e){t.pa=e,Vi(t,"_lat",e)}function du(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return function(t){return new Mt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ub:!0,value:o}:{Ub:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Gt(t[o],b(i,o,!0),b(i,o,!1));else e(r)})}(e).then(function(){return t})}function fu(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function pu(t,e){Ui(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new nu(e.createdAt,e.lastLoginAt),providerData:[]})}function mu(){}function gu(t){return qt().then(function(){if(t.m)throw new Bi("app-deleted")})}function yu(t){return j(t.providerData,function(t){return t.providerId})}function vu(t,e){e&&(bu(t,e.providerId),t.providerData.push(e))}function bu(t,e){G(t.providerData,function(t){return t.providerId==e})}function _u(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Vi(t,e,n)}function wu(t,e){t!=e&&(Ui(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),Vi(t,"metadata",e.metadata?function(t){return new nu(t.a,t.b)}(e.metadata):new nu),F(e.providerData,function(e){vu(t,e)}),t.h=e.h,Vi(t,"refreshToken",t.h.a))}function Eu(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return Ls(t.c,vs,{idToken:e}).then(v(t.kc,t))}(t,e).then(function(){return n||_u(t,"isAnonymous",!1),e})})}function Cu(t,e){e[Ko]&&t.pa!=e[Ko]&&(tu(t.h,e),cn(t,new ru("tokenChanged")),hu(t,e[Ko]),_u(t,"refreshToken",t.h.a))}function Su(t,e){return Eu(t).then(function(){if(q(yu(t),e))return du(t).then(function(){throw new Bi("provider-already-linked")})})}function Tu(t,e,n){return Fi({user:t,credential:Mo(e),additionalUserInfo:e=so(e),operationType:n})}function Iu(t,e){return Cu(t,e),t.reload().then(function(){return t})}function Au(t,n,r,i,o){if(!_i())return Ht(new Bi("operation-not-supported-in-this-environment"));if(t.i&&!o)return Ht(t.i);var s=oo(r.providerId),a=Ai(t.uid+":::"),u=null;(!Ci()||li())&&t.w&&r.isOAuthProvider&&(u=ta(t.w,t.G,t.o,n,r,null,a,e.SDK_VERSION||null));var l=oi(u,s&&s.za,s&&s.ya);return i=i().then(function(){if(Nu(t),!o)return t.F().then(function(){})}).then(function(){return ja(t.a,l,n,r,a,!!u)}).then(function(){return new Mt(function(e,r){t.fa(n,null,new Bi("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=a,t.b=t.a.Ca(t,n,l,a)})}).then(function(t){return l&&ii(l),t?Fi(t):null}).s(function(t){throw l&&ii(l),t}),Ou(t,i,o)}function ku(t,e,n,r,i){if(!_i())return Ht(new Bi("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ht(t.i);var o=null,s=Ai(t.uid+":::");return r=r().then(function(){if(Nu(t),!i)return t.F().then(function(){})}).then(function(){return t.Z=s,du(t)}).then(function(e){return t.ca&&(e=(e=t.ca).b.set(xu,t.B(),e.a)),e}).then(function(){return t.a.Aa(e,n,s)}).s(function(e){if(o=e,t.ca)return Du(t.ca);throw o}).then(function(){if(o)throw o}),Ou(t,r,i)}function Nu(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Bi("internal-error");throw new Bi("auth-domain-config-required")}}function Ou(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ht(t.i)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||cn(t,new ru("userInvalidated")),t.i=e),e})}(t,e,n);return t.A.push(r),Kt(r,function(){H(t.A,r)}),r}function Ru(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Ko]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-_())/1e3;var r=new iu(e,n,t);return t.providerData&&F(t.providerData,function(t){t&&vu(r,Fi(t))}),t.redirectEventId&&(r.Z=t.redirectEventId),r}Ga.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ga.prototype.h=function(t,e){if(!t)return Ht(new Bi("invalid-auth-event"));this.reset(),this.g=!0;var n=t.b,r=t.c;return"unknown"!=n||t.a&&"auth/web-storage-unsupported"==t.a.code||t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code?t.a?(za(this,!0,null,t.a),t=qt()):t=e.va(n,r)?function(t,e,n){n=n.va(e.b,e.c);var r=e.f,i=e.g,o=!!e.b.match(/Redirect$/);return n(r,i).then(function(e){za(t,o,e,null)}).s(function(e){za(t,o,null,e)})}(this,t,e):Ht(new Bi("invalid-auth-event")):(za(this,!1,null,null),t=qt()),t},Ga.prototype.aa=function(){var t=this;return new Mt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Bi("timeout");t.a&&t.a.cancel(),t.a=mn(Fa.get()).then(function(){t.b||za(t,!0,null,e)})}(t))})},Qa.prototype.h=function(t,e){if(!t)return Ht(new Bi("invalid-auth-event"));var n=t.b,r=t.c;return t.a?(e.fa(t.b,null,t.a,t.c),t=qt()):t=e.va(n,r)?function(t,e){var n=t.c,r=t.b;return e.va(r,n)(t.f,t.g).then(function(t){e.fa(r,t,null,n)}).s(function(t){e.fa(r,null,t,n)})}(t,e):Ht(new Bi("invalid-auth-event")),t},$a.prototype.confirm=function(t){return t=Po(this.verificationId,t),this.a(t)},Ja.prototype.start=function(){this.a=this.c,function t(e,n){Ya(e),e.b=mn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return e.l?qt():function(){var t=i.document,e=null;return xi()||!t?qt():new Mt(function(n){t.addEventListener("visibilitychange",e=function(){xi()&&(t.removeEventListener("visibilitychange",e,!1),n())},!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},Za.prototype.B=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Za.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ht(new Bi("user-token-expired")):t||!this.b||_()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Mt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Yo(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(Us(t)):t.access_token&&t.refresh_token?n(t):r(new Bi("internal-error")):r(new Bi("network-request-failed"))},"POST",_r(e).toString(),t.c,t.l.get()):r(new Bi("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=eu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):qt(null):qt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},nu.prototype.B=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(ru,Ue),w(iu,ln),iu.prototype.na=function(t){this.ha=t,Xo(this.c,t)},iu.prototype.$=function(){return this.ha},iu.prototype.Ka=function(){return W(this.R)},iu.prototype.Ga=function(){this.l.b&&(Ya(this.l),this.l.start())},Vi(iu.prototype,"providerId","firebase"),(t=iu.prototype).reload=function(){var t=this;return Ou(this,gu(this).then(function(){return Eu(t).then(function(){return du(t)}).then(mu)}))},t.F=function(t){var e=this;return Ou(this,gu(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Bi("internal-error");return t.accessToken!=e.pa&&(hu(e,t.accessToken),cn(e,new ru("tokenChanged"))),_u(e,"refreshToken",t.refreshToken),t.accessToken}))},t.getToken=function(t){return Mi["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Mi["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(t)},t.kc=function(t){if(!(t=t.users)||!t.length)throw new Bi("internal-error");pu(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?j(t,function(t){return new function(t,e,n,r,i,o){Ui(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)vu(this,e[n]);_u(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.Za=function(t){var e=this,n=null;return Ou(this,t.c(this.c,this.uid).then(function(t){return Cu(e,t),n=Tu(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.mc=function(t){return this.Za(t).then(function(){})},t.Xa=function(t){var e=this,n=null;return Ou(this,Su(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.c,n)}).then(function(t){return n=Tu(e,t,"link"),Iu(e,t)}).then(function(){return n}))},t.cc=function(t){return this.Xa(t).then(function(t){return t.user})},t.dc=function(t,e){var n=this;return Ou(this,Su(this,"phone").then(function(){return Xa(uu(n),t,e,v(n.Xa,n))}))},t.nc=function(t,e){var n=this;return Ou(this,qt().then(function(){return Xa(uu(n),t,e,v(n.Za,n))}),!0)},t.kb=function(t){var e=this;return Ou(this,this.F().then(function(n){return e.c.kb(n,t)}).then(function(t){return Cu(e,t),e.reload()}))},t.Dc=function(t){var e=this;return Ou(this,this.F().then(function(n){return t.b(e.c,n)}).then(function(t){return Cu(e,t),e.reload()}))},t.lb=function(t){var e=this;return Ou(this,this.F().then(function(n){return e.c.lb(n,t)}).then(function(t){return Cu(e,t),e.reload()}))},t.mb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return gu(this);var e=this;return Ou(this,this.F().then(function(n){return e.c.mb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Cu(e,t),_u(e,"displayName",t.displayName||null),_u(e,"photoURL",t.photoUrl||null),F(e.providerData,function(t){"password"===t.providerId&&(Vi(t,"displayName",e.displayName),Vi(t,"photoURL",e.photoURL))}),du(e)}).then(mu))},t.Cc=function(t){var e=this;return Ou(this,Eu(this).then(function(n){return q(yu(e),t)?function(t,e,n){return Ls(t,ys,{idToken:e,deleteProvider:n})}(e.c,n,[t]).then(function(t){var n={};return F(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),F(yu(e),function(t){n[t]||bu(e,t)}),n[Do.PROVIDER_ID]||Vi(e,"phoneNumber",null),du(e)}):du(e).then(function(){throw new Bi("no-such-provider")})}))},t.delete=function(){var t=this;return Ou(this,this.F().then(function(e){return Ls(t.c,gs,{idToken:e})}).then(function(){cn(t,new ru("userDeleted"))})).then(function(){for(var e=0;e<t.A.length;e++)t.A[e].cancel("app-deleted");ou(t,null),au(t,null),t.A=[],t.m=!0,cu(t),Vi(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.ob=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.Z||null)==e||"reauthViaRedirect"==t&&(this.Z||null)==e)},t.fa=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.va=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?v(this.tb,this):"reauthViaPopup"==t&&e==(this.g||null)?v(this.ub,this):"linkViaRedirect"==t&&(this.Z||null)==e?v(this.tb,this):"reauthViaRedirect"==t&&(this.Z||null)==e?v(this.ub,this):null},t.ec=function(t){var e=this;return Au(this,"linkViaPopup",t,function(){return Su(e,t.providerId).then(function(){return du(e)})},!1)},t.oc=function(t){return Au(this,"reauthViaPopup",t,function(){return qt()},!0)},t.fc=function(t){var e=this;return ku(this,"linkViaRedirect",t,function(){return Su(e,t.providerId)},!1)},t.pc=function(t){return ku(this,"reauthViaRedirect",t,function(){return qt()},!0)},t.tb=function(t,e){var n=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return Ou(this,this.F().then(function(r){return ls(n.c,{requestUri:t,sessionId:e,idToken:r})}).then(function(t){return r=Tu(n,t,"link"),Iu(n,t)}).then(function(){return r}))},t.ub=function(t,e){var n=this;this.b&&(this.b.cancel(),this.b=null);var r=null;return Ou(this,qt().then(function(){return go(cs(n.c,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return r=Tu(n,t,"reauthenticate"),Cu(n,t),n.i=null,n.reload()}).then(function(){return r}),!0)},t.bb=function(t){var e=this,n=null;return Ou(this,this.F().then(function(e){return n=e,"undefined"==typeof t||Z(t)?{}:to(new Ki(t))}).then(function(t){return e.c.bb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.B()},t.B=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.o,authDomain:this.w,stsTokenManager:this.h.B(),redirectEventId:this.Z||null};return this.metadata&&rt(t,this.metadata.B()),F(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var xu={name:"redirectUser",C:"session"};function Du(t){return Ca(t.b,xu,t.a)}function Pu(t,e){this.a=t,this.b=e||_a(),this.c=null,this.f=function(t){var e=Vu("local"),n=Vu("session"),r=Vu("none");return t.b.get(n,t.a).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Lu,t.a).then(function(t){return t?Vu(t):e})})})}).then(function(e){return t.c=e,Mu(t,e.C)}).s(function(){t.c||(t.c=e)})}(this),Sa(this.b,Vu("local"),this.a,v(this.g,this))}function Mu(t,e){var n,r=[];for(n in va)va[n]!==e&&r.push(Ca(t.b,Vu(va[n]),t.a));return r.push(Ca(t.b,Lu,t.a)),function(t){return new Mt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Gt(t[a],b(o,a),s);else e(i)})}(r)}Pu.prototype.g=function(){var t=this,e=Vu("local");Bu(this,function(){return qt().then(function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null}).then(function(n){if(n)return Mu(t,"local").then(function(){t.c=e})})})};var Lu={name:"persistence",C:"session"};function Vu(t){return{name:"authUser",C:t}}function Uu(t,e){return Bu(t,function(){return t.b.set(t.c,e.B(),t.a)})}function Fu(t){return Bu(t,function(){return Ca(t.b,t.c,t.a)})}function ju(t,e){return Bu(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Ru(t||{})})})}function Bu(t,e){return t.f=t.f.then(e,e),t.f}function qu(t){if(this.l=!1,Vi(this,"app",t),!$u(this).options||!$u(this).options.apiKey)throw new Bi("invalid-api-key");t=e.SDK_VERSION?gi(e.SDK_VERSION):null,this.c=new Ho($u(this).options&&$u(this).options.apiKey,Bs(Fs),t),this.N=[],this.m=[],this.I=[],this.Kb=e.INTERNAL.createSubscribe(v(this.ac,this)),this.R=void 0,this.Lb=e.INTERNAL.createSubscribe(v(this.bc,this)),zu(this,null),this.h=new Pu($u(this).options.apiKey+":"+$u(this).name),this.G=new function(t){this.a=t,this.b=_a()}($u(this).options.apiKey+":"+$u(this).name),this.U=Zu(this,function(t){var e=$u(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(xu,t.a).then(function(t){return t&&e&&(t.authDomain=e),Ru(t||{})})}(t.G,$u(t).options.authDomain).then(function(e){return(t.w=e)&&(e.ca=t.G),Du(t.G)});return Zu(t,e)}(t).then(function(){return ju(t.h,e)}).then(function(e){return e?(e.ca=t.G,t.w&&(t.w.Z||null)==(e.Z||null)?e:e.reload().then(function(){return Uu(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:Fu(t.h)})):null}).then(function(e){zu(t,e||null)});return Zu(t,n)}(this)),this.i=Zu(this,function(t){return t.U.then(function(){return t.aa()}).s(function(){}).then(function(){if(!t.l)return t.ha()}).s(function(){}).then(function(){if(!t.l){t.W=!0;var e=t.h;Sa(e.b,Vu("local"),e.a,t.ha)}})}(this)),this.W=!1,this.ha=v(this.yc,this),this.Ga=v(this.ka,this),this.pa=v(this.Tb,this),this.qa=v(this.Zb,this),this.ra=v(this.$b,this),function(t){var e=$u(t).options.authDomain,n=$u(t).options.apiKey;e&&_i()&&(t.Jb=t.U.then(function(){if(!t.l){if(t.a=Ha(e,n,$u(t).name),t.a.subscribe(t),Xu(t)&&fu(Xu(t)),t.w){fu(t.w);var r=t.w;r.na(t.$()),ou(r,t),su(r=t.w,t.A),au(r,t),t.w=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=v(this.delete,this),this.INTERNAL.logFramework=v(this.gc,this),this.o=0,ln.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.$()},set:function(t){this.na(t)},enumerable:!1}),t.V=null}(this),this.A=[]}function Hu(t){Ue.call(this,"languageCodeChanged"),this.h=t}function Gu(t){Ue.call(this,"frameworkChanged"),this.f=t}function Ku(t){return t.Jb||Ht(new Bi("auth-domain-config-required"))}function Wu(t,e){var n={};return n.apiKey=$u(t).options.apiKey,n.authDomain=$u(t).options.authDomain,n.appName=$u(t).name,t.U.then(function(){return function(t,e,n,r){var i=new iu(t,e);return n&&(i.ca=n),r&&su(i,r),i.reload().then(function(){return i})}(n,e,t.G,t.Ka())}).then(function(e){return Xu(t)&&e.uid==Xu(t).uid?(wu(Xu(t),e),t.ka(e)):(zu(t,e),fu(e),t.ka(e))}).then(function(){Yu(t)})}function zu(t,e){Xu(t)&&(function(t,e){G(t.N,function(t){return t==e})}(Xu(t),t.Ga),Ze(Xu(t),"tokenChanged",t.pa),Ze(Xu(t),"userDeleted",t.qa),Ze(Xu(t),"userInvalidated",t.ra),cu(Xu(t))),e&&(e.N.push(t.Ga),Xe(e,"tokenChanged",t.pa),Xe(e,"userDeleted",t.qa),Xe(e,"userInvalidated",t.ra),0<t.o&&lu(e)),Vi(t,"currentUser",e),e&&(e.na(t.$()),ou(e,t),su(e,t.A),au(e,t))}function Qu(t,e){var n=null,r=null;return Zu(t,e.then(function(e){return n=Mo(e),r=so(e),Wu(t,e)}).then(function(){return Fi({user:Xu(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function $u(t){return t.app}function Xu(t){return t.currentUser}function Ju(t){return Xu(t)&&Xu(t)._lat||null}function Yu(t){if(t.W){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Ju(t));if(t.R!==t.getUid()&&t.I.length)for(t.R=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](Ju(t))}}function Zu(t,e){return t.N.push(e),Kt(e,function(){H(t.N,e)}),e}function tl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new Bi("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=el.length)throw new Bi("internal-error","Argument validator received an unsupported number of arguments.");n=el[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Bi("argument-error",t+" failed: "+r)}Pu.prototype.eb=function(t){var e=null,n=this;return function(t){var e=new Bi("invalid-persistence-type"),n=new Bi("unsupported-persistence-type");t:{for(r in va)if(va[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(ci()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!bi()&&"none"!==t)throw n}}(t),Bu(this,function(){return t!=n.c.C?n.b.get(n.c,n.a).then(function(r){return e=r,Mu(n,t)}).then(function(){if(n.c=Vu(t),e)return n.b.set(n.c,e,n.a)}):qt()})},w(qu,ln),w(Hu,Ue),w(Gu,Ue),(t=qu.prototype).eb=function(t){return Zu(this,t=this.h.eb(t))},t.na=function(t){this.V===t||this.l||(this.V=t,Xo(this.c,this.V),cn(this,new Hu(this.$())))},t.$=function(){return this.V},t.Ec=function(){var t=i.navigator;this.na(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gc=function(t){this.A.push(t),Jo(this.c,e.SDK_VERSION?gi(e.SDK_VERSION,this.A):null),cn(this,new Gu(this.A))},t.Ka=function(){return W(this.A)},t.toJSON=function(){return{apiKey:$u(this).options.apiKey,authDomain:$u(this).options.authDomain,appName:$u(this).name,currentUser:Xu(this)&&Xu(this).B()}},t.ob=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.fa=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.b&&(this.b.cancel(),this.b=null),delete this.f,delete this.v)},t.va=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?v(this.Sb,this):null},t.Sb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.b&&(this.b.cancel(),this.b=null);var r=null,i=null,o=us(n.c,t).then(function(t){return r=Mo(t),i=so(t),t});return Zu(this,t=n.U.then(function(){return o}).then(function(t){return Wu(n,t)}).then(function(){return Fi({user:Xu(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}))},t.wc=function(t){if(!_i())return Ht(new Bi("operation-not-supported-in-this-environment"));var n=this,r=oo(t.providerId),i=Ai(),o=null;(!Ci()||li())&&$u(this).options.authDomain&&t.isOAuthProvider&&(o=ta($u(this).options.authDomain,$u(this).options.apiKey,$u(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null));var s=oi(o,r&&r.za,r&&r.ya);return Zu(this,r=Ku(this).then(function(e){return ja(e,s,"signInViaPopup",t,i,!!o)}).then(function(){return new Mt(function(t,e){n.fa("signInViaPopup",null,new Bi("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.b=n.a.Ca(n,"signInViaPopup",s,i)})}).then(function(t){return s&&ii(s),t?Fi(t):null}).s(function(t){throw s&&ii(s),t}))},t.xc=function(t){if(!_i())return Ht(new Bi("operation-not-supported-in-this-environment"));var e=this;return Zu(this,Ku(this).then(function(){return Bu(t=e.h,function(){return t.b.set(Lu,t.c.C,t.a)});var t}).then(function(){return e.a.Aa("signInViaRedirect",t)}))},t.aa=function(){if(!_i())return Ht(new Bi("operation-not-supported-in-this-environment"));var t=this;return Zu(this,Ku(this).then(function(){return t.a.aa()}).then(function(t){return t?Fi(t):null}))},t.hb=function(){var t=this;return Zu(this,this.i.then(function(){return Xu(t)?(zu(t,null),Fu(t.h).then(function(){Yu(t)})):qt()}))},t.yc=function(){var t=this;return ju(this.h,$u(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=Xu(t)&&e){n=Xu(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return wu(Xu(t),e),Xu(t).F();(Xu(t)||e)&&(zu(t,e),e&&(fu(e),e.ca=t.G),t.a&&t.a.subscribe(t),Yu(t))}})},t.ka=function(t){return Uu(this.h,t)},t.Tb=function(){Yu(this),this.ka(Xu(this))},t.Zb=function(){this.hb()},t.$b=function(){this.hb()},t.ac=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Xu(e))})},t.bc=function(t){var e=this;!function(t,e){t.I.push(e),Zu(t,t.i.then(function(){!t.l&&q(t.I,e)&&t.R!==t.getUid()&&(t.R=t.getUid(),e(Ju(t)))}))}(this,function(){t.next(Xu(e))})},t.ic=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){d(t)?t(Xu(i)):d(t.next)&&t.next(Xu(i))}),this.Kb(t,n,r)},t.hc=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){i.R=i.getUid(),d(t)?t(Xu(i)):d(t.next)&&t.next(Xu(i))}),this.Lb(t,n,r)},t.Vb=function(t){var e=this;return Zu(this,this.i.then(function(){return Xu(e)?Xu(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.tc=function(t){return this.Eb(t).then(function(t){return t.user})},t.Eb=function(t){var e=this;return this.i.then(function(){return Qu(e,Ls(e.c,Rs,{token:t}))}).then(function(t){var n=t.user;return _u(n,"isAnonymous",!1),e.ka(n),t})},t.Fb=function(t,e){var n=this;return this.i.then(function(){return Qu(n,Ls(n.c,xs,{email:t,password:e}))})},t.uc=function(t,e){return this.Fb(t,e).then(function(t){return t.user})},t.Ob=function(t,e){return this.qb(t,e).then(function(t){return t.user})},t.qb=function(t,e){var n=this;return this.i.then(function(){return Qu(n,Ls(n.c,ps,{email:t,password:e}))})},t.sc=function(t){return this.fb(t).then(function(t){return t.user})},t.fb=function(t){var e=this;return this.i.then(function(){return Qu(e,t.wa(e.c))})},t.gb=function(){return this.Gb().then(function(t){return t.user})},t.Gb=function(){var t=this;return this.i.then(function(){var e=Xu(t);return e&&e.isAnonymous?Fi({user:e,credential:null,additionalUserInfo:Fi({providerId:null,isNewUser:!1}),operationType:"signIn"}):Qu(t,t.c.gb()).then(function(e){var n=e.user;return _u(n,"isAnonymous",!0),t.ka(n),e})})},t.getUid=function(){return Xu(this)&&Xu(this).uid||null},t.Mb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&Xu(this)&&lu(Xu(this))},t.qc=function(t){var e=this;F(this.m,function(n){n==t&&e.o--}),0>this.o&&(this.o=0),0==this.o&&Xu(this)&&cu(Xu(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Zu(this,this.i.then(function(){e.l||q(e.m,t)&&t(Ju(e))}))},t.removeAuthTokenListener=function(t){G(this.m,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&function(t,e,n){e=Ea(t,Vu("local"),e),t.a[e]&&(G(t.a[e],function(t){return t==n}),0==t.a[e].length&&delete t.a[e]),Z(t.a)&&function(t){wa(t,"local").da(t.h),Ta(t)}(t)}((t=this.h).b,t.a,this.ha),this.a&&this.a.unsubscribe(this),e.Promise.resolve()},t.Rb=function(t){return Zu(this,function(t,e){return Ls(t,ms,{identifier:e,continueUri:wi()?ei():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.c,t))},t.Fc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Ta=function(t,e){return Zu(this,this.c.Ta(t,e).then(function(){}))},t.Ia=function(t){return Zu(this,this.c.Ia(t).then(function(t){return new function(t){var e={},n=t.email,r=t.newEmail;if(t=t.requestType,!n||!t)throw Error("Invalid provider user info!");e.fromEmail=r||null,e.email=n,Vi(this,"operation",t),Vi(this,"data",ji(e))}(t)}))},t.Sa=function(t){return Zu(this,this.c.Sa(t).then(function(){}))},t.cb=function(t,e){var n=this;return Zu(this,qt().then(function(){return"undefined"==typeof e||Z(e)?{}:to(new Ki(e))}).then(function(e){return n.c.cb(t,e)}).then(function(){}))},t.vc=function(t,e){return Zu(this,Xa(this,t,e,v(this.fb,this)))};var el="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function nl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:o}}function rl(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:s}}function il(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:f}}function ol(t,e){return{name:t||"",K:"a function",optional:!!e,M:d}}function sl(t,e){return{name:t||"",K:"null",optional:!!e,M:l}}function al(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.wa||t&&e.providerId!==t)}}}function ul(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&o(t.type)&&d(t.verify))}}}function ll(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function cl(t,e,n,r,o,s){if(Vi(this,"type","recaptcha"),this.b=this.c=null,this.m=!1,this.l=e,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[fl])throw new Bi("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[pl],!Ee(e)||!this.h&&Ee(e).hasChildNodes())throw new Bi("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Ho(t,s||null,o||null),this.o=r||function(){return null};var a=this;this.i=[];var u=this.a[hl];this.a[hl]=function(t){if(ml(a,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=vi(u,i);"function"==typeof e&&e(t)}};var l=this.a[dl];this.a[dl]=function(){if(ml(a,null),"function"==typeof l)l();else if("string"==typeof l){var t=vi(l,i);"function"==typeof t&&t()}}}var hl="callback",dl="expired-callback",fl="sitekey",pl="size";function ml(t,e){for(var n=0;n<t.i.length;n++)try{t.i[n](e)}catch(t){}}function gl(t,e){return t.g.push(e),Kt(e,function(){H(t.g,e)}),e}function yl(t){if(t.m)throw new Bi("internal-error","RecaptchaVerifier instance has been destroyed.")}(t=cl.prototype).xa=function(){var t=this;return this.c?this.c:this.c=gl(this,qt().then(function(){if(wi())return ai();throw new Bi("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return function(t,e){return new Mt(function(n,r){Oi()?!i.grecaptcha||e!==t.c&&!t.b?(i[t.a]=function(){if(i.grecaptcha){t.c=e;var o=i.grecaptcha.render;i.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},n()}else r(new Bi("internal-error"));delete i[t.a]},qt(Kr(le(vl,{onload:t.a,hl:e||""}))).s(function(){r(new Bi("internal-error","Unable to load external reCAPTCHA dependencies!"))})):n():r(new Bi("network-request-failed"))})}(_l(),t.o())}).then(function(){return Ls(t.u,Es,{})}).then(function(e){t.a[fl]=e.recaptchaSiteKey}).s(function(e){throw t.c=null,e}))},t.render=function(){yl(this);var t=this;return gl(this,this.xa().then(function(){if(null===t.b){var e=t.l;if(!t.h){var n=Ee(e);e=function(t,e,n){var r=arguments,i=document,s=String(r[0]),a=r[1];if(!ne&&a&&(a.name||a.type)){if(s=["<",s],a.name&&s.push(' name="',T(a.name),'"'),a.type){s.push(' type="',T(a.type),'"');var u={};rt(u,a),delete u.type,a=u}s.push(">"),s=s.join("")}return s=i.createElement(s),a&&(o(a)?s.className=a:c(a)?s.className=a.join(" "):Ce(s,a)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(o(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var s=n[i];!h(s)||f(s)&&0<s.nodeType?r(s):F(Te(s)?W(s):s,r)}}(i,s,r),s}("DIV"),n.appendChild(e)}t.b=grecaptcha.render(e,t.a)}return t.b}))},t.verify=function(){yl(this);var t=this;return gl(this,this.render().then(function(e){return new Mt(function(n){var r=grecaptcha.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){G(t.i,function(t){return t==e})}(t,i),n(e))};t.i.push(i),t.h&&grecaptcha.execute(t.b)}})}))},t.reset=function(){yl(this),null!==this.b&&grecaptcha.reset(this.b)},t.clear=function(){yl(this),this.m=!0,_l().b--;for(var t=0;t<this.g.length;t++)this.g[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=Ee(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}};var vl=se("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),bl=null;function _l(){return bl||(bl=new function(){this.b=i.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}),bl}function wl(t,n,r){try{this.f=r||e.app()}catch(t){throw new Bi("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new Bi("invalid-api-key");r=this.f.options.apiKey;var i=this,o=null;try{o=this.f.auth().Ka()}catch(t){}o=e.SDK_VERSION?gi(e.SDK_VERSION,o):null,cl.call(this,r,t,n,function(){try{var t=i.f.auth().$()}catch(e){t=null}return t},o,Bs(Fs))}function El(t,e){for(var n in e){var r=e[n].name;t[r]=Sl(r,t[n],e[n].j)}}function Cl(t,e,n,r){t[e]=Sl(e,n,r)}function Sl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return tl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}w(wl,cl),El(qu.prototype,{Sa:{name:"applyActionCode",j:[nl("code")]},Ia:{name:"checkActionCode",j:[nl("code")]},Ta:{name:"confirmPasswordReset",j:[nl("code"),nl("newPassword")]},Ob:{name:"createUserWithEmailAndPassword",j:[nl("email"),nl("password")]},qb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[nl("email"),nl("password")]},Rb:{name:"fetchProvidersForEmail",j:[nl("email")]},aa:{name:"getRedirectResult",j:[]},hc:{name:"onAuthStateChanged",j:[ll(il(),ol(),"nextOrObserver"),ol("opt_error",!0),ol("opt_completed",!0)]},ic:{name:"onIdTokenChanged",j:[ll(il(),ol(),"nextOrObserver"),ol("opt_error",!0),ol("opt_completed",!0)]},cb:{name:"sendPasswordResetEmail",j:[nl("email"),ll(il("opt_actionCodeSettings",!0),sl(null,!0),"opt_actionCodeSettings",!0)]},eb:{name:"setPersistence",j:[nl("persistence")]},fb:{name:"signInAndRetrieveDataWithCredential",j:[al()]},gb:{name:"signInAnonymously",j:[]},Gb:{name:"signInAnonymouslyAndRetrieveData",j:[]},sc:{name:"signInWithCredential",j:[al()]},tc:{name:"signInWithCustomToken",j:[nl("token")]},Eb:{name:"signInAndRetrieveDataWithCustomToken",j:[nl("token")]},uc:{name:"signInWithEmailAndPassword",j:[nl("email"),nl("password")]},Fb:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[nl("email"),nl("password")]},vc:{name:"signInWithPhoneNumber",j:[nl("phoneNumber"),ul()]},wc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},xc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},hb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[nl(null,!0)]},Ec:{name:"useDeviceLanguage",j:[]},Fc:{name:"verifyPasswordResetCode",j:[nl("code")]}}),function(t,e){for(var n in e){var r=e[n].name;if(r!==n){var i=e[n].Nb;Object.defineProperty(t,r,{get:function(){return this[n]},set:function(t){tl(r,[i],[t],!0),this[n]=t},enumerable:!0})}}}(qu.prototype,{lc:{name:"languageCode",Nb:ll(nl(),sl(),"languageCode")}}),(qu.Persistence=va).LOCAL="local",qu.Persistence.SESSION="session",qu.Persistence.NONE="none",El(iu.prototype,{delete:{name:"delete",j:[]},F:{name:"getIdToken",j:[rl()]},getToken:{name:"getToken",j:[rl()]},Xa:{name:"linkAndRetrieveDataWithCredential",j:[al()]},cc:{name:"linkWithCredential",j:[al()]},dc:{name:"linkWithPhoneNumber",j:[nl("phoneNumber"),ul()]},ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Za:{name:"reauthenticateAndRetrieveDataWithCredential",j:[al()]},mc:{name:"reauthenticateWithCredential",j:[al()]},nc:{name:"reauthenticateWithPhoneNumber",j:[nl("phoneNumber"),ul()]},oc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},bb:{name:"sendEmailVerification",j:[ll(il("opt_actionCodeSettings",!0),sl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[nl(null,!0)]},Cc:{name:"unlink",j:[nl("provider")]},kb:{name:"updateEmail",j:[nl("email")]},lb:{name:"updatePassword",j:[nl("password")]},Dc:{name:"updatePhoneNumber",j:[al("phone")]},mb:{name:"updateProfile",j:[il("profile")]}}),El(Mt.prototype,{s:{name:"catch"},then:{name:"then"}}),El($a.prototype,{confirm:{name:"confirm",j:[nl("verificationCode")]}}),Cl(Oo,"credential",function(t,e){return new No(t,e)},[nl("email"),nl("password")]),El(wo.prototype,{sa:{name:"addScope",j:[nl("scope")]},Ba:{name:"setCustomParameters",j:[il("customOAuthParameters")]}}),Cl(wo,"credential",Eo,[ll(nl(),il(),"token")]),El(Co.prototype,{sa:{name:"addScope",j:[nl("scope")]},Ba:{name:"setCustomParameters",j:[il("customOAuthParameters")]}}),Cl(Co,"credential",So,[ll(nl(),il(),"token")]),El(To.prototype,{sa:{name:"addScope",j:[nl("scope")]},Ba:{name:"setCustomParameters",j:[il("customOAuthParameters")]}}),Cl(To,"credential",Io,[ll(nl(),ll(il(),sl()),"idToken"),ll(nl(),sl(),"accessToken",!0)]),El(Ao.prototype,{Ba:{name:"setCustomParameters",j:[il("customOAuthParameters")]}}),Cl(Ao,"credential",ko,[ll(nl(),il(),"token"),nl("secret",!0)]),El(_o.prototype,{sa:{name:"addScope",j:[nl("scope")]},credential:{name:"credential",j:[ll(nl(),sl(),"idToken",!0),ll(nl(),sl(),"accessToken",!0)]},Ba:{name:"setCustomParameters",j:[il("customOAuthParameters")]}}),Cl(Do,"credential",Po,[nl("verificationId"),nl("verificationCode")]),El(Do.prototype,{Qa:{name:"verifyPhoneNumber",j:[nl("phoneNumber"),ul()]}}),El(Bi.prototype,{toJSON:{name:"toJSON",j:[nl(null,!0)]}}),El(jo.prototype,{toJSON:{name:"toJSON",j:[nl(null,!0)]}}),El(Fo.prototype,{toJSON:{name:"toJSON",j:[nl(null,!0)]}}),El(wl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if("undefined"==typeof e||!e.INTERNAL||!e.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:qu,Error:Bi};Cl(t,"EmailAuthProvider",Oo,[]),Cl(t,"FacebookAuthProvider",wo,[]),Cl(t,"GithubAuthProvider",Co,[]),Cl(t,"GoogleAuthProvider",To,[]),Cl(t,"TwitterAuthProvider",Ao,[]),Cl(t,"OAuthProvider",_o,[nl("providerId")]),Cl(t,"PhoneAuthProvider",Do,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof qu)}}]),Cl(t,"RecaptchaVerifier",wl,[ll(nl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),il("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e.app.App)}}]),e.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:v((t=new qu(t)).getUid,t),getToken:v(t.Vb,t),addAuthTokenListener:v(t.Mb,t),removeAuthTokenListener:v(t.qc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),e.INTERNAL.extendNamespace({User:iu})}()}).call("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(e,n("fRUx"))},Thd6:function(t,e,n){"use strict";e.a=function(){return function(t){return t.lift(new class{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new class extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o}}(t))}};var r=n("WJ2g")},Tmcl:function(t,e,n){"use strict";function r(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}Object.defineProperty(e,"__esModule",{value:!0}),e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.errorPrefix=r,e.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(r(t,e,i)+"must be a valid firebase namespace.")},e.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(r(t,e,i)+"must be a valid function.")},e.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(r(t,e,i)+"must be a valid context object.")}},U4XL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("/byE");e.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(e.getUA())},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isNodeSdk=function(){return!0===r.CONSTANTS.NODE_CLIENT||!0===r.CONSTANTS.NODE_ADMIN}},WH8D:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jsonEval=function(t){return JSON.parse(t)},e.stringify=function(t){return JSON.stringify(t)}},WJ2g:function(t,e,n){"use strict";var r=n("GcAb"),i=n("0mJR"),o=n("gwp7"),s=n("xEcM");class a extends i.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=o.a;break;case 1:if(!t){this.destination=o.a;break}if("object"==typeof t){t instanceof a?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new u(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new u(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new a(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:t,_parents:e}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}e.a=a;class u extends a{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==o.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}}__tryOrSetError(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},Xp63:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSubscribe=function(t,e){var n=new r(t,e);return n.subscribe.bind(n)};var r=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=i),void 0===r.error&&(r.error=i),void 0===r.complete&&(r.complete=i);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function i(){}e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}},XtH8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("JEJ4"),i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="[DEFAULT]",s=[],a=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e,this.options_=Object(r.deepCopy)(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){s.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){s=s.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;Object(r.deepExtend)(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(s.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),s=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function u(t,e){throw l.create(t,e)}a.prototype.name&&a.prototype.options||a.prototype.delete||console.log("dc");var l=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."});n.d(e,"firebase",function(){return c});var c=function t(){var e={},n={},s={},l={__esModule:!0,initializeApp:function(t,n){void 0===n?n=o:"string"==typeof n&&""!==n||u("bad-app-name",{name:n+""}),i(e,n)&&u("duplicate-app",{name:n});var r=new a(t,n,l);return e[n]=r,d(r,"create"),r},app:c,apps:null,Promise,SDK_VERSION:"4.9.0",INTERNAL:{registerService:function(t,e,i,o,d){n[t]&&u("duplicate-service",{name:t}),n[t]=e,o&&(s[t]=o,h().forEach(function(t){o("create",t)}));var f=function(e){return void 0===e&&(e=c()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};return void 0!==i&&Object(r.deepExtend)(f,i),l[t]=f,a.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,d?e:[])},f},createFirebaseNamespace:t,extendNamespace:function(t){Object(r.deepExtend)(l,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){d(e[t],"delete"),delete e[t]},factories:n,useAsService:f,Promise,deepExtend:r.deepExtend}};function c(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function d(t,e){Object.keys(n).forEach(function(n){var r=f(0,n);null!==r&&s[r]&&s[r](e,t)})}function f(t,e){return"serverAuth"===e?null:e}return Object(r.patchProperty)(l,"default",l),Object.defineProperty(l,"apps",{get:h}),Object(r.patchProperty)(c,"App",a),l}();e.default=c},YuZA:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="YuZA"},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("1GK5");class i{}class o{constructor(){this.title="SCORE!"}}var s=n("05/P"),a=n("P6aB"),u=n("ElHI"),l=n("t0Wy"),c=n("7wpj");class h extends s.a{constructor(t,e){super(),this.sources=t,this.resultSelector=e}static create(...t){if(null===t||0===arguments.length)return new a.a;let e=null;return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(u.a)(t[0])&&(t=t[0]),0===t.length?new a.a:new h(t,e)}_subscribe(t){return new d(t,this.sources,this.resultSelector)}}class d extends c.a{constructor(t,e,n){super(t),this.sources=e,this.resultSelector=n,this.completed=0,this.haveValues=0;const r=e.length;this.total=r,this.values=new Array(r);for(let i=0;i<r;i++){const t=e[i],n=Object(l.a)(this,t,null,i);n&&(n.outerIndex=i,this.add(n))}}notifyNext(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)}notifyComplete(t){const e=this.destination,{haveValues:n,resultSelector:r,values:i}=this,o=i.length;if(t._hasValue){if(this.completed++,this.completed===o){if(n===o){const t=r?r.apply(this,i):i;e.next(t)}e.complete()}}else e.complete()}}const f=h.create;var p=n("2K0D");class m extends s.a{constructor(t,e){super(),this.promise=t,this.scheduler=e}static create(t,e){return new m(t,e)}_subscribe(t){const e=this.promise,n=this.scheduler;if(null==n)this._isScalar?t.closed||(t.next(this.value),t.complete()):e.then(e=>{this.value=e,this._isScalar=!0,t.closed||(t.next(e),t.complete())},e=>{t.closed||t.error(e)}).then(null,t=>{p.a.setTimeout(()=>{throw t})});else if(this._isScalar){if(!t.closed)return n.schedule(g,0,{value:this.value,subscriber:t})}else e.then(e=>{this.value=e,this._isScalar=!0,t.closed||t.add(n.schedule(g,0,{value:e,subscriber:t}))},e=>{t.closed||t.add(n.schedule(y,0,{err:e,subscriber:t}))}).then(null,t=>{p.a.setTimeout(()=>{throw t})})}}function g(t){const{value:e,subscriber:n}=t;n.closed||(n.next(e),n.complete())}function y(t){const{err:e,subscriber:n}=t;n.closed||n.error(e)}const v=m.create;var b=n("WJ2g");function _(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new w(t,e))}}class w{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new E(t,this.project,this.thisArg))}}class E extends b.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)}}function C(t,e){return _(t,e)(this)}class S{}const T=new r.o("Location Initialized");class I{}const A=new r.o("appBaseHref");class k{constructor(t){this._subject=new r.m,this._platformStrategy=t;const e=this._platformStrategy.getBaseHref();this._baseHref=k.stripTrailingSlash(N(e)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+k.normalizeQueryParams(e))}normalize(t){return k.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,N(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e=""){this._platformStrategy.pushState(null,"",t,e)}replaceState(t,e=""){this._platformStrategy.replaceState(null,"",t,e)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}static normalizeQueryParams(t){return t&&"?"!==t[0]?"?"+t:t}static joinWithSlash(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}static stripTrailingSlash(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}function N(t){return t.replace(/\/index.html$/,"")}class O extends I{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=k.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+k.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+k.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class R extends I{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return k.joinWithSlash(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+k.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+k.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+k.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}var x=["en",[["a","p"],["AM","PM"]],[["AM","PM"],,],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",,"{1} 'at' {0}"],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];const D={},P=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),M=new r.o("UseV4Plurals");class L{}class V extends L{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){const e=t.toLowerCase().replace(/_/g,"-");let n=D[e];if(n)return n;const r=e.split("-")[0];if(n=D[r])return n;if("en"===r)return x;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[17]}(e||this.locale)(t)){case P.Zero:return"zero";case P.One:return"one";case P.Two:return"two";case P.Few:return"few";case P.Many:return"many";default:return"other"}}}function U(t,e){for(const n of(e=encodeURIComponent(e),t.split(";"))){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class F{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class j{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._differ=null}set ngForTrackBy(t){Object(r.T)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngOnChanges(t){if("ngForOf"in t){const n=t.ngForOf.currentValue;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e}ngDoCheck(){if(this._differ){const t=this._differ.diff(this.ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new F(null,this.ngForOf,-1,-1),r),i=new B(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(n);else{const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new B(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}}class B{constructor(t,e){this.record=t,this.view=e}}class q{constructor(t,e){this._viewContainer=t,this._context=new H,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}class H{constructor(){this.$implicit=null,this.ngIf=null}}function G(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r._20)(t)}'`)}const K=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,W=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,z={yMMMdjms:it(rt([et("year",1),nt("month",3),et("day",1),et("hour",1),et("minute",1),et("second",1)])),yMdjm:it(rt([et("year",1),et("month",1),et("day",1),et("hour",1),et("minute",1)])),yMMMMEEEEd:it(rt([et("year",1),nt("month",4),nt("weekday",4),et("day",1)])),yMMMMd:it(rt([et("year",1),nt("month",4),et("day",1)])),yMMMd:it(rt([et("year",1),nt("month",3),et("day",1)])),yMd:it(rt([et("year",1),et("month",1),et("day",1)])),jms:it(rt([et("hour",1),et("second",1),et("minute",1)])),jm:it(rt([et("hour",1),et("minute",1)]))},Q={yyyy:it(et("year",4)),yy:it(et("year",2)),y:it(et("year",1)),MMMM:it(nt("month",4)),MMM:it(nt("month",3)),MM:it(et("month",2)),M:it(et("month",1)),LLLL:it(nt("month",4)),L:it(nt("month",1)),dd:it(et("day",2)),d:it(et("day",1)),HH:X(J(it(tt(et("hour",2),!1)))),H:J(it(tt(et("hour",1),!1))),hh:X(J(it(tt(et("hour",2),!0)))),h:J(it(tt(et("hour",1),!0))),jj:it(et("hour",2)),j:it(et("hour",1)),mm:X(it(et("minute",2))),m:it(et("minute",1)),ss:X(it(et("second",2))),s:it(et("second",1)),sss:it(et("second",3)),EEEE:it(nt("weekday",4)),EEE:it(nt("weekday",3)),EE:it(nt("weekday",2)),E:it(nt("weekday",1)),a:($=it(tt(et("hour",1),!0)),function(t,e){return $(t,e).split(" ")[1]}),Z:Z("short"),z:Z("long"),ww:it({}),w:it({}),G:it(nt("era",1)),GG:it(nt("era",2)),GGG:it(nt("era",3)),GGGG:it(nt("era",4))};var $;function X(t){return function(e,n){const r=t(e,n);return 1==r.length?"0"+r:r}}function J(t){return function(e,n){return t(e,n).split(" ")[0]}}function Y(t,e,n){return new Intl.DateTimeFormat(e,n).format(t).replace(/[\u200e\u200f]/g,"")}function Z(t){const e={hour:"2-digit",hour12:!1,timeZoneName:t};return function(t,n){const r=Y(t,n,e);return r?r.substring(3):""}}function tt(t,e){return t.hour12=e,t}function et(t,e){return function(){var n={};return n[t]=2===e?"2-digit":"numeric",n}()}function nt(t,e){const n={};return n[t]=e<4?e>1?"short":"narrow":"long",n}function rt(t){return t.reduce((t,e)=>Object.assign({},t,e),{})}function it(t){return(e,n)=>Y(e,n,t)}const ot=new Map;class st{static format(t,e,n){return function(t,e,n){const r=z[t];if(r)return r(e,n);const i=t;let o=ot.get(i);if(!o){let e;o=[],W.exec(t);let n=t;for(;n;)(e=W.exec(n))?n=(o=o.concat(e.slice(1))).pop():(o.push(n),n=null);ot.set(i,o)}return o.reduce((t,r)=>{const i=Q[r];return t+(i?i(e,n):"''"===(r=r)?"'":r.replace(/(^'|'$)/g,"").replace(/''/g,"'"))},"")}(n,t,e)}}class at{constructor(t){this._locale=t}transform(t,e="mediumDate"){if(null==t||""===t||t!=t)return null;let n;if("string"==typeof t&&(t=t.trim()),ut(t))n=t;else if(isNaN(t-parseFloat(t)))if("string"==typeof t&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,r,i]=t.split("-").map(t=>parseInt(t,10));n=new Date(e,r-1,i)}else n=new Date(t);else n=new Date(parseFloat(t));if(!ut(n)){let e;if("string"!=typeof t||!(e=t.match(K)))throw G(at,t);n=function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=+(t[9]+t[10]),r=+(t[9]+t[11])),(t[8]?e.setUTCFullYear:e.setFullYear).call(e,+t[1],+t[2]-1,+t[3]);const o=+(t[4]||"0")-n,s=+(t[5]||"0")-r,a=+(t[6]||"0"),u=Math.round(1e3*parseFloat("0."+(t[7]||0)));return i.call(e,o,s,a,u),e}(e)}return st.format(n,this._locale,at._ALIASES[e]||e)}}function ut(t){return t instanceof Date&&!isNaN(t.valueOf())}at._ALIASES={medium:"yMMMdjms",short:"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},new class{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}},new class{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}};class lt{transform(t){if(!t)return t;if("string"!=typeof t)throw G(lt,t);return t.toUpperCase()}}class ct{}const ht=new r.o("DocumentToken");new r.L("5.2.2");let dt=null;function ft(){return dt}class pt{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}class mt extends pt{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(e).forEach(n=>{null!=this.getStyle(t,n)&&(this._transitionEnd=e[n])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const gt={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},yt=3,vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};let _t;r._4.Node&&(_t=r._4.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});class wt extends mt{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new wt,dt||(dt=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return gt}contains(t,e){return _t.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const r=this.getStyle(t,e)||"";return n?r==n:r.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,r){t.setAttributeNS(e,n,r)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),t.location===yt&&bt.hasOwnProperty(e)&&(e=bt[e]))}return vt[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Ct||(Ct=document.querySelector("base"))?Ct.getAttribute("href"):null;return null==e?null:(n=e,Et||(Et=document.createElement("a")),Et.setAttribute("href",n),"/"===Et.pathname.charAt(0)?Et.pathname:"/"+Et.pathname);var n}resetBaseElement(){Ct=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return U(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let Et,Ct=null;const St=ht;function Tt(){return!!window.history.pushState}class It extends S{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=ft().getLocation(),this._history=ft().getHistory()}getBaseHrefFromDOM(){return ft().getBaseHref(this._doc)}onPopState(t){ft().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){ft().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Tt()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Tt()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}}It.ctorParameters=(()=>[{type:void 0,decorators:[{type:r.n,args:[St]}]}]);class At{constructor(t){this._doc=t,this._dom=ft()}addTag(t,e=!1){return t?this._getOrCreateElement(t,e):null}addTags(t,e=!1){return t?t.reduce((t,n)=>(n&&t.push(this._getOrCreateElement(n,e)),t),[]):[]}getTag(t){return t&&this._dom.querySelector(this._doc,`meta[${t}]`)||null}getTags(t){if(!t)return[];const e=this._dom.querySelectorAll(this._doc,`meta[${t}]`);return e?[].slice.call(e):[]}updateTag(t,e){if(!t)return null;e=e||this._parseSelector(t);const n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)}removeTag(t){this.removeTagElement(this.getTag(t))}removeTagElement(t){t&&this._dom.remove(t)}_getOrCreateElement(t,e=!1){if(!e){const e=this._parseSelector(t),n=this.getTag(e);if(n&&this._containsAttributes(t,n))return n}const n=this._dom.createElement("meta");this._setMetaElementAttributes(t,n);const r=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(r,n),n}_setMetaElementAttributes(t,e){return Object.keys(t).forEach(n=>this._dom.setAttribute(e,n,t[n])),e}_parseSelector(t){const e=t.name?"name":"property";return`${e}="${t[e]}"`}_containsAttributes(t,e){return Object.keys(t).every(n=>this._dom.getAttribute(e,n)===t[n])}}const kt=new r.o("TRANSITION_ID"),Nt=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=ft();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[kt,St,r.p],multi:!0}];class Ot{static init(){Object(r.V)(new Ot)}addToWindow(t){r._4.getAngularTestability=((e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r}),r._4.getAllAngularTestabilities=(()=>t.getAllTestabilities()),r._4.getAllAngularRootElements=(()=>t.getAllRootElements()),r._4.frameworkStabilizers||(r._4.frameworkStabilizers=[]),r._4.frameworkStabilizers.push(t=>{const e=r._4.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,0==--n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?ft().isShadowRoot(e)?this.findTestabilityInTree(t,ft().getHost(e),!0):this.findTestabilityInTree(t,ft().parentElement(e),!0):null}}class Rt{constructor(t){this._doc=t}getTitle(){return ft().getTitle(this._doc)}setTitle(t){ft().setTitle(this._doc,t)}}function xt(t,e){"undefined"!=typeof COMPILED&&COMPILED||((r._4.ng=r._4.ng||{})[t]=e)}const Dt={ApplicationRef:r.g,NgZone:r.x};function Pt(t){return Object(r.S)(t)}new r.y;const Mt=new r.o("EventManagerPlugins");class Lt{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}class Vt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=ft().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}class Ut{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}class Ft extends Ut{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>ft().remove(t))}}const jt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bt=/%COMP%/g,qt="_nghost-%COMP%",Ht="_ngcontent-%COMP%";function Gt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Gt(t,i,n):(i=i.replace(Bt,t),n.push(i))}return n}function Kt(t){return e=>{!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}class Wt{constructor(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new zt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.N.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Xt(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.N.Native:return new Jt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Gt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class zt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(jt[e],t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t){let e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error(`The selector "${t}" did not match any elements`);return e.textContent="",e}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=`${r}:${e}`;const i=jt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=jt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.D.DashCase?t.style.setProperty(e,n,i&r.D.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.D.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){$t(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return $t(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Kt(n)):this.eventManager.addEventListener(t,e,Kt(n))}}const Qt="@".charCodeAt(0);function $t(t,e){if(t.charCodeAt(0)===Qt)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class Xt extends zt{constructor(t,e,n){super(t),this.component=n;const r=Gt(n.id,n.styles,[]);e.addStyles(r),this.contentAttr=Ht.replace(Bt,n.id),this.hostAttr=qt.replace(Bt,n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Jt extends zt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Gt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const Yt="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Zt=Yt("addEventListener"),te=Yt("removeEventListener"),ee={},ne="__zone_symbol__propagationStopped",re="undefined"!=typeof Zone&&Zone[Yt("BLACK_LISTED_EVENTS")];let ie;re&&(ie={},re.forEach(t=>{ie[t]=t}));const oe=function(t){return!!ie&&ie.hasOwnProperty(t)},se=function(t){const e=ee[t.type];if(!e)return;const n=this[e];if(!n)return;const r=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[ne];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}}},ae={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ue=new r.o("HammerGestureConfig");class le{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t);for(const n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e}}const ce=["alt","control","meta","shift"],he={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};class de extends Vt{constructor(t){super(t)}supports(t){return null!=de.parseEventName(t)}addEventListener(t,e,n){const r=de.parseEventName(e),i=de.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ft().onAndCancel(t,r.domEventName,i))}static parseEventName(t){const e=t.toLowerCase().split("."),n=e.shift();if(0===e.length||"keydown"!==n&&"keyup"!==n)return null;const r=de._normalizeKey(e.pop());let i="";if(ce.forEach(t=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),i+=t+".")}),i+=r,0!=e.length||0===r.length)return null;const o={};return o.domEventName=n,o.fullKey=i,o}static getEventFullKey(t){let e="",n=ft().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ce.forEach(r=>{r!=n&&(0,he[r])(t)&&(e+=r+".")}),e+=n}static eventCallback(t,e,n){return r=>{de.getEventFullKey(r)===t&&n.runGuarded(()=>e(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}const fe=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,pe=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function me(t){return(t=String(t)).match(fe)||t.match(pe)?t:(Object(r.T)()&&ft().log(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}let ge=null,ye=null;function ve(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function be(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const _e=ve("area,br,col,hr,img,wbr"),we=ve("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ee=ve("rp,rt"),Ce=be(Ee,we),Se=be(we,ve("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Te=be(Ee,ve("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ie=be(_e,Se,Te,Ce),Ae=ve("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ke=ve("srcset"),Ne=ve("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Oe=be(Ae,ke,Ne);class Re{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild;for(;e;)if(ye.isElementNode(e)?this.startElement(e):ye.isTextNode(e)?this.chars(ye.nodeValue(e)):this.sanitizedSomething=!0,ye.firstChild(e))e=ye.firstChild(e);else for(;e;){ye.isElementNode(e)&&this.endElement(e);let t=xe(e,ye.nextSibling(e));if(t){e=t;break}e=xe(e,ye.parentElement(e))}return this.buf.join("")}startElement(t){const e=ye.nodeName(t).toLowerCase();var n;Ie.hasOwnProperty(e)?(this.buf.push("<"),this.buf.push(e),ye.attributeMap(t).forEach((t,e)=>{const r=e.toLowerCase();Oe.hasOwnProperty(r)?(Ae[r]&&(t=me(t)),ke[r]&&(n=t,t=(n=String(n)).split(",").map(t=>me(t.trim())).join(", ")),this.buf.push(" "),this.buf.push(e),this.buf.push('="'),this.buf.push(Me(t)),this.buf.push('"')):this.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0}endElement(t){const e=ye.nodeName(t).toLowerCase();Ie.hasOwnProperty(e)&&!_e.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Me(t))}}function xe(t,e){if(e&&ye.contains(t,e))throw new Error(`Failed to sanitize html because the element is clobbered: ${ye.getOuterHTML(t)}`);return e}const De=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pe=/([^\#-~ |!])/g;function Me(t){return t.replace(/&/g,"&amp;").replace(De,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Pe,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Le(t){for(const e of(ye.attributeMap(t).forEach((e,n)=>{"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||ye.removeAttribute(t,n)}),ye.childNodesAsList(t)))ye.isElementNode(e)&&Le(e)}const Ve=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Ue=/^url\(([^)]+)\)$/;class Fe{}class je extends Fe{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.F.NONE:return e;case r.F.HTML:return e instanceof qe?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){try{const n=function(){if(ge)return ge;const t=(ye=ft()).createElement("template");if("content"in t)return t;const e=ye.createHtmlDocument();if(null==(ge=ye.querySelector(e,"body"))){const t=ye.createElement("html",e);ge=ye.createElement("body",e),ye.appendChild(t,ge),ye.appendChild(e,t)}return ge}();let i=e?String(e):"",o=5,s=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,ye.setInnerHTML(n,i=s),t.documentMode&&Le(n),s=ye.getInnerHTML(n)}while(i!==s);const a=new Re,u=a.sanitizeChildren(ye.getTemplateContent(n)||n),l=ye.getTemplateContent(n)||n;for(const t of ye.childNodesAsList(l))ye.removeChild(l,t);return Object(r.T)()&&a.sanitizedSomething&&ye.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}catch(t){throw ge=null,t}}(this._doc,String(e)));case r.F.STYLE:return e instanceof He?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";const e=t.match(Ue);return e&&me(e[1])===e[1]||t.match(Ve)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Object(r.T)()&&ft().log(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}(e));case r.F.SCRIPT:if(e instanceof Ge)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case r.F.URL:return e instanceof We||e instanceof Ke?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),me(String(e)));case r.F.RESOURCE_URL:if(e instanceof We)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof Be)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(t){return new qe(t)}bypassSecurityTrustStyle(t){return new He(t)}bypassSecurityTrustScript(t){return new Ge(t)}bypassSecurityTrustUrl(t){return new Ke(t)}bypassSecurityTrustResourceUrl(t){return new We(t)}}class Be{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class qe extends Be{getTypeName(){return"HTML"}}class He extends Be{getTypeName(){return"Style"}}class Ge extends Be{getTypeName(){return"Script"}}class Ke extends Be{getTypeName(){return"URL"}}class We extends Be{getTypeName(){return"ResourceURL"}}const ze=[{provide:r.z,useValue:"browser"},{provide:r.A,useValue:function(){wt.makeCurrent(),Ot.init()},multi:!0},{provide:S,useClass:It,deps:[St]},{provide:St,useFactory:function(){return document},deps:[]}],Qe=Object(r.P)(r.U,"browser",ze);function $e(){return new r.l}class Xe{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:Xe,providers:[{provide:r.c,useValue:t.appId},{provide:kt,useExisting:r.c},Nt]}}}"undefined"!=typeof window&&window,new r.L("5.2.2");class Je{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Ye extends Je{get formDirective(){return null}get path(){return null}}function Ze(t){return null==t||0===t.length}const tn=new r.o("NgValidators"),en=(new r.o("NgAsyncValidators"),/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/);class nn{static min(t){return e=>{if(Ze(e.value)||Ze(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Ze(e.value)||Ze(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Ze(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return en.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(Ze(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return nn.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Ze(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(rn);return 0==e.length?null:function(t){return sn(function(t,n){return e.map(e=>e(t))}(t))}}static composeAsync(t){if(!t)return null;const e=t.filter(rn);return 0==e.length?null:function(t){const n=function(t,n){return e.map(e=>e(t))}(t).map(on);return C.call(f(n),sn)}}}function rn(t){return null!=t}function on(t){const e=Object(r._8)(t)?v(t):t;if(!Object(r._7)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function sn(t){const e=t.reduce((t,e)=>null!=e?Object.assign({},t,e):t,{});return 0===Object.keys(e).length?null:e}const an=new r.o("NgValueAccessor");Object(r.R)(()=>un);class un{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=(t=>{}),this.onTouched=(()=>{})}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}Object(r.R)(()=>cn);const ln=new r.o("CompositionEventMode");class cn{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=(t=>{}),this.onTouched=(()=>{}),this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=ft()?ft().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}function hn(t){return t.validate?e=>t.validate(e):t}function dn(t){return t.validate?e=>t.validate(e):t}Object(r.R)(()=>fn);class fn{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=(t=>{}),this.onTouched=(()=>{})}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=(e=>{t(""==e?null:parseFloat(e))})}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}function pn(){throw new Error("unimplemented")}class mn extends Je{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return pn()}get asyncValidator(){return pn()}}Object(r.R)(()=>yn);class gn{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}class yn{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=(()=>{}),this.onTouched=(()=>{})}ngOnInit(){this._control=this._injector.get(mn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=(()=>{t(this.value),this._registry.select(this)})}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}Object(r.R)(()=>vn);class vn{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=(t=>{}),this.onTouched=(()=>{})}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=(e=>{t(""==e?null:parseFloat(e))})}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}function bn(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}Object(r.R)(()=>_n);class _n{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=(t=>{}),this.onTouched=(()=>{}),this._compareWith=r._9}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=bn(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=(e=>{this.value=this._getOptionValue(e),t(this.value)})}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}class wn{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(bn(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function En(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}Object(r.R)(()=>Cn);class Cn{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=(t=>{}),this.onTouched=(()=>{}),this._compareWith=r._9}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=((t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)})}else e=((t,e)=>{t._setSelected(!1)});this._optionMap.forEach(e)}registerOnChange(t){this.onChange=(e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)})}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}class Sn{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(En(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(En(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function Tn(t,e){return[...e.path,t]}function In(t,e){t||On(e,"Cannot find control with"),e.valueAccessor||On(e,"No value accessor for form control with"),t.validator=nn.compose([t.validator,e.validator]),t.asyncValidator=nn.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&An(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&An(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function An(t,e){e.viewToModelUpdate(t._pendingValue),t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),t._pendingChange=!1}function kn(t,e){null==t&&On(e,"Cannot find control with"),t.validator=nn.compose([t.validator,e.validator]),t.asyncValidator=nn.composeAsync([t.asyncValidator,e.asyncValidator])}function Nn(t){return On(t,"There is no FormControl instance attached to form control element with")}function On(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function Rn(t){return null!=t?nn.compose(t.map(hn)):null}function xn(t){return null!=t?nn.composeAsync(t.map(dn)):null}function Dn(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object(r._9)(e,n.currentValue)}const Pn=[un,vn,fn,_n,Cn,yn];function Mn(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Ln(t,e){if(!e)return null;let n=void 0,r=void 0,i=void 0;var o;return e.forEach(e=>{e.constructor===cn?n=e:(o=e,Pn.some(t=>o.constructor===t)?(r&&On(t,"More than one built-in value accessor matches form control with"),r=e):(i&&On(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(On(t,"No valid value accessor for form control with"),null)}function Vn(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Un extends Ye{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Tn(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Rn(this._validators)}get asyncValidator(){return xn(this._asyncValidators)}_checkParentType(){}}class Fn{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class jn extends Fn{constructor(t){super(t)}}class Bn extends Fn{constructor(t){super(t)}}const qn="VALID",Hn="INVALID",Gn="PENDING",Kn="DISABLED";function Wn(t){const e=Qn(t)?t.validators:t;return Array.isArray(e)?Rn(e):e||null}function zn(t,e){const n=Qn(e)?e.asyncValidators:t;return Array.isArray(n)?xn(n):n||null}function Qn(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class $n{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=(()=>{}),this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===qn}get invalid(){return this.status===Hn}get pending(){return this.status==Gn}get disabled(){return this.status===Kn}get enabled(){return this.status!==Kn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=Wn(t)}setAsyncValidators(t){this.asyncValidator=zn(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Gn,this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){this.status=Kn,this.errors=null,this._forEachChild(t=>{t.disable({onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){this.status=qn,this._forEachChild(t=>{t.enable({onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t&&(this._parent.updateValueAndValidity(),this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==qn&&this.status!==Gn||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kn:qn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Gn;const e=on(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((t,e)=>t instanceof Jn?t.controls[e]||null:t instanceof Yn&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.m,this.statusChanges=new r.m}_calculateStatus(){return this._allControlsDisabled()?Kn:this.errors?Hn:this._anyControlsHaveStatus(Gn)?Gn:this._anyControlsHaveStatus(Hn)?Hn:qn}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Qn(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}}class Xn extends $n{constructor(t=null,e,n){super(Wn(e),zn(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=(()=>{})}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Jn extends $n{constructor(t,e,n){super(Wn(e),zn(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Xn?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Yn extends $n{constructor(t,e,n){super(Wn(e),zn(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)}getRawValue(){return this.controls.map(t=>t instanceof Xn?t.value:t.getRawValue())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}Object(r.R)(()=>tr);const Zn=Promise.resolve(null);class tr extends Ye{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.m,this.form=new Jn({},Rn(t),xn(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Zn.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),In(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Zn.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Vn(this._directives,t)})}addFormGroup(t){Zn.then(()=>{const e=this._findContainer(t.path),n=new Jn({});kn(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Zn.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Zn.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Mn(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}const er={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class nr{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${er.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${er.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${er.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${er.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${er.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${er.ngModelGroup}`)}}Object(r.R)(()=>rr);class rr extends Un{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof rr||this._parent instanceof tr||nr.modelGroupParentException()}}Object(r.R)(()=>or);const ir=Promise.resolve(null);class or extends mn{constructor(t,e,n,i){super(),this.control=new Xn,this._registered=!1,this.update=new r.m,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Ln(this,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Dn(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Tn(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Rn(this._rawValidators)}get asyncValidator(){return xn(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){In(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof rr)&&this._parent instanceof Un?nr.formGroupNameException():this._parent instanceof rr||this._parent instanceof tr||nr.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||nr.missingNameException()}_updateValue(t){ir.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ir.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}class sr{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${er.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${er.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${er.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${er.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${er.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${er.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}}Object(r.R)(()=>(class extends mn{constructor(t,e,n){super(),this.update=new r.m,this._rawValidators=t||[],this._rawAsyncValidators=e||[],this.valueAccessor=Ln(this,n)}set isDisabled(t){sr.disabledAttrWarning()}ngOnChanges(t){this._isControlChanged(t)&&(In(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Dn(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return Rn(this._rawValidators)}get asyncValidator(){return xn(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}})),Object(r.R)(()=>ar);class ar extends Ye{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.m}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return In(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Vn(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);kn(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);kn(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Mn(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){var t;this.directives.forEach(e=>{const n=this.form.get(e.path);e.control!==n&&(t=e.control,(e=e).valueAccessor.registerOnChange(()=>Nn(e)),e.valueAccessor.registerOnTouched(()=>Nn(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),n&&In(n,e),e.control=n)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=Rn(this._validators);this.form.validator=nn.compose([this.form.validator,t]);const e=xn(this._asyncValidators);this.form.asyncValidator=nn.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||sr.missingFormException()}}Object(r.R)(()=>ur);class ur extends Un{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){cr(this._parent)&&sr.groupParentException()}}Object(r.R)(()=>lr);class lr extends Ye{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Tn(this.name,this._parent)}get validator(){return Rn(this._validators)}get asyncValidator(){return xn(this._asyncValidators)}_checkParentType(){cr(this._parent)&&sr.arrayParentException()}}function cr(t){return!(t instanceof ur||t instanceof ar||t instanceof lr)}Object(r.R)(()=>(class extends mn{constructor(t,e,n,i){super(),this._added=!1,this.update=new r.m,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Ln(this,i)}set isDisabled(t){sr.disabledAttrWarning()}ngOnChanges(t){this._added||this._setUpControl(),Dn(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Tn(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Rn(this._rawValidators)}get asyncValidator(){return xn(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof ur)&&this._parent instanceof Un?sr.ngModelGroupException():this._parent instanceof ur||this._parent instanceof ar||this._parent instanceof lr||sr.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}})),Object(r.R)(()=>hr),Object(r.R)(()=>(class extends hr{validate(t){return this.required?nn.requiredTrue(t):null}}));class hr{get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!==`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?nn.required(t):null}registerOnValidatorChange(t){this._onChange=t}}Object(r.R)(()=>(class{set email(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}validate(t){return this._enabled?nn.email(t):null}registerOnValidatorChange(t){this._onChange=t}})),Object(r.R)(()=>(class{ngOnChanges(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null==this.minlength?null:this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=nn.minLength(parseInt(this.minlength,10))}})),Object(r.R)(()=>(class{ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null!=this.maxlength?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=nn.maxLength(parseInt(this.maxlength,10))}})),Object(r.R)(()=>(class{ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=nn.pattern(this.pattern)}})),new r.L("5.2.2");class dr{}class fr{}class pr{}var mr=n("9i4M"),gr=n("4yfK");class yr extends mr.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new gr.a;return this._value}next(t){super.next(this._value=t)}}var vr=n("sngF");const br=vr.a.of;var _r=n("rhNu");function wr(t,e){return function(t,e){return Object(_r.a)(t,e,1)}(t,e)(this)}function Er(t,e,n=Number.POSITIVE_INFINITY){return Object(_r.a)(t,e,n)(this)}var Cr=n("iwAo"),Sr=n("2mbX"),Tr=n("Lq4y");class Ir extends s.a{constructor(t,e){if(super(),this.scheduler=e,null==t)throw new Error("iterator cannot be null.");this.iterator=function(t){const e=t[Tr.a];if(!e&&"string"==typeof t)return new Ar(t);if(!e&&void 0!==t.length)return new kr(t);if(!e)throw new TypeError("object is not iterable");return t[Tr.a]()}(t)}static create(t,e){return new Ir(t,e)}static dispatch(t){const{index:e,hasError:n,iterator:r,subscriber:i}=t;if(n)return void i.error(t.error);let o=r.next();o.done?i.complete():(i.next(o.value),t.index=e+1,i.closed?"function"==typeof r.return&&r.return():this.schedule(t))}_subscribe(t){const{iterator:e,scheduler:n}=this;if(n)return n.schedule(Ir.dispatch,0,{index:0,iterator:e,subscriber:t});for(;;){let n=e.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed){"function"==typeof e.return&&e.return();break}}}}class Ar{constructor(t,e=0,n=t.length){this.str=t,this.idx=e,this.len=n}[Tr.a](){return this}next(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}}}class kr{constructor(t,e=0,n=function(e){let n=+t.length;return isNaN(n)?0:0!==n&&"number"==typeof(r=n)&&p.a.isFinite(r)?(n=function(t){let e=+n;return 0===e?e:isNaN(e)?e:e<0?-1:1}()*Math.floor(Math.abs(n)))<=0?0:n>Nr?Nr:n:n;var r}()){this.arr=t,this.idx=e,this.len=n}[Tr.a](){return this}next(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}}}const Nr=Math.pow(2,53)-1;var Or=n("g2hh");class Rr extends s.a{constructor(t,e){super(),this.arrayLike=t,this.scheduler=e,e||1!==t.length||(this._isScalar=!0,this.value=t[0])}static create(t,e){const n=t.length;return 0===n?new a.a:1===n?new Or.a(t[0],e):new Rr(t,e)}static dispatch(t){const{arrayLike:e,index:n,length:r,subscriber:i}=t;i.closed||(n>=r?i.complete():(i.next(e[n]),t.index=n+1,this.schedule(t)))}_subscribe(t){const{arrayLike:e,scheduler:n}=this,r=e.length;if(n)return n.schedule(Rr.dispatch,0,{arrayLike:e,index:0,length:r,subscriber:t});for(let i=0;i<r&&!t.closed;i++)t.next(e[i]);t.complete()}}class xr{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return s.a.of(this.value);case"E":return s.a.throw(this.error);case"C":return s.a.empty()}throw new Error("unexpected notification kind value")}static createNext(t){return"undefined"!=typeof t?new xr("N",t):xr.undefinedValueNotification}static createError(t){return new xr("E",void 0,t)}static createComplete(){return xr.completeNotification}}xr.completeNotification=new xr("C"),xr.undefinedValueNotification=new xr("N",void 0);class Dr{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new Pr(t,this.scheduler,this.delay))}}class Pr extends b.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.add(this.scheduler.schedule(Pr.dispatch,this.delay,new Mr(t,this.destination)))}_next(t){this.scheduleMessage(xr.createNext(t))}_error(t){this.scheduleMessage(xr.createError(t))}_complete(){this.scheduleMessage(xr.createComplete())}}class Mr{constructor(t,e){this.notification=t,this.destination=e}}var Lr=n("CdVW");class Vr extends s.a{constructor(t,e){super(null),this.ish=t,this.scheduler=e}static create(t,e){if(null!=t){if("function"==typeof t[Lr.a])return t instanceof s.a&&!e?t:new Vr(t,e);if(Object(u.a)(t))return new vr.a(t,e);if(Object(Sr.a)(t))return new m(t,e);if("function"==typeof t[Tr.a]||"string"==typeof t)return new Ir(t,e);if(Object(Cr.a)(t))return new Rr(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}_subscribe(t){const e=this.ish,n=this.scheduler;return null==n?e[Lr.a]().subscribe(t):e[Lr.a]().subscribe(new Pr(t,n,0))}}const Ur=Vr.create;class Fr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new jr(t,this.selector,this.caught))}}class jr extends c.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle(),this.add(Object(l.a)(this,e))}}}function Br(t){return function(t){return function(e){const n=new Fr(t),r=e.lift(n);return n.caught=r}}(t)(this)}var qr=n("G3Tt");function Hr(){return Object(qr.a)(1)(this)}class Gr extends Error{constructor(){const t=super("no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}}class Kr{constructor(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}call(t,e){return e.subscribe(new Wr(t,this.predicate,this.resultSelector,this.defaultValue,this.source))}}class Wr extends b.a{constructor(t,e,n,r,i){super(t),this.predicate=e,this.resultSelector=n,this.defaultValue=r,this.source=i,this.index=0,this.hasCompleted=!1,this._emitted=!1}_next(t){const e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)}_tryPredicate(t,e){let n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}n&&this._emit(t,e)}_emit(t,e){this.resultSelector?this._tryResultSelector(t,e):this._emitFinal(t)}_tryResultSelector(t,e){let n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this._emitFinal(n)}_emitFinal(t){const e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)}_complete(){const t=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||t.error(new Gr):(t.next(this.defaultValue),t.complete())}}function zr(t,e,n){return function(t,e,n){return r=>r.lift(new Kr(t,e,n,r))}(t,e,n)(this)}class Qr{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new $r(t,this.predicate,this.thisArg,this.source))}}class $r extends b.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Xr(t,e){return function(t,e){return n=>n.lift(new Qr(t,e,n))}(t,e)(this)}class Jr{constructor(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}call(t,e){return e.subscribe(new Yr(t,this.predicate,this.resultSelector,this.defaultValue,this.source))}}class Yr extends b.a{constructor(t,e,n,r,i){super(t),this.predicate=e,this.resultSelector=n,this.defaultValue=r,this.source=i,this.hasValue=!1,this.index=0,"undefined"!=typeof r&&(this.lastValue=r,this.hasValue=!0)}_next(t){const e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}}_tryPredicate(t,e){let n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}if(n){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}}_tryResultSelector(t,e){let n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this.lastValue=n,this.hasValue=!0}_complete(){const t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new Gr)}}function Zr(t,e,n){return function(t,e,n){return r=>r.lift(new Jr(t,e,n,r))}(t,e,n)(this)}function ti(t=Number.POSITIVE_INFINITY){return Object(qr.a)(t)(this)}function ei(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ni(t,e,n))}}class ni{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ri(t,this.accumulator,this.seed,this.hasSeed))}}class ri extends b.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(t){this.destination.error(t)}this.seed=n,this.destination.next(n)}}class ii extends Error{constructor(){const t=super("argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}}function oi(t){return function(e){return 0===t?new a.a:e.lift(new si(t))}}class si{constructor(t){if(this.total=t,this.total<0)throw new ii}call(t,e){return e.subscribe(new ai(t,this.total))}}class ai extends b.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}class ui{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new li(t,this.defaultValue))}}class li extends b.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ci=n("Hwfe");function hi(t,e){return arguments.length>=2?function(n){return Object(ci.a)(ei(t,e),oi(1),function(t=null){return e=>e.lift(new ui(t))}(e))(n)}:function(e){return Object(ci.a)(ei((e,n,r)=>t(e,n,r+1)),oi(1))(e)}}class di{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new fi(t,this.predicate,this.thisArg))}}class fi extends b.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)}}function pi(t,e){return function(t,e){return function(n){return n.lift(new di(t,e))}}(t,e)(this)}class mi{constructor(t,e){this.id=t,this.url=e}}class gi extends mi{toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yi extends mi{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vi extends mi{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bi extends mi{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _i extends mi{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wi extends mi{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ei extends mi{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ci extends mi{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Si extends mi{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ti{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ii{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ai{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ki{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ni{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oi{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}const Ri="primary";class xi{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Di(t){return new xi(t)}const Pi="ngNavigationCancelingError";function Mi(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class Li{constructor(t,e){this.routes=t,this.module=e}}function Vi(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Ui(r,Fi(e,r))}}function Ui(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&t.outlet&&t.outlet!==Ri)throw new Error(`Invalid configuration of route '${e}': a componentless route cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Vi(t.children,e)}function Fi(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ji(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(t[i=n[o]]!==e[i])return!1;return!0}function Bi(t){return Array.prototype.concat.apply([],t)}function qi(t){return t.length>0?t[t.length-1]:null}function Hi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Gi(t){const e=ti.call(t);return Xr.call(e,t=>!0===t)}function Ki(t){return Object(r._7)(t)?t:Object(r._8)(t)?v(Promise.resolve(t)):br(t)}function Wi(t,e,n){return n?function(t,e){return ji(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Xi(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e[n]===t[n])}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Xi(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Xi(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Xi(n.segments,t)&&!!n.children[Ri]&&e(n.children[Ri],r,o)}}(e,n,n.segments)}(t.root,e.root)}class zi{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Di(this.queryParams)),this._queryParamMap}toString(){return to.serialize(this)}}class Qi{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Hi(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return eo(this)}}class $i{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Di(this.parameters)),this._parameterMap}toString(){return io(this)}}function Xi(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Ji(t,e){let n=[];return Hi(t.children,(t,r)=>{r===Ri&&(n=n.concat(e(t,r)))}),Hi(t.children,(t,r)=>{r!==Ri&&(n=n.concat(e(t,r)))}),n}class Yi{}class Zi{parse(t){const e=new lo(t);return new zi(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${`/${function t(e,n){if(!e.hasChildren())return eo(e);if(n){const n=e.children[Ri]?t(e.children[Ri],!1):"",r=[];return Hi(e.children,(e,n)=>{n!==Ri&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Ji(e,(n,r)=>r===Ri?[t(e.children[Ri],!1)]:[`${r}:${t(n,!1)}`]);return`${eo(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${no(e)}=${no(t)}`).join("&"):`${no(e)}=${no(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${encodeURI(t.fragment)}`:""}`}}const to=new Zi;function eo(t){return t.segments.map(t=>io(t)).join("/")}function no(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";")}function ro(t){return decodeURIComponent(t)}function io(t){return`${no(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${no(t)}=${no(e[t])}`).join("")}`;var e}const oo=/^[^\/()?;=&#]+/;function so(t){const e=t.match(oo);return e?e[0]:""}const ao=/^[^=?&#]+/,uo=/^[^?&#]+/;class lo{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qi([],{}):new Qi([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURI(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Ri]=new Qi(t,e)),n}parseSegment(){const t=so(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new $i(ro(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=so(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=so(this.remaining);t&&this.capture(n=t)}t[ro(e)]=ro(n)}parseQueryParam(t){const e=function(t){const e=t.match(ao);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(uo);return e?e[0]:""}(this.remaining);t&&this.capture(n=t)}const r=ro(e),i=ro(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(t[r]=e=[e]),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=so(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Ri);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o[Ri]:new Qi([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class co{constructor(t){this.segmentGroup=t||null}}class ho{constructor(t){this.urlTree=t}}function fo(t){return new s.a(e=>e.error(new co(t)))}function po(t){return new s.a(e=>e.error(new ho(t)))}function mo(t){return new s.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class go{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.v)}apply(){const t=this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Ri),e=C.call(t,t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment));return Br.call(e,t=>{if(t instanceof ho)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof co)throw this.noMatchError(t);throw t})}match(t){const e=this.expandSegmentGroup(this.ngModule,this.config,t.root,Ri),n=C.call(e,e=>this.createUrlTree(e,t.queryParams,t.fragment));return Br.call(n,t=>{if(t instanceof co)throw this.noMatchError(t);throw t})}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Qi([],{[Ri]:t}):t;return new zi(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?C.call(this.expandChildren(t,e,n),t=>new Qi([],t)):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return br({});const n=[],r=[],i={};Hi(t,(t,o)=>{const s=C.call(e(o,t),t=>i[o]=t);o===Ri?n.push(s):r.push(s)});const o=Hr.call(br(...n,...r)),s=Zr.call(o);return C.call(s,()=>i)}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){const s=br(...n),a=C.call(s,s=>{const a=this.expandSegmentAgainstRoute(t,e,n,s,r,i,o);return Br.call(a,t=>{if(t instanceof co)return br(null);throw t})}),u=Hr.call(a),l=zr.call(u,t=>!!t);return Br.call(l,(t,n)=>{if(t instanceof Gr||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return br(new Qi([],{}));throw new co(e)}throw t})}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return _o(r)!==o?fo(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):fo(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?po(i):Er.call(this.lineralizeSegments(n,i),n=>{const i=new Qi(n,{});return this.expandSegment(t,i,e,n,r,!1)})}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:l}=yo(e,r,i);if(!s)return fo(e);const c=this.applyRedirectCommands(a,r.redirectTo,l);return r.redirectTo.startsWith("/")?po(c):Er.call(this.lineralizeSegments(r,c),r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?C.call(this.configLoader.load(t.injector,n),t=>(n._loadedConfig=t,new Qi(r,{}))):br(new Qi(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=yo(e,n,r);if(!i)return fo(e);const a=r.slice(s),u=this.getChildConfig(t,n);return Er.call(u,t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(n=>bo(t,e,n)&&_o(n)!==Ri)}(t,n)?{segmentGroup:vo(new Qi(e,function(t,e){const n={};for(const r of(n[Ri]=e,t))""===r.path&&_o(r)!==Ri&&(n[_o(r)]=new Qi([],{}));return n}(r,new Qi(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(n=>bo(t,e,n))}(t,n)?{segmentGroup:vo(new Qi(t.segments,function(t,e,n,r){const i={};for(const o of n)bo(t,e,o)&&!r[_o(o)]&&(i[_o(o)]=new Qi([],{}));return Object.assign({},r,i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);if(0===s.length&&i.hasChildren()){const t=this.expandChildren(n,r,i);return C.call(t,t=>new Qi(o,t))}if(0===r.length&&0===s.length)return br(new Qi(o,{}));const u=this.expandSegment(n,i,r,s,Ri,!0);return C.call(u,t=>new Qi(o.concat(t.segments),t.children))})}getChildConfig(t,e){return e.children?br(new Li(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?br(e._loadedConfig):Er.call(function(t,e){const n=e.canLoad;return n&&0!==n.length?Gi(C.call(Ur(n),n=>{const r=t.get(n);return Ki(r.canLoad?r.canLoad(e):r(e))})):br(!0)}(t.injector,e),n=>n?C.call(this.configLoader.load(t.injector,e),t=>(e._loadedConfig=t,t)):function(t){return new s.a(e=>e.error(function(t){const e=Error("NavigationCancelingError: "+t);return e[Pi]=!0,e}(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e)):br(new Li([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return br(n);if(r.numberOfChildren>1||!r.children[Ri])return mo(t.redirectTo);r=r.children[Ri]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new zi(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Hi(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Hi(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Qi(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function yo(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Mi)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function vo(t){if(1===t.numberOfChildren&&t.children[Ri]){const e=t.children[Ri];return new Qi(t.segments.concat(e.segments),e.children)}return t}function bo(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function _o(t){return t.outlet||Ri}class wo{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Eo(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Eo(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Co(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Co(t,this._root).map(t=>t.value)}}function Eo(t,e){if(t===e.value)return e;for(const n of e.children){const e=Eo(t,n);if(e)return e}return null}function Co(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Co(t,n);if(r.length)return r.unshift(e),r}return[]}class So{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function To(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Io extends wo{constructor(t,e){super(t),this.snapshot=e,xo(this,t)}toString(){return this.snapshot.toString()}}function Ao(t,e){const n=function(t,e){const n=new Oo([],{},{},"",{},Ri,e,null,t.root,-1,{});return new Ro("",new So(n,[]))}(t,e),r=new yr([new $i("",{})]),i=new yr({}),o=new yr({}),s=new yr({}),a=new yr(""),u=new ko(r,i,s,a,o,Ri,e,n.root);return u.snapshot=n.root,new Io(new So(u,[]),n)}class ko{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=C.call(this.params,t=>Di(t))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=C.call(this.queryParams,t=>Di(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function No(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Oo{constructor(t,e,n,r,i,o,s,a,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Di(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Di(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ro extends wo{constructor(t,e){super(e),this.url=t,xo(this,e)}toString(){return Do(this._root)}}function xo(t,e){e.value._routerState=t,e.children.forEach(e=>xo(t,e))}function Do(t){const e=t.children.length>0?` { ${t.children.map(Do).join(", ")} } `:"";return`${t.value}${e}`}function Po(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ji(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ji(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ji(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ji(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Mo(t,e){var n,r;return ji(t.params,e.params)&&Xi(n=t.url,r=e.url)&&n.every((t,e)=>ji(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Mo(t.parent,e.parent))}function Lo(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Vo(t,e,n,r,i){let o={};return r&&Hi(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new zi(n.root===t?e:function t(e,n,r){const i={};return Hi(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new Qi(e.segments,i)}(n.root,t,e),o,i)}class Uo{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Lo(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==qi(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fo{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function jo(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[Ri]:`${t}`}function Bo(t,e,n){if(t||(t=new Qi([],{})),0===t.segments.length&&t.hasChildren())return qo(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=jo(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Wo(s,a,e))return o;r+=2}else{if(!Wo(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Qi(t.segments.slice(0,r.pathIndex),{});return e.children[Ri]=new Qi(t.segments.slice(r.pathIndex),t.children),qo(e,0,i)}return r.match&&0===i.length?new Qi(t.segments,{}):r.match&&!t.hasChildren()?Ho(t,e,n):r.match?qo(t,0,i):Ho(t,e,n)}function qo(t,e,n){if(0===n.length)return new Qi(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{[Ri]:t}:void 0===t[0].outlets?{[Ri]:t}:t[0].outlets}(n),i={};return Hi(r,(n,r)=>{null!==n&&(i[r]=Bo(t.children[r],e,n))}),Hi(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Qi(t.segments,i)}}function Ho(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=Go(n[i].outlets);return new Qi(r,t)}if(0===i&&Lo(n[0])){r.push(new $i(t.segments[e].path,n[0])),i++;continue}const o=jo(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Lo(s)?(r.push(new $i(o,Ko(s))),i+=2):(r.push(new $i(o,{})),i++)}return new Qi(r,{})}function Go(t){const e={};return Hi(t,(t,n)=>{null!==t&&(e[n]=Ho(new Qi([],{}),0,t))}),e}function Ko(t){const e={};return Hi(t,(t,n)=>e[n]=`${t}`),e}function Wo(t,e,n){return t==n.path&&ji(e,n.parameters)}class zo{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Qo{constructor(t,e){this.component=t,this.route=e}}class $o{constructor(t,e,n,r){this.future=t,this.curr=e,this.moduleInjector=n,this.forwardEvent=r,this.canActivateChecks=[],this.canDeactivateChecks=[]}initialize(t){const e=this.future._root;this.setupChildRouteGuards(e,this.curr?this.curr._root:null,t,[e.value])}checkGuards(){if(!this.isDeactivating()&&!this.isActivating())return br(!0);const t=this.runCanDeactivateChecks();return Er.call(t,t=>t?this.runCanActivateChecks():br(!1))}resolveData(t){if(!this.isActivating())return br(null);const e=Ur(this.canActivateChecks),n=wr.call(e,e=>this.runResolve(e.route,t));return(function(t,e){return arguments.length>=2?hi(t,e)(this):hi(t)(this)}).call(n,(t,e)=>t)}isDeactivating(){return 0!==this.canDeactivateChecks.length}isActivating(){return 0!==this.canActivateChecks.length}setupChildRouteGuards(t,e,n,r){const i=To(e);t.children.forEach(t=>{this.setupRouteGuards(t,i[t.value.outlet],n,r.concat([t.value])),delete i[t.value.outlet]}),Hi(i,(t,e)=>this.deactivateRouteAndItsChildren(t,n.getContext(e)))}setupRouteGuards(t,e,n,r){const i=t.value,o=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const a=this.shouldRunGuardsAndResolvers(o,i,i.routeConfig.runGuardsAndResolvers);a?this.canActivateChecks.push(new zo(r)):(i.data=o.data,i._resolvedData=o._resolvedData),this.setupChildRouteGuards(t,e,i.component?s?s.children:null:n,r),a&&this.canDeactivateChecks.push(new Qo(s.outlet.component,o))}else o&&this.deactivateRouteAndItsChildren(e,s),this.canActivateChecks.push(new zo(r)),this.setupChildRouteGuards(t,null,i.component?s?s.children:null:n,r)}shouldRunGuardsAndResolvers(t,e,n){switch(n){case"always":return!0;case"paramsOrQueryParamsChange":return!Mo(t,e)||!ji(t.queryParams,e.queryParams);case"paramsChange":default:return!Mo(t,e)}}deactivateRouteAndItsChildren(t,e){const n=To(t),r=t.value;Hi(n,(t,n)=>{this.deactivateRouteAndItsChildren(t,r.component?e?e.children.getContext(n):null:e)}),this.canDeactivateChecks.push(new Qo(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}runCanDeactivateChecks(){const t=Ur(this.canDeactivateChecks),e=Er.call(t,t=>this.runCanDeactivate(t.component,t.route));return Xr.call(e,t=>!0===t)}runCanActivateChecks(){const t=Ur(this.canActivateChecks),e=wr.call(t,t=>Gi(Ur([this.fireChildActivationStart(t.route.parent),this.fireActivationStart(t.route),this.runCanActivateChild(t.path),this.runCanActivate(t.route)])));return Xr.call(e,t=>!0===t)}fireActivationStart(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new Ni(t)),br(!0)}fireChildActivationStart(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new Ai(t)),br(!0)}runCanActivate(t){const e=t.routeConfig?t.routeConfig.canActivate:null;return e&&0!==e.length?Gi(C.call(Ur(e),e=>{const n=this.getToken(e,t);let r;return r=Ki(n.canActivate?n.canActivate(t,this.future):n(t,this.future)),zr.call(r)})):br(!0)}runCanActivateChild(t){const e=t[t.length-1],n=t.slice(0,t.length-1).reverse().map(t=>this.extractCanActivateChild(t)).filter(t=>null!==t);return Gi(C.call(Ur(n),t=>Gi(C.call(Ur(t.guards),n=>{const r=this.getToken(n,t.node);let i;return i=Ki(r.canActivateChild?r.canActivateChild(e,this.future):r(e,this.future)),zr.call(i)}))))}extractCanActivateChild(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}runCanDeactivate(t,e){const n=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!n||0===n.length)return br(!0);const r=Er.call(Ur(n),n=>{const r=this.getToken(n,e);let i;return i=Ki(r.canDeactivate?r.canDeactivate(t,e,this.curr,this.future):r(t,e,this.curr,this.future)),zr.call(i)});return Xr.call(r,t=>!0===t)}runResolve(t,e){return C.call(this.resolveNode(t._resolve,t),n=>(t._resolvedData=n,t.data=Object.assign({},t.data,No(t,e).resolve),null))}resolveNode(t,e){const n=Object.keys(t);if(0===n.length)return br({});if(1===n.length){const r=n[0];return C.call(this.getResolver(t[r],e),t=>({[r]:t}))}const r={},i=Er.call(Ur(n),n=>C.call(this.getResolver(t[n],e),t=>(r[n]=t,t)));return C.call(Zr.call(i),()=>r)}getResolver(t,e){const n=this.getToken(t,e);return Ki(n.resolve?n.resolve(e,this.future):n(e,this.future))}getToken(t,e){const n=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(n?n.module.injector:this.moduleInjector).get(t)}}class Xo{}class Jo{constructor(t,e,n,r,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i}recognize(){try{const t=ts(this.urlTree.root,[],[],this.config).segmentGroup,e=this.processSegmentGroup(this.config,t,Ri),n=new Oo([],Object.freeze({}),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,{},Ri,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new So(n,e),i=new Ro(this.url,r);return this.inheritParamsAndData(i._root),br(i)}catch(t){return new s.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=No(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Ji(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};n.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(),n.sort((t,e)=>t.value.outlet===Ri?-1:e.value.outlet===Ri?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(t){if(!(t instanceof Xo))throw t}if(this.noLeftoversInUrl(e,n,r))return[];throw new Xo}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Xo;if((t.outlet||Ri)!==r)throw new Xo;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?qi(n).parameters:{};i=new Oo(n,o,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,rs(t),r,t.component,t,Yo(e),Zo(e)+n.length,is(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Xo;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Mi)(n,t,e);if(!r)throw new Xo;const i={};Hi(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Oo(o,a.parameters,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,rs(t),r,t.component,t,Yo(e),Zo(e)+o.length,is(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:l}=ts(e,o,s,a);if(0===l.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new So(i,t)]}if(0===a.length&&0===l.length)return[new So(i,[])];const c=this.processSegment(a,u,l,Ri);return[new So(i,c)]}}function Yo(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Zo(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ts(t,e,n,r){if(n.length>0&&function(t,e,n){return r.some(n=>es(t,e,n)&&ns(n)!==Ri)}(t,n)){const i=new Qi(e,function(t,e,n,r){const i={};for(const o of(i[Ri]=r,r._sourceSegment=t,r._segmentIndexShift=e.length,n))if(""===o.path&&ns(o)!==Ri){const n=new Qi([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[ns(o)]=n}return i}(t,e,r,new Qi(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(n=>es(t,e,n))}(t,n)){const i=new Qi(t.segments,function(t,e,n,r){const i={};for(const o of n)if(es(t,e,o)&&!r[ns(o)]){const e=new Qi([],{});e._sourceSegment=t,e._segmentIndexShift=t.segments.length,i[ns(o)]=e}return Object.assign({},r,i)}(t,n,r,t.children));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}const i=new Qi(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function es(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function ns(t){return t.outlet||Ri}function rs(t){return t.data||{}}function is(t){return t.resolve||{}}class os{}class ss{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const as=new r.o("ROUTES");class us{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren);return C.call(n,n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Li(Bi(r.injector.get(as)),r)})}loadModuleFactory(t){return"string"==typeof t?v(this.loader.load(t)):Er.call(Ki(t()),t=>t instanceof r.t?br(t):v(this.compiler.compileModuleAsync(t)))}}class ls{}class cs{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function hs(t){throw t}function ds(t){return br(null)}class fs{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.navigations=new yr(null),this.navigationId=0,this.events=new mr.a,this.errorHandler=hs,this.navigated=!1,this.hooks={beforePreactivation:ds,afterPreactivation:ds},this.urlHandlingStrategy=new cs,this.routeReuseStrategy=new ss,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.ngModule=o.get(r.v),this.resetConfig(u),this.currentUrlTree=new zi(new Qi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.configLoader=new us(s,a,t=>this.triggerEvent(new Ti(t)),t=>this.triggerEvent(new Ii(t))),this.routerState=Ao(this.currentUrlTree,this.rootComponentType),this.processNavigations()}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(Zone.current.wrap(t=>{const e=this.urlSerializer.parse(t.url),n="popstate"===t.type?"popstate":"hashchange";setTimeout(()=>{this.scheduleNavigation(e,n,{replaceUrl:!0})},0)})))}get url(){return this.serializeUrl(this.currentUrlTree)}triggerEvent(t){this.events.next(t)}resetConfig(t){Vi(t),this.config=t,this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.T)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,c=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign({},this.currentUrlTree.queryParams,i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return Vo(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Uo(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Hi(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Uo(n,e,r)}(n);if(o.toRoot())return Vo(e.root,new Qi([],{}),e,r,i);const s=function(t,n,r){if(t.isAbsolute)return new Fo(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new Fo(r.snapshot._urlSegment,!0,0);const i=Lo(t.commands[0])?0:1;return function(e,n,o){let s=r.snapshot._urlSegment,a=r.snapshot._lastPathIndex+i,u=t.numberOfDoubleDots;for(;u>a;){if(u-=a,!(s=s.parent))throw new Error("Invalid number of '../'");a=s.segments.length}return new Fo(s,!1,a-u)}()}(o,0,t),a=s.processChildren?qo(s.segmentGroup,s.index,o.commands):Bo(s.segmentGroup,s.index,o.commands);return Vo(s.segmentGroup,a,e,r,i)}(l,this.currentUrlTree,t,h,c)}navigateByUrl(t,e={skipLocationChange:!1}){const n=t instanceof zi?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){return this.urlSerializer.parse(t)}isActive(t,e){if(t instanceof zi)return Wi(this.currentUrlTree,t,e);const n=this.urlSerializer.parse(t);return Wi(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!==r&&void 0!==r&&(e[n]=r),e},{})}processNavigations(){wr.call(this.navigations,t=>t?(this.executeScheduledNavigation(t),t.promise.catch(()=>{})):br(null)).subscribe(()=>{})}scheduleNavigation(t,e,n){const r=this.navigations.value;if(r&&"imperative"!==e&&"imperative"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"hashchange"==e&&"popstate"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"popstate"==e&&"hashchange"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);let i=null,o=null;const s=new Promise((t,e)=>{i=t,o=e}),a=++this.navigationId;return this.navigations.next({id:a,source:e,rawUrl:t,extras:n,resolve:i,reject:o,promise:s}),s.catch(t=>Promise.reject(t))}executeScheduledNavigation({id:t,rawUrl:e,extras:n,resolve:r,reject:i}){const o=this.urlHandlingStrategy.extract(e),s=!this.navigated||o.toString()!==this.currentUrlTree.toString();("reload"===this.onSameUrlNavigation||s)&&this.urlHandlingStrategy.shouldProcessUrl(e)?(this.events.next(new gi(t,this.serializeUrl(o))),Promise.resolve().then(r=>this.runNavigate(o,e,!!n.skipLocationChange,!!n.replaceUrl,t,null)).then(r,i)):s&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)?(this.events.next(new gi(t,this.serializeUrl(o))),Promise.resolve().then(n=>this.runNavigate(o,e,!1,!1,t,Ao(o,this.rootComponentType).snapshot)).then(r,i)):(this.rawUrlTree=e,r(null))}runNavigate(t,e,n,r,i,o){return i!==this.navigationId?(this.events.next(new vi(i,this.serializeUrl(t),`Navigation ID ${i} is not equal to the current navigation id ${this.navigationId}`)),Promise.resolve(!1)):new Promise((a,u)=>{let l;if(o)l=br({appliedUrl:t,snapshot:o});else{const e=new go(this.ngModule.injector,this.configLoader,this.urlSerializer,t,this.config).apply();l=Er.call(e,e=>C.call(function(t,e,n,r,i="emptyOnly"){return new Jo(t,e,n,r,i).recognize()}(this.rootComponentType,this.config,e,this.serializeUrl(e),this.paramsInheritanceStrategy),n=>(this.events.next(new _i(i,this.serializeUrl(t),this.serializeUrl(e),n)),{appliedUrl:e,snapshot:n})))}const c=Er.call(l,t=>C.call(this.hooks.beforePreactivation(t.snapshot),()=>t));let h;const d=C.call(c,({appliedUrl:t,snapshot:e})=>((h=new $o(e,this.routerState.snapshot,this.ngModule.injector,t=>this.triggerEvent(t))).initialize(this.rootContexts),{appliedUrl:t,snapshot:e})),f=Er.call(d,({appliedUrl:e,snapshot:n})=>this.navigationId!==i?br(!1):(this.triggerEvent(new wi(i,this.serializeUrl(t),e,n)),C.call(h.checkGuards(),r=>(this.triggerEvent(new Ei(i,this.serializeUrl(t),e,n,r)),{appliedUrl:e,snapshot:n,shouldActivate:r})))),p=Er.call(f,e=>this.navigationId!==i?br(!1):e.shouldActivate&&h.isActivating()?(this.triggerEvent(new Ci(i,this.serializeUrl(t),e.appliedUrl,e.snapshot)),C.call(h.resolveData(this.paramsInheritanceStrategy),()=>(this.triggerEvent(new Si(i,this.serializeUrl(t),e.appliedUrl,e.snapshot)),e))):br(e)),m=Er.call(p,t=>C.call(this.hooks.afterPreactivation(t.snapshot),()=>t)),g=C.call(m,({appliedUrl:t,snapshot:e,shouldActivate:n})=>n?{appliedUrl:t,state:function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new So(i,o)}if(e.retrieve(n.value)){const t=e.retrieve(n.value).route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new ko(new yr((i=n.value).url),new yr(i.params),new yr(i.queryParams),new yr(i.fragment),new yr(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new So(r,o)}var i}(t,e._root,n?n._root:void 0);return new Io(r,e)}(this.routeReuseStrategy,e,this.routerState),shouldActivate:n}:{appliedUrl:t,state:null,shouldActivate:n});let y;const v=this.routerState,b=this.currentUrlTree;g.forEach(({appliedUrl:t,state:o,shouldActivate:s})=>{if(s&&i===this.navigationId){if(this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e),this.routerState=o,!n){const t=this.urlSerializer.serialize(this.rawUrlTree);this.location.isCurrentPathEqualTo(t)||r?this.location.replaceState(t):this.location.go(t)}new ps(this.routeReuseStrategy,o,v,t=>this.triggerEvent(t)).activate(this.rootContexts),y=!0}else y=!1}).then(()=>{y?(this.navigated=!0,this.events.next(new yi(i,this.serializeUrl(t),this.serializeUrl(this.currentUrlTree))),a(!0)):(this.resetUrlToCurrentUrlTree(),this.events.next(new vi(i,this.serializeUrl(t),"")),a(!1))},n=>{if((s=n)&&s[Pi])this.navigated=!0,this.resetStateAndUrl(v,b,e),this.events.next(new vi(i,this.serializeUrl(t),n.message)),a(!1);else{this.resetStateAndUrl(v,b,e),this.events.next(new bi(i,this.serializeUrl(t),n));try{a(this.errorHandler(n))}catch(t){u(t)}}})});var s}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree))}}class ps{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Po(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=To(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Hi(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=To(t),i=t.value.component?n.children:e;Hi(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=To(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Oi(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ki(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Po(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ms(t.route)}else{const n=function(t){for(let e=r.snapshot.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(),i=n?n.module.componentFactoryResolver:null;e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ms(t){Po(t.value),t.children.forEach(ms)}class gs{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(r.T)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:ys(this.skipLocationChange),replaceUrl:ys(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ys(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ys(this.preserveFragment)})}}function ys(t){return""===t||!!t}class vs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bs,this.attachRef=null}}class bs{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new vs,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class _s{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.m,this.deactivateEvents=new r.m,this.name=i||Ri,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ws(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class ws{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===ko?this.route:t===bs?this.childContexts:this.parent.get(t,e)}}class Es{}class Cs{preload(t,e){return Br.call(e(),()=>br(null))}}class Ss{preload(t,e){return br(null)}}class Ts{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new us(e,n,e=>t.triggerEvent(new Ti(e)),e=>t.triggerEvent(new Ii(e)))}setUpPreloading(){const t=pi.call(this.router.events,t=>t instanceof yi);this.subscription=wr.call(t,()=>this.preload()).subscribe(()=>{})}preload(){const t=this.injector.get(r.v);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return ti.call(Ur(n))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>{const n=this.loader.load(t.injector,e);return Er.call(n,t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))})}}const Is=new r.o("ROUTER_CONFIGURATION"),As=new r.o("ROUTER_FORROOT_GUARD"),ks=[k,{provide:Yi,useClass:Zi},{provide:fs,useFactory:Ps,deps:[r.g,Yi,bs,k,r.p,r.u,r.i,as,Is,[ls,new r.y],[os,new r.y]]},bs,{provide:ko,useFactory:Ms,deps:[fs]},{provide:r.u,useClass:r.H},Ts,Ss,Cs,{provide:Is,useValue:{enableTracing:!1}}];function Ns(){return new r.w("Router",fs)}class Os{constructor(t,e){}static forRoot(t,e){return{ngModule:Os,providers:[ks,Ds(t),{provide:As,useFactory:xs,deps:[[fs,new r.y,new r.G]]},{provide:Is,useValue:e||{}},{provide:I,useFactory:Rs,deps:[S,[new r.n(A),new r.y],Is]},{provide:Es,useExisting:e&&e.preloadingStrategy?e.preloadingStrategy:Ss},{provide:r.w,multi:!0,useFactory:Ns},[Ls,{provide:r.d,multi:!0,useFactory:Vs,deps:[Ls]},{provide:Fs,useFactory:Us,deps:[Ls]},{provide:r.b,multi:!0,useExisting:Fs}]]}}static forChild(t){return{ngModule:Os,providers:[Ds(t)]}}}function Rs(t,e,n={}){return n.useHash?new O(t,e):new R(t,e)}function xs(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Ds(t){return[{provide:r.a,multi:!0,useValue:t},{provide:as,multi:!0,useValue:t}]}function Ps(t,e,n,r,i,o,s,a,u={},l,c){const h=new fs(null,e,n,r,i,o,s,Bi(a));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),u.errorHandler&&(h.errorHandler=u.errorHandler),u.enableTracing){const t=ft();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),h}function Ms(t){return t.routerState.root}class Ls{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new mr.a}appInitializer(){return this.injector.get(T,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(fs),r=this.injector.get(Is);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=(()=>this.initNavigation?br(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone)),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Is),n=this.injector.get(Ts),i=this.injector.get(fs),o=this.injector.get(r.g);t===o.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}function Vs(t){return t.appInitializer.bind(t)}function Us(t){return t.bootstrapListener.bind(t)}const Fs=new r.o("Router Initializer");new r.L("5.2.2");class js{}class Bs{}class qs{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof qs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new qs;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof qs?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;0===(t=t.filter(t=>-1===i.indexOf(t))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Hs{encodeKey(t){return Gs(t)}encodeValue(t){return Gs(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Gs(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Ks{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Hs,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).join("&")}clone(t){const e=new Ks({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=null)}}function Ws(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function zs(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Qs(t){return"undefined"!=typeof FormData&&t instanceof FormData}class $s{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new qs),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Ks,this.urlWithParams=e}serializeBody(){return null===this.body?null:Ws(this.body)||zs(this.body)||Qs(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ks?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:Qs(this.body)?null:zs(this.body)?this.body.type||null:Ws(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ks?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new $s(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}const Xs=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class Js{constructor(t,e=200,n="OK"){this.headers=t.headers||new qs,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Ys extends Js{constructor(t={}){super(t),this.type=Xs.ResponseHeader}clone(t={}){return new Ys({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Zs extends Js{constructor(t={}){super(t),this.type=Xs.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Zs({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ta extends Js{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ea(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}class na{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof $s)r=t;else{let i=void 0;i=n.headers instanceof qs?n.headers:new qs(n.headers);let o=void 0;n.params&&(o=n.params instanceof Ks?n.params:new Ks({fromObject:n.params})),r=new $s(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=wr.call(br(r),t=>this.handler.handle(t));if(t instanceof $s||"events"===n.observe)return i;const o=pi.call(i,t=>t instanceof Zs);switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return C.call(o,t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body});case"blob":return C.call(o,t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body});case"text":return C.call(o,t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body});case"json":default:return C.call(o,t=>t.body)}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Ks).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,ea(n,e))}post(t,e,n={}){return this.request("POST",t,ea(n,e))}put(t,e,n={}){return this.request("PUT",t,ea(n,e))}}class ra{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const ia=new r.o("HTTP_INTERCEPTORS");class oa{intercept(t,e){return e.handle(t)}}const sa=/^\)\]\}',?\n/;class aa{}class ua{constructor(){}build(){return new XMLHttpRequest}}class la{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new s.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new qs(n.getAllResponseHeaders()),s=("responseURL"in(n=n)&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null)||t.url;return i=new Ys({headers:o,status:e,statusText:r,url:s})},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u="undefined"==typeof n.response?n.responseText:n.response),0===i&&(i=u?200:0);let l=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(sa,"");try{u=""!==u?JSON.parse(u):null}catch(e){u=t,l&&(l=!1,u={error:e,text:u})}}l?(e.next(new Zs({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new ta({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const r=new ta({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error"});e.error(r)};let u=!1;const l=r=>{u||(e.next(o()),u=!0);let i={type:Xs.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},c=t=>{let n={type:Xs.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",l),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:Xs.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",l),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.abort()}})}}const ca=new r.o("XSRF_COOKIE_NAME"),ha=new r.o("XSRF_HEADER_NAME");class da{}class fa{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=U(t,this.cookieName),this.lastCookieString=t),this.lastToken}}class pa{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}function ma(t,e=[]){return e?e.reduceRight((t,e)=>new ra(t,e),t):t}class ga{static disable(){return{ngModule:ga,providers:[{provide:pa,useClass:oa}]}}static withOptions(t={}){return{ngModule:ga,providers:[t.cookieName?{provide:ca,useValue:t.cookieName}:[],t.headerName?{provide:ha,useValue:t.headerName}:[]]}}}class ya{}class va{constructor(t){this._http=t,this.coursesUrl="https://golf-courses-api.herokuapp.com/courses",this.localObj={latitude:40.4426135,longitude:-111.8631116,radius:100}}getCourses(t){return this._http.post(this.coursesUrl,this.localObj).subscribe(e=>{t(e.courses)})}getCourse(t,e){return this._http.get(t).subscribe(e)}getCoursename(t){return t.name}getCourseHref(t){return t.href}getTeename(t){return t.tee_type}getTees(t){return t.tee_types}fill_descriptiveData(t,e,n){for(let r,i=0;i<e.holes.length;++i)this.findCorrectTeeBoxAndGetDataFor(t,r=e.holes[i],n)}findCorrectTeeBoxAndGetDataFor(t,e,n){for(let r,i=0;i<e.tee_boxes.length;++i)if((r=e.tee_boxes[i]).tee_type===n){for(let e in t)t[e].push(r[e]);break}}}class ba{constructor(t){this._api=t,this.courses=[],this.courseNames=[],this.selectedCourseName="",this.selectedCourseIndex=0,this.teeNames=[],this.selectedTeeName="",this.selectedTeeIndex=0,this.descriptiveData={yards:[],par:[],hcp:[]},this.descriptiveDataTotals={},this.totalTallyRanges=[],this._initialize_descriptiveDataTotals(),this._loadAllData()}loadAllDataForSelectedCourse(){this._setSelectedCourse(),this.courseSubscription=this._api.getCourse(this.selectedCourseHref,t=>{this.selectedCourse=t.course,this._clearAndSet_teeNames(),this._setDefaultValueFor_selectedTeeName(),this.loadAllDataForSelectedTee(),this.set_totalHoleCount(),console.log(this.totalHoleCount)})}_initialize_descriptiveDataTotals(){for(let t in this.descriptiveData)this.descriptiveDataTotals[t]=[]}_loadAllData(){this.coursesSubscription=this._api.getCourses(t=>{this.courses=t,this._clearAndSet_courseNames(),this._setDefaultValueFor_selectedCourseName(),this.loadAllDataForSelectedCourse()})}_clearAndSet_courseNames(){this._clear_courseNames(),this._set_courseNames()}_clear_courseNames(){this.courseNames=[]}_set_courseNames(){this.courses.forEach(t=>{this.courseNames.push(this._api.getCoursename(t))})}_setDefaultValueFor_selectedCourseName(){""===this.selectedCourseName&&(this.selectedCourseName=this.courseNames[0])}_clearAndSet_teeNames(){this._clear_teeNames(),this._set_teeNames()}_clear_teeNames(){this.teeNames=[]}_set_teeNames(){this.tee_types=this._api.getTees(this.selectedCourse);for(let t=0;t<this.tee_types.length;++t)this.teeNames.push(this._api.getTeename(this.tee_types[t]))}loadAllDataForSelectedTee(){this._setCurrentTee(),this._set_descriptiveData()}_setDefaultValueFor_selectedTeeName(){this.selectedTeeName=this.teeNames[0]}_setSelectedCourse(){this._set_selectedCourseIndex(),this._set_selectedCourse(),this._set_selectedCourseHref()}_set_selectedCourseIndex(){this.selectedCourseIndex=this.courseNames.indexOf(this.selectedCourseName)}_set_selectedCourse(){this.selectedCourse=this.courses[this.selectedCourseIndex]}_set_selectedCourseHref(){this.selectedCourseHref=this._api.getCourseHref(this.selectedCourse)}_setCurrentTee(){this.selectedTeeIndex=this.teeNames.indexOf(this.selectedTeeName)}_set_descriptiveData(){this._clearAllDescriptiveData(),this._fillAllDescriptiveData()}_clearAllDescriptiveData(){[this.descriptiveData,this.descriptiveDataTotals].forEach(t=>{this._setObjectPropertiesToEmptyArrays(t)})}_fillAllDescriptiveData(){this._fill_descriptiveData(),this._fill_descriptiveDataTotals()}_setObjectPropertiesToEmptyArrays(t){for(let e in t)t[e]=[]}_fill_descriptiveData(){this._api.fill_descriptiveData(this.descriptiveData,this.selectedCourse,this.selectedTeeName),this._makeSureEach_descriptiveDataRow_has18Items()}_makeSureEach_descriptiveDataRow_has18Items(){this._ifAnyItemsAreEmpty_convertThemToDashes(),this._appendDashesToRowsUntilEachHas18Items()}_ifAnyItemsAreEmpty_convertThemToDashes(){for(let t in this.descriptiveData)this.descriptiveData[t].forEach((e,n)=>{e||(this.descriptiveData[t][n]=" - ")})}_appendDashesToRowsUntilEachHas18Items(){for(let t in this.descriptiveData)for(;this.descriptiveData[t].length<18;)this.descriptiveData[t].push(" - ")}_fill_descriptiveDataTotals(){let t=[[0,8],[9,17],[0,17]];for(let e in this.descriptiveData)t.forEach(t=>{let n=this._calculateTotalsInRange(t,this.descriptiveData[e]);this.descriptiveDataTotals[e].push(n)})}_calculateTotalsInRange(t,e){return this._getTally(e.slice(t[0],t[1]+1))}_getTally(t){let e=0;for(let n=0;n<t.length;++n)isNaN(t[n])&&(t[n]=0),e+=t[n];return e}set_totalHoleCount(){let t=Object.keys(this.descriptiveData);this.totalHoleCount=this.descriptiveData[t[0]].length}}class _a{constructor(){this._self=sessionStorage.getItem(this.sessionKey)?sessionStorage.getItem(this.sessionKey):""}get(){return this._self}set(t){this._self=t,sessionStorage.setItem(this.sessionKey,this._self)}delete(){this._self="",sessionStorage.removeItem(this.sessionKey)}}class wa{constructor(t,e){this.courseService=t,this._activeGame=e}ngOnInit(){}ngOnDestroy(){this.courseService.coursesSubscription.unsubscribe()}suspendGame(){this._activeGame.delete()}}var Ea=r._1({encapsulation:2,styles:[],data:{}});function Ca(t){return r._23(0,[(t()(),r._3(0,0,null,null,3,"option",[["name","course-option"]],null,null,null,null,null)),r._2(1,147456,null,0,wn,[r.k,r.B,[2,_n]],{value:[0,"value"]},null),r._2(2,147456,null,0,Sn,[r.k,r.B,[8,null]],{value:[0,"value"]},null),(t()(),r._21(3,null,["\n                    ","\n                "]))],function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)},function(t,e){t(e,3,0,e.context.$implicit)})}function Sa(t){return r._23(0,[(t()(),r._3(0,0,null,null,33,"div",[["class","form-container"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n    "])),(t()(),r._3(2,0,null,null,30,"form",[["id","choose-course-and-suspend-game"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r._13(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r._13(t,4).onReset()&&i),i},null,null)),r._2(3,16384,null,0,dr,[],null,null),r._2(4,4210688,null,0,tr,[[8,null],[8,null]],null,null),r._18(2048,null,Ye,null,[tr]),r._2(6,16384,null,0,Bn,[Ye],null,null),(t()(),r._21(-1,null,["\n        "])),(t()(),r._3(8,0,null,null,15,"div",[],null,null,null,null,null)),(t()(),r._21(-1,null,["\n            "])),(t()(),r._3(10,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r._21(-1,null,["Choose a course"])),(t()(),r._21(-1,null,["\n            "])),(t()(),r._3(13,0,null,null,9,"select",[["id","course-name-options"],["name","course-name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"change"===e&&(i=!1!==r._13(t,14).onChange(n.target.value)&&i),"blur"===e&&(i=!1!==r._13(t,14).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.courseService.selectedCourseName=n)&&i),"change"===e&&(i=!1!==o.courseService.loadAllDataForSelectedCourse()&&i),i},null,null)),r._2(14,16384,null,0,_n,[r.B,r.k],null,null),r._18(1024,null,an,function(t){return[t]},[_n]),r._2(16,671744,null,0,or,[[2,Ye],[8,null],[8,null],[2,an]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._18(2048,null,mn,null,[or]),r._2(18,16384,null,0,jn,[mn],null,null),(t()(),r._21(-1,null,["\n                "])),(t()(),r.Y(16777216,null,null,1,null,Ca)),r._2(21,802816,null,0,j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._21(-1,null,["\n            "])),(t()(),r._21(-1,null,["\n        "])),(t()(),r._21(-1,null,["\n        "])),(t()(),r._3(25,0,null,null,6,"div",[],null,null,null,null,null)),(t()(),r._21(-1,null,["\n            "])),(t()(),r._3(27,0,null,null,3,"button",[],null,[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r._13(t,28).onClick()&&i),"click"===e&&(i=!1!==o.suspendGame()&&i),i},null,null)),r._2(28,16384,null,0,gs,[fs,ko,[8,null],r.B,r.k],{routerLink:[0,"routerLink"]},null),r._15(29,1),(t()(),r._21(-1,null,["\n                Suspend Game\n            "])),(t()(),r._21(-1,null,["\n        "])),(t()(),r._21(-1,null,["\n    "])),(t()(),r._21(-1,null,["\n"])),(t()(),r._21(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,16,0,"course-name",n.courseService.selectedCourseName),t(e,21,0,n.courseService.courseNames),t(e,28,0,t(e,29,0,"/welcome"))},function(t,e){t(e,2,0,r._13(e,6).ngClassUntouched,r._13(e,6).ngClassTouched,r._13(e,6).ngClassPristine,r._13(e,6).ngClassDirty,r._13(e,6).ngClassValid,r._13(e,6).ngClassInvalid,r._13(e,6).ngClassPending),t(e,13,0,r._13(e,18).ngClassUntouched,r._13(e,18).ngClassTouched,r._13(e,18).ngClassPristine,r._13(e,18).ngClassDirty,r._13(e,18).ngClassValid,r._13(e,18).ngClassInvalid,r._13(e,18).ngClassPending)})}class Ta{constructor(t){this.courseService=t}ngOnInit(){}ngOnDestroy(){this.courseService.courseSubscription.unsubscribe()}}var Ia=r._1({encapsulation:2,styles:[],data:{}});function Aa(t){return r._23(0,[(t()(),r._3(0,0,null,null,3,"option",[["name","tee-option"]],null,null,null,null,null)),r._2(1,147456,null,0,wn,[r.k,r.B,[2,_n]],{value:[0,"value"]},null),r._2(2,147456,null,0,Sn,[r.k,r.B,[8,null]],{value:[0,"value"]},null),(t()(),r._21(3,null,["\n            ","\n        "]))],function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)},function(t,e){t(e,3,0,e.context.$implicit)})}function ka(t){return r._23(0,[(t()(),r._3(0,0,null,null,15,"div",[["class","cell label-cell yards-row"],["id","tee-name-options-cell"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n    "])),(t()(),r._3(2,0,null,null,1,"label",[["id","tee-name-options-label"]],null,null,null,null,null)),(t()(),r._21(-1,null,["Tee"])),(t()(),r._21(-1,null,["\n    "])),(t()(),r._3(5,0,null,null,9,"select",[["id","tee-name-options"],["name","select-tee"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"change"===e&&(i=!1!==r._13(t,6).onChange(n.target.value)&&i),"blur"===e&&(i=!1!==r._13(t,6).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.courseService.selectedTeeName=n)&&i),"change"===e&&(i=!1!==o.courseService.loadAllDataForSelectedTee()&&i),i},null,null)),r._2(6,16384,null,0,_n,[r.B,r.k],null,null),r._18(1024,null,an,function(t){return[t]},[_n]),r._2(8,671744,null,0,or,[[8,null],[8,null],[8,null],[2,an]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._18(2048,null,mn,null,[or]),r._2(10,16384,null,0,jn,[mn],null,null),(t()(),r._21(-1,null,["\n        "])),(t()(),r.Y(16777216,null,null,1,null,Aa)),r._2(13,802816,null,0,j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._21(-1,null,["\n    "])),(t()(),r._21(-1,null,["\n"])),(t()(),r._21(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,8,0,"select-tee",n.courseService.selectedTeeName),t(e,13,0,n.courseService.teeNames)},function(t,e){t(e,5,0,r._13(e,10).ngClassUntouched,r._13(e,10).ngClassTouched,r._13(e,10).ngClassPristine,r._13(e,10).ngClassDirty,r._13(e,10).ngClassValid,r._13(e,10).ngClassInvalid,r._13(e,10).ngClassPending)})}s.a.prototype.map=C;var Na=n("XtH8");const Oa=new r.o("FirebaseAppConfigToken");class Ra{}function xa(t,e){try{return e?Na.default.initializeApp(t,e):Na.default.initializeApp(t)}catch(t){return Na.default.app("app/duplicate-app"===t.code?t.name:null)}}var Da=n("0mJR");class Pa extends Da.a{constructor(t,e){super()}schedule(t,e=0){return this}}class Ma extends Pa{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t,this.pending=!0;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return p.a.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;p.a.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class La{constructor(t,e=La.now){this.SchedulerAction=t,this.now=e}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}La.now=Date.now?Date.now:()=>+new Date;class Va extends La{constructor(){super(...arguments),this.actions=[],this.active=!1,this.scheduled=void 0}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Ua=new class extends Va{}(class extends Ma{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),Fa=new r.o("FirebaseAppName");class ja{static initializeApp(t,e){return{ngModule:ja,providers:[{provide:Oa,useValue:t},{provide:Fa,useValue:e}]}}}class Ba{constructor(t){this.zone=t}schedule(...t){return this.zone.run(()=>Ua.schedule.apply(Ua,t))}}function qa(t,e=0){return function(t,e=0){return function(n){return n.lift(new Dr(t,e))}}(t,e)(this)}var Ha=n("IKzn");function Ga(t){return function(t){const e=new s.a(e=>({unsubscribe:t.onSnapshot(e)}));return qa.call(e,new Ba(Zone.current))}(t).share()}function Ka(t){return Ga(t).map(t=>({payload:t,type:"query"}))}function Wa(t){return Ka(t).map(t=>t.payload.docChanges.map(t=>({type:t.type,payload:t})))}s.a.prototype.share=Ha.a,s.a.prototype.filter=pi,s.a.prototype.scan=function(t,e){return arguments.length>=2?ei(t,e)(this):ei(t)(this)};class za{constructor(t,e){this.ref=t,this.query=e}stateChanges(t){return t&&0!==t.length?Wa(this.query).map(e=>e.filter(e=>t.indexOf(e.type)>-1)).filter(t=>t.length>0):Wa(this.query)}auditTrail(t){return this.stateChanges(t).scan((t,e)=>[...t,...e],[])}snapshotChanges(t){return t=function(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(t),function(t,e){return Ka(t).map(t=>t.payload.docChanges).scan((t,n)=>(function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.id==e.doc.id||t.splice(e.newIndex,0,e);break;case"modified":e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e);break;case"removed":t.splice(e.oldIndex,1)}return t}(t,e))}),t})(t,n,e),[]).map(t=>t.map(t=>({type:t.type,payload:t})))}(this.query,t)}valueChanges(t){return Ka(this.query).map(t=>t.payload.docs.map(t=>t.data()))}add(t){return this.ref.add(t)}doc(t){return new Qa(this.ref.doc(t))}}class Qa{constructor(t){this.ref=t}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Xa(n,e);return new za(r,i)}snapshotChanges(){return Ga(this.ref).map(t=>({payload:t,type:"value"}))}valueChanges(){return this.snapshotChanges().map(t=>t.payload.exists?t.payload.data():null)}}const $a=new r.o("EnablePersistenceToken");function Xa(t,e=(t=>t)){return{query:e(t),ref:t}}class Ja{constructor(t,e){this.app=t,this.firestore=t.firestore(),this.persistenceEnabled$=Ur(e?t.firestore().enablePersistence().then(()=>!0,()=>!1):new Promise((t,e)=>{t(!1)}))}collection(t,e){const n=this.firestore.collection(t),{ref:r,query:i}=Xa(n,e);return new za(r,i)}doc(t){const e=this.firestore.doc(t);return new Qa(e)}createId(){return this.firestore.collection("_").doc().id}}var Ya=Na.default.SDK_VERSION,Za=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({}),tu=Za.ERROR;function eu(){return tu}function nu(t){tu=t}function ru(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(tu<=Za.DEBUG){var i=(new Date).toISOString(),o=n.map(ou);console.log.apply(console,["Firestore ("+Ya+") "+i+" ["+t+"]: "+e].concat(o))}}function iu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(tu<=Za.ERROR){var r=(new Date).toISOString(),i=e.map(ou);console.error.apply(console,["Firestore ("+Ya+") "+r+": "+t].concat(i))}}function ou(t){if("string"==typeof t)return t;var e=uu.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function su(t){var e="FIRESTORE ("+Ya+") INTERNAL ASSERTION FAILED: "+t;throw iu(e),new Error(e)}function au(t,e){t||su(e)}var uu=function(){function t(){}return t.setPlatform=function(e){t.platform&&su("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||su("Platform not set"),t.platform},t}();function lu(){return uu.getPlatform().emptyByteString}var cu=n("6Xbx"),hu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},du=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(cu.__extends)(e,t),e}(Error);function fu(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new du(hu.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function pu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function mu(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function gu(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yu(t){for(var e in au(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vu(t){au(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function bu(t,e,n){if(e.length!==n)throw new du(hu.INVALID_ARGUMENT,"Function "+t+"() requires "+Du(n,"argument")+", but was called with "+Du(e.length,"argument")+".")}function _u(t,e,n){if(e.length<n)throw new du(hu.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Du(n,"argument")+", but was called with "+Du(e.length,"argument")+".")}function wu(t,e,n,r){if(e.length<n||e.length>r)throw new du(hu.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Du(e.length,"argument")+".")}function Eu(t,e,n,r){Iu(t,e,xu(n)+" argument",r)}function Cu(t,e,n,r){void 0!==r&&Eu(t,e,n,r)}function Su(t,e,n,r){Iu(t,e,n+" option",r)}function Tu(t,e,n,r){void 0!==r&&Su(t,e,n,r)}function Iu(t,e,n,r){if(typeof r!==e||"object"===e&&!Au(r)){var i=ku(r);throw new du(hu.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Au(t){return"object"==typeof t&&null!==t&&Object.getPrototypeOf(t)===Object.prototype}function ku(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":su("Unknown wrong type: "+typeof t)}function Nu(t,e,n){if(void 0===n)throw new du(hu.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+xu(e)+" argument, but it was undefined.")}function Ou(t,e,n){gu(e,function(e,r){if(n.indexOf(e)<0)throw new du(hu.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function Ru(t,e,n,r){var i=ku(r);return new du(hu.INVALID_ARGUMENT,"Function "+t+"() requires its "+xu(n)+" argument to be a "+e+", but it was: "+i)}function xu(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Du(t,e){return t+" "+e+(1===t?"":"s")}var Pu=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return au(20===e.length,"Invalid auto ID: "+e),e},t}();function Mu(t,e){return t<e?-1:t>e?1:0}function Lu(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Vu(){if("undefined"==typeof Uint8Array)throw new du(hu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Uu(){if(!uu.getPlatform().base64Available)throw new du(hu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Fu=function(){function t(t){Uu(),this._binaryString=t}return t.fromBase64String=function(e){bu("Blob.fromBase64String",arguments,1),Eu("Blob.fromBase64String","string",1,e),Uu();try{return new t(uu.getPlatform().atob(e))}catch(t){throw new du(hu.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(bu("Blob.fromUint8Array",arguments,1),Vu(),!(e instanceof Uint8Array))throw Ru("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return bu("Blob.toBase64",arguments,0),Uu(),uu.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){bu("Blob.toUint8Array",arguments,0),Vu();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return Mu(this._binaryString,t._binaryString)},t}(),ju=fu(Fu,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Bu=function(){function t(t,e){if(bu("GeoPoint",arguments,2),Eu("GeoPoint","number",1,t),Eu("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new du(hu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new du(hu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return Mu(this._lat,t._lat)||Mu(this._long,t._long)},t}(),qu="(default)",Hu=function(){function t(t,e){this.projectId=t,this.database=e||qu}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===qu},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return Mu(this.projectId,t.projectId)||Mu(this.database,t.database)},t}(),Gu=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&su("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&su("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):su("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return au(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return au(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return au(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return au(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return au(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ku=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(cu.__extends)(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new du(hu.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(Gu),Wu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(cu.__extends)(e,t),e.isValidIdentifier=function(t){return Wu.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new du(hu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new du(hu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new du(hu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new du(hu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(Gu),Qu=function(){function t(e){this.path=e,au(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===Ku.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ku.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ku(e.slice()))},t.fromPathString=function(e){return new t(Ku.fromString(e))},t.EMPTY=new t(new Ku([])),t}(),$u=function(){function t(t,e,n,r){this.key=t,this.version=e,this.data=n,this.hasLocalMutations=r.hasLocalMutations}return t.prototype.field=function(t){return this.data.field(t)},t.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"})"},t.compareByKey=function(t,e){return Qu.comparator(t.key,e.key)},t.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):su("Trying to compare documents on fields that don't exist")},t}(),Xu=function(){function t(t,e){this.key=t,this.version=e}return t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},t.prototype.isEqual=function(t){return t&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},t.compareByKey=function(t,e){return Qu.comparator(t.key,e.key)},t}(),Ju=function(){function t(t,e){this.comparator=t,this.root=e||Zu.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zu.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zu.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e=this.root,n=null;!e.isEmpty();){var r=this.comparator(t,e.key);if(0===r){if(e.left.isEmpty())return n?n.key:null;for(e=e.left;!e.right.isEmpty();)e=e.right;return e.key}r<0?e=e.left:r>0&&(n=e,e=e.right)}throw su("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Yu(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Yu(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Yu(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Yu(this.root,t,this.comparator,!0)},t}(),Yu=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){au(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Zu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw su("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw su("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw su("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}();Zu.EMPTY=new(function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Zu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var tl=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),el=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),nl=function(){function t(t){this.serverTimestampBehavior=t}return t.fromSnapshotOptions=function(e){switch(e.serverTimestamps){case"estimate":return new t(el.Estimate);case"previous":return new t(el.Previous);case"none":case void 0:return t.defaultOptions;default:return su("fromSnapshotOptions() called with invalid options.")}},t.defaultOptions=new t(el.Default),t}(),rl=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return au(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),Mu(this.typeOrder,t.typeOrder)},t}(),il=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=tl.NullValue,e.internalValue=null,e}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(rl),ol=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=tl.BooleanValue,n}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Mu(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(rl),sl=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=tl.NumberValue,n}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(rl);function al(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var ul=function(t){function e(e){return t.call(this,e)||this}return Object(cu.__extends)(e,t),e.prototype.isEqual=function(t){return t instanceof e&&al(this.internalValue,t.internalValue)},e}(sl),ll=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return Object(cu.__extends)(e,t),e.prototype.isEqual=function(t){return t instanceof e&&al(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(sl),cl=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=tl.StringValue,n}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Mu(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(rl),hl=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=tl.TimestampValue,n}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue.compareTo(t.internalValue):t instanceof dl?-1:this.defaultCompareTo(t)},e}(rl),dl=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=tl.TimestampValue,r}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===el.Estimate?this.localWriteTime.toDate():t&&t.serverTimestampBehavior===el.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime.compareTo(t.localWriteTime):t instanceof hl?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(rl),fl=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=tl.BlobValue,n}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(rl),pl=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=tl.RefValue,r}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:Qu.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(rl),ml=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=tl.GeoPointValue,n}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(rl),gl=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=tl.ObjectValue,n}return Object(cu.__extends)(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=Mu(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return Mu(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(au(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(au(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){au(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new Ju(Mu)),e}(rl),yl=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=tl.ArrayValue,n}return Object(cu.__extends)(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return Mu(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(rl),vl=Number,bl=vl.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),_l=vl.MAX_SAFE_INTEGER||Math.pow(2,53)-1,wl=vl.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function El(t){return null===t||void 0===t}var Cl,Sl=function(){function t(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[xl]:[new Rl(t),xl];else{au(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Nl.ASCENDING)===Nl.ASCENDING?xl:Dl)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){au(null==this.getInequalityFilterField()||!(e instanceof Il)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),au(!Qu.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){au(!Qu.isDocumentKey(this.path),"No ordering allowed for document query"),au(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";El(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),El(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return au(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!El(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Il&&n.isInequality())return n.field}return null},t.prototype.isDocumentQuery=function(){return Qu.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return Qu.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){au(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Tl=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;default:return su("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t}(),Il=function(){function t(t,e,n){this.field=t,this.op=e,this.value=n}return t.prototype.matches=function(t){if(this.field.isKeyField()){au(this.value instanceof pl,"Comparing on key, but filter value not a RefValue");var e=Qu.comparator(t.key,this.value.key);return this.matchesComparison(e)}var n=t.field(this.field);return void 0!==n&&this.matchesValue(n)},t.prototype.matchesValue=function(t){return this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(t){switch(this.op){case Tl.LESS_THAN:return t<0;case Tl.LESS_THAN_OR_EQUAL:return t<=0;case Tl.EQUAL:return 0===t;case Tl.GREATER_THAN:return t>0;case Tl.GREATER_THAN_OR_EQUAL:return t>=0;default:return su("Unknown relation op"+this.op)}},t.prototype.isInequality=function(){return this.op!==Tl.EQUAL},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(),Al=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},t.prototype.toString=function(){return this.field.canonicalString()+" IS null"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(),kl=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field).value();return"number"==typeof e&&isNaN(e)},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(),Nl=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Ol=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){au(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())au(o instanceof pl,"Bound has a non-key value where the key path is being used."),n=Qu.comparator(o.key,e.key);else{var s=e.field(i.field);au(void 0!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===Nl.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)return this.position[e].isEqual(t.position[e]);return!0},t}(),Rl=function(){function t(t,e){this.field=t,void 0===e&&(e=Nl.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?$u.compareByKey(t,e):$u.compareByField(this.field,t,e);switch(this.dir){case Nl.ASCENDING:return n;case Nl.DESCENDING:return-1*n;default:return su("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),xl=new Rl(zu.keyField(),Nl.ASCENDING),Dl=new Rl(zu.keyField(),Nl.DESCENDING),Pl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),Ml=function(){function t(t,e){this.seconds=t,this.nanos=e,au(e>=0,"timestamp nanoseconds out of range: "+e),au(e<1e9,"timestamp nanoseconds out of range"+e),au(t>=-62135596800,"timestamp seconds out of range: "+t),au(t<253402300800,"timestamp seconds out of range"+t)}return t.now=function(){return t.fromEpochMilliseconds(Date.now())},t.fromDate=function(e){return t.fromEpochMilliseconds(e.getTime())},t.fromEpochMilliseconds=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.fromISOString=function(e){var n=0,r=Pl.exec(e);if(au(!!r,"invalid timestamp: "+e),r[1]){var i=r[1];i=(i+"000000000").substr(0,9),n=Number(i)}var o=new Date(e);return new t(Math.floor(o.getTime()/1e3),n)},t.prototype.toDate=function(){return new Date(this.toEpochMilliseconds())},t.prototype.toEpochMilliseconds=function(){return 1e3*this.seconds+this.nanos/1e6},t.prototype.compareTo=function(t){return this.seconds===t.seconds?Mu(this.nanos,t.nanos):Mu(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanos===this.nanos},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanos="+this.nanos+")"},t}(),Ll=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new Ml(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp.compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanos/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new Ml(0,0)),t}();!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(Cl||(Cl={}));var Vl,Ul=function(){function t(t,e,n,r,i){void 0===r&&(r=Ll.MIN),void 0===i&&(i=lu()),this.query=t,this.targetId=e,this.purpose=n,this.snapshotVersion=r,this.resumeToken=i}return t.prototype.update=function(e){return new t(this.query,this.targetId,this.purpose,e.snapshotVersion,e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Fl=function(){function t(t){this.fields=t}return t.prototype.isEqual=function(t){return Lu(this.fields,t.fields)},t}(),jl=function(){function t(){}return t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),Bl=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),ql=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),Hl=function(){function t(t,e){this.updateTime=t,this.exists=e,au(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof $u&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists?t instanceof $u:null===t||t instanceof Xu:(au(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!==(e=this.updateTime)&&void 0!==e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),Gl=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&au(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof $u?t.version:Ll.MIN},t}(),Kl=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=ql.Set,i}return Object(cu.__extends)(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),au(null==e.transformResults,"Transform results received by SetMutation.");var n=Gl.getPostMutationVersion(t);return new $u(this.key,n,this.value,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Gl.getPostMutationVersion(t);return new $u(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(Gl),Wl=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=ql.Patch,o}return Object(cu.__extends)(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),au(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return t;var n=Gl.getPostMutationVersion(t),r=this.patchDocument(t);return new $u(this.key,n,r,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Gl.getPostMutationVersion(t),i=this.patchDocument(t);return new $u(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof $u?t.data:gl.EMPTY)},e.prototype.patchObject=function(t){for(var e=0,n=this.fieldMask.fields;e<n.length;e++){var r=n[e],i=this.data.field(r);t=void 0!==i?t.set(r,i):t.delete(r)}return t},e}(Gl),zl=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=ql.Transform,r.precondition=Hl.exists(!0),r}return Object(cu.__extends)(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),au(null!=e.transformResults,"Transform results missing for TransformMutation.");var n=e.transformResults;if(!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.transformObject(r.data,n);return new $u(this.key,r.version,i,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new $u(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Lu(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){au(t instanceof $u,"Unknown MaybeDocument type "+t);var e=t;return au(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],s=o.transform;if(!(s instanceof jl))return su("Encountered unknown transform: "+s);var a=null;e instanceof $u&&(a=e.field(o.field)||null),n.push(new dl(t,a))}return n},e.prototype.transformObject=function(t,e){au(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.transform,o=r.field;if(!(i instanceof jl))return su("Encountered unknown transform: "+i);t=t.set(o,e[n])}return t},e}(Gl),Ql=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=ql.Delete,r}return Object(cu.__extends)(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),au(null==e.transformResults,"Transform results received by DeleteMutation."),new Xu(this.key,Ll.MIN)},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&au(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Xu(this.key,Ll.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(Gl),$l=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function Xl(t){switch(t){case hu.OK:return su("Treated status OK as error");case hu.CANCELLED:case hu.UNKNOWN:case hu.DEADLINE_EXCEEDED:case hu.RESOURCE_EXHAUSTED:case hu.INTERNAL:case hu.UNAVAILABLE:case hu.UNAUTHENTICATED:return!1;case hu.INVALID_ARGUMENT:case hu.NOT_FOUND:case hu.ALREADY_EXISTS:case hu.PERMISSION_DENIED:case hu.FAILED_PRECONDITION:case hu.ABORTED:case hu.OUT_OF_RANGE:case hu.UNIMPLEMENTED:case hu.DATA_LOSS:return!0;default:return su("Unknown status code: "+t)}}function Jl(t){if(void 0===t)return iu("GRPC error has no .code"),hu.UNKNOWN;switch(t){case Vl.OK:return hu.OK;case Vl.CANCELLED:return hu.CANCELLED;case Vl.UNKNOWN:return hu.UNKNOWN;case Vl.DEADLINE_EXCEEDED:return hu.DEADLINE_EXCEEDED;case Vl.RESOURCE_EXHAUSTED:return hu.RESOURCE_EXHAUSTED;case Vl.INTERNAL:return hu.INTERNAL;case Vl.UNAVAILABLE:return hu.UNAVAILABLE;case Vl.UNAUTHENTICATED:return hu.UNAUTHENTICATED;case Vl.INVALID_ARGUMENT:return hu.INVALID_ARGUMENT;case Vl.NOT_FOUND:return hu.NOT_FOUND;case Vl.ALREADY_EXISTS:return hu.ALREADY_EXISTS;case Vl.PERMISSION_DENIED:return hu.PERMISSION_DENIED;case Vl.FAILED_PRECONDITION:return hu.FAILED_PRECONDITION;case Vl.ABORTED:return hu.ABORTED;case Vl.OUT_OF_RANGE:return hu.OUT_OF_RANGE;case Vl.UNIMPLEMENTED:return hu.UNIMPLEMENTED;case Vl.DATA_LOSS:return hu.DATA_LOSS;default:return su("Unknown status code: "+t)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(Vl||(Vl={}));var Yl=function(){function t(t){this.comparator=t,this.data=new Ju(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Zl=new Ju(Qu.comparator);function tc(){return Zl}var ec=new Ju(Qu.comparator);function nc(){return ec}var rc=new Ju(Qu.comparator);function ic(){return rc}var oc=new Yl(Qu.comparator);function sc(){return oc}var ac,uc=function(){function t(t,e,n){this.snapshotVersion=t,this.targetChanges=e,this.documentUpdates=n}return t.prototype.addDocumentUpdate=function(t){this.documentUpdates=this.documentUpdates.insert(t.key,t)},t.prototype.handleExistenceFilterMismatch=function(t){this.targetChanges[t]={mapping:new cc,snapshotVersion:Ll.MIN,currentStatusUpdate:ac.MarkNotCurrent,resumeToken:lu()}},t}();!function(t){t[t.None=0]="None",t[t.MarkNotCurrent=1]="MarkNotCurrent",t[t.MarkCurrent=2]="MarkCurrent"}(ac||(ac={}));var lc=sc(),cc=function(){function t(){this.docs=lc}return Object.defineProperty(t.prototype,"documents",{get:function(){return this.docs},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this.docs=this.docs.add(t)},t.prototype.delete=function(t){this.docs=this.docs.delete(t)},t.prototype.isEqual=function(t){return null!==t&&this.docs.isEqual(t.docs)},t}(),hc=function(){function t(){this.addedDocuments=lc,this.removedDocuments=lc}return t.prototype.applyToKeySet=function(t){var e=t;return this.addedDocuments.forEach(function(t){return e=e.add(t)}),this.removedDocuments.forEach(function(t){return e=e.delete(t)}),e},t.prototype.add=function(t){this.addedDocuments=this.addedDocuments.add(t),this.removedDocuments=this.removedDocuments.delete(t)},t.prototype.delete=function(t){this.addedDocuments=this.addedDocuments.delete(t),this.removedDocuments=this.removedDocuments.add(t)},t.prototype.isEqual=function(t){return null!==t&&this.addedDocuments.isEqual(t.addedDocuments)&&this.removedDocuments.isEqual(t.removedDocuments)},t}(),dc=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},fc=function(t,e){this.targetId=t,this.existenceFilter=e},pc=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),mc=function(){return function(t,e,n,r){void 0===n&&(n=lu()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),gc=function(){function t(t,e,n){this.snapshotVersion=t,this.listenTargets=e,this.existenceFilters={},this.targetChanges={},this.documentUpdates=tc(),this.frozen=!1,this.pendingTargetResponses=vu(n)}return t.prototype.add=function(t){au(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),t instanceof dc?this.addDocumentChange(t):t instanceof mc?this.addTargetChange(t):t instanceof fc?this.addExistenceFilterChange(t):su("Unknown watch change: "+t)},t.prototype.addChanges=function(t){var e=this;au(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),t.forEach(function(t){return e.add(t)})},t.prototype.createRemoteEvent=function(){var t=this,e=this.targetChanges;return mu(this.targetChanges,function(n){t.isActiveTarget(n)||delete e[n]}),this.frozen=!0,new uc(this.snapshotVersion,e,this.documentUpdates)},t.prototype.ensureTargetChange=function(t){var e=this.targetChanges[t];return e||(e={currentStatusUpdate:ac.None,snapshotVersion:this.snapshotVersion,mapping:new hc,resumeToken:lu()},this.targetChanges[t]=e),e},t.prototype.isActiveTarget=function(t){return!pu(this.pendingTargetResponses,t)&&pu(this.listenTargets,t)},t.prototype.addDocumentChange=function(t){for(var e=!1,n=0,r=t.updatedTargetIds;n<r.length;n++)this.isActiveTarget(s=r[n])&&(this.ensureTargetChange(s).mapping.add(t.key),e=!0);for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s;this.isActiveTarget(s=o[i])&&(this.ensureTargetChange(s).mapping.delete(t.key),e=!0)}t.newDoc&&e&&(this.documentUpdates=this.documentUpdates.insert(t.key,t.newDoc))},t.prototype.addTargetChange=function(t){var e=this;t.targetIds.forEach(function(n){var r=e.ensureTargetChange(n);switch(t.state){case pc.NoChange:e.isActiveTarget(n)&&yc(r,t.resumeToken);break;case pc.Added:e.recordTargetResponse(n),pu(e.pendingTargetResponses,n)||(r.mapping=new hc,r.currentStatusUpdate=ac.None,delete e.existenceFilters[n]),yc(r,t.resumeToken);break;case pc.Removed:e.recordTargetResponse(n),au(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case pc.Current:e.isActiveTarget(n)&&(r.currentStatusUpdate=ac.MarkCurrent,yc(r,t.resumeToken));break;case pc.Reset:e.isActiveTarget(n)&&(r.mapping=new cc,yc(r,t.resumeToken));break;default:su("Unknown target watch change state: "+t.state)}})},t.prototype.recordTargetResponse=function(t){var e=(this.pendingTargetResponses[t]||0)-1;0===e?delete this.pendingTargetResponses[t]:this.pendingTargetResponses[t]=e},t.prototype.addExistenceFilterChange=function(t){this.isActiveTarget(t.targetId)&&(this.existenceFilters[t.targetId]=t.existenceFilter)},t}();function yc(t,e){e.length>0&&(t.resumeToken=e)}var vc,bc,_c=((vc={})[Nl.ASCENDING.name]="ASCENDING",vc[Nl.DESCENDING.name]="DESCENDING",vc),wc=((bc={})[Tl.LESS_THAN.name]="LESS_THAN",bc[Tl.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",bc[Tl.GREATER_THAN.name]="GREATER_THAN",bc[Tl.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",bc[Tl.EQUAL.name]="EQUAL",bc);function Ec(t,e){au(!El(t),e+" is missing")}function Cc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):su("can't parse "+t)}var Sc=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?hu.UNKNOWN:Jl(t.code);return new du(e,t.message||"")},t.prototype.toInt32Value=function(t){return El(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return El(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanos}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return Ml.fromISOString(t);au(!!t,"Cannot deserialize null or undefined timestamp.");var e=Cc(t.seconds||"0");return new Ml(e,t.nanos||0)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(au(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Fu.fromBase64String(t)):(au(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),Fu.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return au(!!t,"Trying to deserialize version that isn't set"),Ll.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=Ku.fromString(t);return au(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return au(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),au(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new Qu(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return 0===t.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?Ku.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new Ku(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new Ku(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return au(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof il)return{nullValue:"NULL_VALUE"};if(t instanceof ol)return{booleanValue:t.value()};if(t instanceof ul)return{integerValue:""+t.value()};if(t instanceof ll){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof cl?{stringValue:t.value()}:t instanceof gl?{mapValue:this.toMapValue(t)}:t instanceof yl?{arrayValue:this.toArrayValue(t)}:t instanceof hl?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof ml?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof fl?{bytesValue:this.toBytes(t.value())}:t instanceof pl?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:su("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(Tc(t,n,"nullValue"))return il.INSTANCE;if(Tc(t,n,"booleanValue"))return ol.of(t.booleanValue);if(Tc(t,n,"integerValue"))return new ul(Cc(t.integerValue));if(Tc(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return ll.NAN;if("Infinity"===t.doubleValue)return ll.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return ll.NEGATIVE_INFINITY}return new ll(t.doubleValue)}if(Tc(t,n,"stringValue"))return new cl(t.stringValue);if(Tc(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(Tc(t,n,"arrayValue"))return Ec(t.arrayValue,"arrayValue"),new yl((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if(Tc(t,n,"timestampValue"))return Ec(t.timestampValue,"timestampValue"),new hl(this.fromTimestamp(t.timestampValue));if(Tc(t,n,"geoPointValue"))return Ec(t.geoPointValue,"geoPointValue"),new ml(new Bu(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if(Tc(t,n,"bytesValue")){Ec(t.bytesValue,"bytesValue");var r=this.fromBlob(t.bytesValue);return new fl(r)}if(Tc(t,n,"referenceValue")){Ec(t.referenceValue,"referenceValue");var i=this.fromResourceName(t.referenceValue),o=new Hu(i.get(1),i.get(3)),s=new Qu(this.extractLocalPathFromResourceName(i));return new pl(o,s)}return su("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return au(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t){return new $u(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasLocalMutations:!1})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=gl.EMPTY;return gu(t,function(t,r){n=n.set(new zu([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){au(!!t.found,"Tried to deserialize a found document from a missing document."),Ec(t.found.name,"doc.found.name"),Ec(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new $u(e,n,r,{hasLocalMutations:!1})},t.prototype.fromMissing=function(t){au(!!t.missing,"Tried to deserialize a missing document from a found document."),au(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new Xu(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return Tc(t,e,"found")?this.fromFound(t):Tc(t,e,"missing")?this.fromMissing(t):su("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case pc.Added:return"ADD";case pc.Current:return"CURRENT";case pc.NoChange:return"NO_CHANGE";case pc.Removed:return"REMOVE";case pc.Reset:return"RESET";default:return su("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof fc)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof dc){var e;if(t.newDoc instanceof $u)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof Xu)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof mc){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return Vl.OK;switch(t){case hu.OK:return Vl.OK;case hu.CANCELLED:return Vl.CANCELLED;case hu.UNKNOWN:return Vl.UNKNOWN;case hu.DEADLINE_EXCEEDED:return Vl.DEADLINE_EXCEEDED;case hu.RESOURCE_EXHAUSTED:return Vl.RESOURCE_EXHAUSTED;case hu.INTERNAL:return Vl.INTERNAL;case hu.UNAVAILABLE:return Vl.UNAVAILABLE;case hu.UNAUTHENTICATED:return Vl.UNAUTHENTICATED;case hu.INVALID_ARGUMENT:return Vl.INVALID_ARGUMENT;case hu.NOT_FOUND:return Vl.NOT_FOUND;case hu.ALREADY_EXISTS:return Vl.ALREADY_EXISTS;case hu.PERMISSION_DENIED:return Vl.PERMISSION_DENIED;case hu.FAILED_PRECONDITION:return Vl.FAILED_PRECONDITION;case hu.ABORTED:return Vl.ABORTED;case hu.OUT_OF_RANGE:return Vl.OUT_OF_RANGE;case hu.UNIMPLEMENTED:return Vl.UNIMPLEMENTED;case hu.DATA_LOSS:return Vl.DATA_LOSS;default:return su("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return su("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(Tc(t,n,"targetChange")){Ec(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),s=t.targetChange.cause,a=s&&this.fromRpcStatus(s);e=new mc(r,i,o,a||null)}else if(Tc(t,n,"documentChange")){Ec(t.documentChange,"documentChange"),Ec(t.documentChange.document,"documentChange.name"),Ec(t.documentChange.document.name,"documentChange.document.name"),Ec(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,l=this.fromName(u.document.name),c=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),d=new $u(l,c,h,{hasLocalMutations:!1});e=new dc(u.targetIds||[],u.removedTargetIds||[],d.key,d)}else if(Tc(t,n,"documentDelete")){Ec(t.documentDelete,"documentDelete"),Ec(t.documentDelete.document,"documentDelete.document");var f=t.documentDelete;l=this.fromName(f.document),c=f.readTime?this.fromVersion(f.readTime):Ll.forDeletedDoc(),d=new Xu(l,c),e=new dc([],f.removedTargetIds||[],d.key,d)}else if(Tc(t,n,"documentRemove")){Ec(t.documentRemove,"documentRemove"),Ec(t.documentRemove.document,"documentRemove");var p=t.documentRemove;l=this.fromName(p.document),e=new dc([],p.removedTargetIds||[],l,null)}else{if(!Tc(t,n,"filter"))return su("Unknown change type "+JSON.stringify(t));Ec(t.filter,"filter"),Ec(t.filter.targetId,"filter.targetId");var m=t.filter,g=new $l(m.count||0);e=new fc(m.targetId,g)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?pc.NoChange:"ADD"===t?pc.Added:"REMOVE"===t?pc.Removed:"CURRENT"===t?pc.Current:"RESET"===t?pc.Reset:su("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!Tc(t,t.response_type,"targetChange"))return Ll.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ll.MIN:e.readTime?this.fromVersion(e.readTime):Ll.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Kl)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Ql)e={delete:this.toName(t.key)};else if(t instanceof Wl)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof zl))return su("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):Hl.NONE;if(t.update){Ec(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new Wl(r,i,o,n)}return new Kl(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new Ql(r,n);if(t.transform){r=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return au(!0===n.exists,'Transforms only support precondition "exists == true"'),new zl(r,s)}return su("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return au(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:su("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?Hl.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Hl.exists(t.exists):Hl.NONE},t.prototype.fromWriteResult=function(t){var e=this,n=t.updateTime?this.fromVersion(t.updateTime):null,r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults.map(function(t){return e.fromValue(t)})),new function(t,e){this.version=t,this.transformResults=e}(n,r)},t.prototype.fromWriteResults=function(t){var e=this;return(t||[]).map(function(t){return e.fromWriteResult(t)})},t.prototype.toFieldTransform=function(t){return au(t.transform instanceof jl,"Unknown transform: "+t.transform),{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"}},t.prototype.fromFieldTransform=function(t){au("REQUEST_TIME"===t.setToServerValue,"Unknown transform proto: "+JSON.stringify(t));var e=zu.fromServerFormat(t.fieldPath);return new Bl(e,jl.instance)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return au(1===e,"DocumentsTarget contained other than 1 document: "+e),Sl.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(Ku.EMPTY_PATH);else{var n=t.path;au(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;r>0&&(au(1===r,"StructuredQuery.from with more than one collection is not supported."),e=e.child(n.from[0].collectionId));var i=[];n.where&&(i=this.fromFilter(n.where));var o=[];n.orderBy&&(o=this.fromOrder(n.orderBy));var s=null;n.limit&&(s=this.fromInt32Value(n.limit));var a=null;n.startAt&&(a=this.fromCursor(n.startAt));var u=null;return n.endAt&&(u=this.fromCursor(n.endAt)),new Sl(e,o,i,s,a,u)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Cl.Listen:return null;case Cl.ExistenceFilterMismatch:return"existence-filter-mismatch";case Cl.LimboResolution:return"limbo-document";default:return su("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Il?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):su("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Ol(r,n)},t.prototype.toDirection=function(t){return _c[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Nl.ASCENDING;case"DESCENDING":return Nl.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return wc[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Tl.EQUAL;case"GREATER_THAN":return Tl.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Tl.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Tl.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Tl.LESS_THAN_OR_EQUAL;case"OPERATOR_UNSPECIFIED":return su("Unspecified relation");default:return su("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return zu.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Rl(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof Il?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:su("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new Il(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof kl?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof Al?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:su("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new kl(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Al(n);case"OPERATOR_UNSPECIFIED":return su("Unspecified filter");default:return su("Unknown filter")}},t.prototype.toDocumentMask=function(t){return{fieldPaths:t.fields.map(function(t){return t.canonicalString()})}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return zu.fromServerFormat(t)});return new Fl(e)},t}();function Tc(t,e,n){return e===n||!e&&n in t}var Ic=n("P9wo"),Ac=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){au(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){au(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){au(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){au(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){au(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){au(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),kc="Connection",Nc={BatchGetDocuments:"batchGet",Commit:"commit"},Oc="gl-js/ fire/"+Ya,Rc=function(){function t(t){this.databaseId=t.databaseId,this.pool=new Ic.XhrIoPool,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Oc,t["google-cloud-resource-prefix"]="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,s){r.pool.getObject(function(a){a.listenOnce(Ic.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case Ic.ErrorCode.NO_ERROR:var e=a.getResponseJson();ru(kc,"XHR received:",JSON.stringify(e)),o(e);break;case Ic.ErrorCode.TIMEOUT:ru(kc,'RPC "'+t+'" timed out'),s(new du(hu.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.ErrorCode.HTTP_ERROR:var n=a.getStatus();ru(kc,'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0?s(new du(function(t){switch(t){case 200:return hu.OK;case 400:return hu.INVALID_ARGUMENT;case 401:return hu.UNAUTHENTICATED;case 403:return hu.PERMISSION_DENIED;case 404:return hu.NOT_FOUND;case 409:return hu.ABORTED;case 416:return hu.OUT_OF_RANGE;case 429:return hu.RESOURCE_EXHAUSTED;case 499:return hu.CANCELLED;case 500:return hu.UNKNOWN;case 501:return hu.UNIMPLEMENTED;case 503:return hu.UNAVAILABLE;case 504:return hu.DEADLINE_EXCEEDED;default:return t>=200&&t<300?hu.OK:t>=400&&t<500?hu.FAILED_PRECONDITION:t>=500&&t<600?hu.INTERNAL:hu.UNKNOWN}}(n),"Server responded with status "+a.getStatusText())):(ru(kc,'RPC "'+t+'" failed'),s(new du(hu.UNAVAILABLE,"Connection failed.")));break;default:su('RPC "'+t+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{ru(kc,'RPC "'+t+'" completed.'),r.pool.releaseObject(a)}});var u=JSON.stringify(e);ru(kc,"XHR sending: ",i+" "+u);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),a.send(i,"POST",u,l,15)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",t,"/channel"],r=Object(Ic.createWebChannelTransport)(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},httpHeadersOverwriteParam:"$httpHeaders",sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e);var o=n.join("");ru(kc,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),a=!1,u=!1,l=new Ac({sendFn:function(t){u?ru(kc,"Not sending because WebChannel is closed:",t):(a||(ru(kc,"Opening WebChannel transport."),s.open(),a=!0),ru(kc,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),c=function(t,e){s.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return c(Ic.WebChannel.EventType.OPEN,function(){u||ru(kc,"WebChannel transport opened.")}),c(Ic.WebChannel.EventType.CLOSE,function(){u||(u=!0,ru(kc,"WebChannel transport closed"),l.callOnClose())}),c(Ic.WebChannel.EventType.ERROR,function(t){u||(u=!0,ru(kc,"WebChannel transport errored:",t),l.callOnClose(new du(hu.UNAVAILABLE,"The operation could not be completed")))}),c(Ic.WebChannel.EventType.MESSAGE,function(t){if(!u){var e=t.data[0];au(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){ru(kc,"WebChannel received error:",n);var r=n.status,i=function(t){var e=Vl[r];if(void 0!==e)return Jl(e)}(),o=n.message;void 0===i&&(i=hu.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),u=!0,l.callOnClose(new du(i,o)),s.close()}else ru(kc,"WebChannel received:",e),l.callOnMessage(e)}}),setTimeout(function(){l.callOnOpen()},0),l},t.prototype.makeUrl=function(t){var e=Nc[t];au(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();uu.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return t.prototype.loadConnection=function(t){return Promise.resolve(new Rc(t))},t.prototype.newSerializer=function(t){return new Sc(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}()));var xc,Dc=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new du(hu.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Du(1,"element")+".")}();for(var n=0;n<t.length;++n)if(Eu("FieldPath","string",n,t[n]),0===t[n].length)throw new du(hu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zu(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Ru("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(zu.keyField().canonicalString()),t}(),Pc=new RegExp("[~\\*/\\[\\]]");!function(t){t[t.Unknown=0]="Unknown",t[t.Healthy=1]="Healthy",t[t.Failed=2]="Failed"}(xc||(xc={}));var Mc=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),Lc=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),Vc=function(){function t(){this.changeMap=new Ju(Qu.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Mc.Added&&n.type===Mc.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Mc.Metadata&&n.type!==Mc.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Mc.Modified&&n.type===Mc.Modified?this.changeMap=this.changeMap.insert(e,{type:Mc.Modified,doc:t.doc}):t.type===Mc.Modified&&n.type===Mc.Added?this.changeMap=this.changeMap.insert(e,{type:Mc.Added,doc:t.doc}):t.type===Mc.Removed&&n.type===Mc.Added?this.changeMap=this.changeMap.remove(e):t.type===Mc.Removed&&n.type===Mc.Modified?this.changeMap=this.changeMap.insert(e,{type:Mc.Removed,doc:n.doc}):t.type===Mc.Added&&n.type===Mc.Removed?this.changeMap=this.changeMap.insert(e,{type:Mc.Modified,doc:t.doc}):su("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Uc=function(){function t(t,e,n,r,i,o,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.fromCache=i,this.hasPendingWrites=o,this.syncStateChanged=s}return t.prototype.isEqual=function(t){if(this.fromCache!==t.fromCache||this.hasPendingWrites!==t.hasPendingWrites||this.syncStateChanged!==t.syncStateChanged||!this.query.isEqual(t.query)||!this.docs.isEqual(t.docs)||!this.oldDocs.isEqual(t.oldDocs))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Fc=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Qu.comparator(e.key,n.key)}:function(t,e){return Qu.comparator(t.key,e.key)},this.keyedMap=nc(),this.sortedSet=new Ju(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.prevDoc=function(t){au(this.has(t),"Trying to get a previous document to non-existing key: "+t);var e=this.keyedMap.get(t);return this.sortedSet.getPredecessorKey(e)},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),jc=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){gu(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return yu(this.inner)},t}(),Bc=function(){function t(t){this.syncEngine=t,this.queries=new jc(function(t){return t.canonicalId()}),this.onlineState=xc.Unknown,this.syncEngine.subscribe(this.onChange.bind(this),this.onError.bind(this))}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new function(){this.listeners=[]},this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){var e=t.query,n=!1,r=this.queries.get(e);if(r){var i=r.listeners.indexOf(t);i>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length)}return n?(this.queries.delete(e),this.syncEngine.unlisten(e)):Promise.resolve()},t.prototype.onChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,s=i.listeners;o<s.length;o++)s[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),qc=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=xc.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(au(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeDocumentMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Mc.Metadata&&e.push(i)}t=new Uc(t.query,t.docs,t.oldDocs,e,t.fromCache,t.hasPendingWrites,t.syncStateChanged)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return au(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==xc.Failed?(au(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===xc.Failed)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeQueryMetadataChanges},t.prototype.raiseInitialEvent=function(e){au(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=new Uc(e.query,e.docs,Fc.emptySet(e.docs),t.getInitialViewChanges(e),e.fromCache,e.hasPendingWrites,!0),this.raisedInitialEvent=!0,this.queryObserver.next(e)},t.getInitialViewChanges=function(t){var e=[];return t.docs.forEach(function(t){e.push({type:Mc.Added,doc:t})}),e},t}(),Hc=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&su("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return e.reduce(function(t,e,n){return t.next(function(){return e})},t.resolve())},t.map=function(e){var n=[],r=!0,i=t.resolve(null);return e.reduce(function(t,e){return t.next(function(t){return r||n.push(t),r=!1,e})},i).next(function(t){return n.push(t),n})},t}(),Gc=function(){function t(){this.isEager=!0,this.sources=[],this.potentialGarbage=sc()}return t.prototype.addGarbageSource=function(t){this.sources.push(t),t.setGarbageCollector(this)},t.prototype.removeGarbageSource=function(t){this.sources.splice(this.sources.indexOf(t),1),t.setGarbageCollector(null)},t.prototype.addPotentialGarbageKey=function(t){this.potentialGarbage=this.potentialGarbage.add(t)},t.prototype.collectGarbage=function(t){var e=this,n=[],r=sc();return this.potentialGarbage.forEach(function(i){var o=e.documentHasAnyReferences(t,i);n.push(o.next(function(t){return t||(r=r.add(i)),Hc.resolve()}))}),this.potentialGarbage=sc(),Hc.waitFor(n).next(function(){return r})},t.prototype.documentHasAnyReferences=function(t,e){var n=Hc.resolve(!1);return this.sources.map(function(n){return function(){return n.containsKey(t,e)}}).reduce(function(t,e){return t.next(function(t){return t?Hc.resolve(!0):e()})},n)},t}(),Kc=function(){function t(t,e,n){this.query=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e){for(var n=sc(),r=sc(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case Mc.Added:n=n.add(s.doc.key);break;case Mc.Removed:r=r.add(s.doc.key)}}return new t(e.query,n,r)},t}(),Wc=function(){function t(){this.refsByKey=new Yl(zc.compareByKey),this.refsByTarget=new Yl(zc.compareByTargetId),this.garbageCollector=null}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new zc(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new zc(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=Qu.EMPTY,r=new zc(n,t),i=new zc(n,t+1);this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t)})},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t),null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(t.key)},t.prototype.referencesForId=function(t){var e=Qu.EMPTY,n=new zc(e,t),r=new zc(e,t+1),i=sc();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=new zc(e,0),r=this.refsByKey.firstAfterOrEqual(n);return Hc.resolve(null!==r&&e.isEqual(r.key))},t}(),zc=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return Qu.comparator(t.key,e.key)||Mu(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return Mu(t.targetOrBatchId,e.targetOrBatchId)||Qu.comparator(t.key,e.key)},t}(),Qc=1,$c=function(t){return t[t.LocalStore=0]="LocalStore",t[t.SyncEngine=1]="SyncEngine",t}({}),Xc=function(){function t(t,e){void 0===e&&(e=0),this.generatorId=t;var n=e>>Qc<<Qc;this.previousId=e-n>=t?n|this.generatorId:(n|this.generatorId)-(1<<Qc)}return t.prototype.next=function(){return this.previousId+=1<<Qc,this.previousId},t.forLocalStore=function(e){return void 0===e&&(e=0),new t($c.LocalStore,e)},t.forSyncEngine=function(){return new t($c.SyncEngine)},t}(),Jc=function(t){this.key=t},Yc=function(t){this.key=t},Zc=function(){function t(t,e){this.query=t,this.syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=sc(),this.mutatedKeys=sc(),this.documentSet=new Fc(t.docComparator.bind(t))}return t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Vc,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),c=e instanceof $u?e:null;if(c&&(au(t.isEqual(c.key),"Mismatching keys found in document changes: "+t+" != "+c.key),c=n.query.matches(c)?c:null),c?(s=s.add(c),o=c.hasLocalMutations?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)),l&&c){var h=l.data.isEqual(c.data);h&&l.hasLocalMutations===c.hasLocalMutations||(r.track(h?{type:Mc.Metadata,doc:c}:{type:Mc.Modified,doc:c}),u&&n.query.docComparator(c,u)>0&&(a=!0))}else!l&&c?r.track({type:Mc.Added,doc:c}):l&&!c&&(r.track({type:Mc.Removed,doc:l}),u&&(a=!0))}),this.query.hasLimit())for(;s.size>this.query.limit;){var l=s.last();s=s.delete(l.key),r.track({type:Mc.Removed,doc:l})}return au(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},t.prototype.applyChanges=function(t,e){var n=this;au(!t.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var i=t.changeSet.getChanges();i.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Mc.Added:return 1;case Mc.Modified:case Mc.Metadata:return 2;case Mc.Removed:return 0;default:return su("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||n.query.docComparator(t.doc,e.doc)});var o=this.applyTargetChange(e),s=0===this.limboDocuments.size&&this.current?Lc.Synced:Lc.Local,a=s!==this.syncState;return this.syncState=s,0!==i.length||a?{snapshot:new Uc(this.query,t.documentSet,r,i,s===Lc.Local,!t.mutatedKeys.isEmpty(),a),limboChanges:o}:{limboChanges:o}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===xc.Failed?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Vc,mutatedKeys:this.mutatedKeys,needsRefill:!1})):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this.syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;if(t){var n=t.mapping;switch(n instanceof cc?this.syncedDocuments=n.documents:n instanceof hc&&(this.syncedDocuments=n.applyToKeySet(this.syncedDocuments)),t.currentStatusUpdate){case ac.MarkCurrent:this.current=!0;break;case ac.MarkNotCurrent:this.current=!1;break;case ac.None:break;default:su("Unknown current status update: "+t.currentStatusUpdate)}}var r=this.limboDocuments;this.limboDocuments=sc(),this.current&&this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var i=[];return r.forEach(function(t){e.limboDocuments.has(t)||i.push(new Yc(t))}),this.limboDocuments.forEach(function(t){r.has(t)||i.push(new Jc(t))}),i},t}(),th=function(){function t(t,e,n){this.localStore=t,this.remoteStore=e,this.currentUser=n,this.viewHandler=null,this.errorHandler=null,this.queryViewsByQuery=new jc(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Ju(Qu.comparator),this.limboKeysByTarget={},this.limboDocumentRefs=new Wc,this.limboCollector=new Gc,this.mutationUserCallbacks={},this.targetIdGenerator=Xc.forSyncEngine()}return t.prototype.subscribe=function(t,e){au(null!==t&&null!==e,"View and error handlers cannot be null"),au(null===this.viewHandler&&null===this.errorHandler,"SyncEngine already has a subscriber."),this.viewHandler=t,this.errorHandler=e,this.limboCollector.addGarbageSource(this.limboDocumentRefs)},t.prototype.listen=function(t){var e=this;return this.assertSubscribed("listen()"),au(!this.queryViewsByQuery.has(t),"We already listen to the query: "+t),this.localStore.allocateQuery(t).then(function(n){return e.localStore.executeQuery(t).then(function(r){return e.localStore.remoteDocumentKeys(n.targetId).then(function(i){var o=new Zc(t,i),s=o.computeDocChanges(r),a=o.applyChanges(s);au(0===a.limboChanges.length,"View returned limbo docs before target ack from the server."),au(!!a.snapshot,"applyChanges for new view should always return a snapshot");var u=new function(t,e,n,r){this.query=t,this.targetId=e,this.resumeToken=n,this.view=r}(t,n.targetId,n.resumeToken,o);e.queryViewsByQuery.set(t,u),e.queryViewsByTarget[n.targetId]=u,e.viewHandler([a.snapshot]),e.remoteStore.listen(n)})}).then(function(){return n.targetId})})},t.prototype.unlisten=function(t){var e=this;this.assertSubscribed("unlisten()");var n=this.queryViewsByQuery.get(t);return au(!!n,"Trying to unlisten on query not found:"+t),this.localStore.releaseQuery(t).then(function(){return e.remoteStore.unlisten(n.targetId),e.removeAndCleanupQuery(n).then(function(){return e.localStore.collectGarbage()})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),au(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!El(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),mu(t.targetChanges,function(n,r){var i=e.limboKeysByTarget[n];i&&r.currentStatusUpdate===ac.MarkCurrent&&!t.documentUpdates.get(i)&&t.addDocumentUpdate(new Xu(i,t.snapshotVersion))}),this.localStore.applyRemoteEvent(t).then(function(n){return e.emitNewSnapsAndNotifyLocalStore(n,t)})},t.prototype.applyOnlineStateChange=function(t){var e=[];this.queryViewsByQuery.forEach(function(n,r){var i=r.view.applyOnlineStateChange(t);au(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&e.push(i.snapshot)}),this.viewHandler(e)},t.prototype.rejectListen=function(t,e){var n=this;this.assertSubscribed("rejectListens()");var r=this.limboKeysByTarget[t];if(r){this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboKeysByTarget[t];var i=new Ju(Qu.comparator);i=i.insert(r,new Xu(r,Ll.forDeletedDoc()));var o=new uc(Ll.MIN,{},i);return this.applyRemoteEvent(o)}var s=this.queryViewsByTarget[t];return au(!!s,"Unknown targetId: "+t),this.localStore.releaseQuery(s.query).then(function(){return n.removeAndCleanupQuery(s).then(function(){n.errorHandler(s.query,e)})})},t.prototype.applySuccessfulWrite=function(t){var e=this;return this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(t.batch.batchId,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.emitNewSnapsAndNotifyLocalStore(t)})},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(t){return n.emitNewSnapsAndNotifyLocalStore(t)})},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Ju(Mu)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(au(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){return this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.limboDocumentRefs.removeReferencesForId(t.targetId),this.gcLimboDocuments()},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Jc?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof Yc?(ru("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t)):su("Unknown limbo change: "+JSON.stringify(i))}return this.gcLimboDocuments()},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){ru("SyncEngine","New document in limbo: "+e);var n=this.targetIdGenerator.next(),r=Sl.atPath(e.path);this.limboKeysByTarget[n]=e,this.remoteStore.listen(new Ul(r,n,Cl.Listen)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.gcLimboDocuments=function(){var t=this;return this.limboCollector.collectGarbage(null).next(function(e){e.forEach(function(e){var n=t.limboTargetsByKey.get(e);null!==n&&(t.remoteStore.unlisten(n),t.limboTargetsByKey=t.limboTargetsByKey.remove(e),delete t.limboKeysByTarget[n])})}).toPromise()},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){var n=this,r=[],i=[],o=[];return this.queryViewsByQuery.forEach(function(s,a){o.push(Promise.resolve().then(function(){var e=a.view.computeDocChanges(t);return e.needsRefill?n.localStore.executeQuery(a.query).then(function(t){return a.view.computeDocChanges(t,e)}):e}).then(function(t){var o=a.view.applyChanges(t,e&&e.targetChanges[a.targetId]);return n.updateTrackedLimbos(a.targetId,o.limboChanges).then(function(){if(o.snapshot){r.push(o.snapshot);var t=Kc.fromSnapshot(o.snapshot);i.push(t)}})}))}),Promise.all(o).then(function(){return n.viewHandler(r),n.localStore.notifyLocalViewChanges(i)}).then(function(){return n.localStore.collectGarbage()})},t.prototype.assertSubscribed=function(t){au(null!==this.viewHandler&&null!==this.errorHandler,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleUserChange=function(t){var e=this;return this.currentUser=t,this.localStore.handleUserChange(t).then(function(t){return e.emitNewSnapsAndNotifyLocalStore(t)}).then(function(){return e.remoteStore.handleUserChange(t)})},t}(),eh=-1,nh=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&au(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;au(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&au(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=sc(),e=0,n=this.mutations;e<n.length;e++)t=t.add(n[e].key);return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Lu(this.mutations,t.mutations)},t.prototype.isTombstone=function(){return 0===this.mutations.length},t.prototype.toTombstone=function(){return new t(this.batchId,this.localWriteTime,[])},t}(),rh=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){au(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=ic(),s=e.mutations,a=0;a<s.length;a++){var u=r[a].version;null===u&&(u=n),o=o.insert(s[a].key,u)}return new t(e,n,r,i,o)},t}(),ih="\x01",oh="\x01",sh="\x10",ah="\x11";function uh(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ch(e)),e=lh(t.get(n),e);return ch(e)}function lh(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=ih+sh;break;case ih:n+=ih+ah;break;default:n+=o}}return n}function ch(t){return t+ih+oh}function hh(t){var e=t.length;if(au(e>=2,"Invalid path "+t),2===e)return au(t.charAt(0)===ih&&t.charAt(1)===oh,"Non-empty path "+t+" had length 2"),Ku.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf(ih,o);switch((s<0||s>n)&&su('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case oh:var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case sh:i+=t.substring(o,s),i+="\0";break;case ah:i+=t.substring(o,s+1);break;default:su('Invalid encoded resource path: "'+t+'"')}o=s+2}return new Ku(r)}function dh(t,e){au(0===e,"Unexpected upgrade from version "+e),t.createObjectStore(mh.store,{keyPath:mh.keyPath}),t.createObjectStore(gh.store,{keyPath:gh.keyPath}),t.createObjectStore(_h.store,{keyPath:_h.keyPath}).createIndex(_h.documentTargetsIndex,_h.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bh.store,{keyPath:bh.keyPath}).createIndex(bh.queryTargetsIndexName,bh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(yh.store),t.createObjectStore(vh.store),t.createObjectStore(ph.store),t.createObjectStore(wh.store)}var fh=function(t,e){this.seconds=t,this.nanos=e},ph=function(){function t(t,e){this.ownerId=t,this.leaseTimestampMs=e}return t.store="owner",t}(),mh=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),gh=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath=["userId","batchId"],t}(),yh=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,uh(e)]},t.key=function(t,e,n){return[t,uh(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),vh=function(){function t(t,e){this.noDocument=t,this.document=e}return t.store="remoteDocuments",t}(),bh=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),_h=function(){function t(t,e){this.targetId=t,this.path=e}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),wh=function(){function t(t,e,n){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Eh=[mh.store,gh.store,yh.store,vh.store,bh.store,ph.store,wh.store,_h.store],Ch=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return au(t.isAvailable(),"IndexedDB not supported in current environment."),ru("SimpleDb","Opening database:",e),new Hc(function(i,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){i(new t(e.target.result))},s.onerror=function(t){o(t.target.error)},s.onupgradeneeded=function(t){ru("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion),r(t.target.result,t.oldVersion)}}).toPromise()},t.delete=function(t){return ru("SimpleDb","Removing database:",t),Ah(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.prototype.runTransaction=function(t,e,n){var r=new Th(this.db,t,e),i=n(r).catch(function(t){return r.abort(),Hc.reject(t)}).toPromise();return r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),Sh=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Ah(this.dbCursor.delete())},t}(),Th=function(){function t(t,e,n){var r=this;this.aborted=!1,this.transaction=t.transaction(n,e),this.completionPromise=new Promise(function(t,e){r.transaction.onabort=r.transaction.oncomplete=function(e){t()},r.transaction.onerror=function(t){e(t.target.error)}})}return t.prototype.abort=function(){this.aborted||(ru("SimpleDb","Aborting transaction."),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return au(!!e,"Object store not part of transaction: "+t),new Ih(e)},t}(),Ih=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ru("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ru("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ah(n)},t.prototype.get=function(t){var e=this;return Ah(this.store.get(t)).next(function(n){return void 0===n&&(n=null),ru("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return ru("SimpleDb","DELETE",this.store.name,t),Ah(this.store.delete(t))},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){ru("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateCursor=function(t,e){var n=[];return new Hc(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Sh(i),s=e(i.primaryKey,i.value,o);s instanceof Hc&&n.push(s),o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return Hc.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(au(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ah(t){return new Hc(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.error)}})}var kh=function(){function t(t,e){this.userId=t,this.serializer=e,this.garbageCollector=null}return t.forUser=function(e,n){return au(""!==e.uid,"UserID must not be an empty string."),new t(e.isUnauthenticated()?"":e.uid,n)},t.prototype.start=function(e){var n=this;return t.loadNextBatchIdFromDb(e).next(function(t){return n.nextBatchId=t,xh(e).get(n.userId)}).next(function(t){return t||(t=new mh(n.userId,eh,"")),n.metadata=t,n.metadata.lastAcknowledgedBatchId>=n.nextBatchId?n.checkEmpty(e).next(function(t){return au(t,"Reset nextBatchID is only possible when the queue is empty"),n.metadata.lastAcknowledgedBatchId=eh,xh(e).put(n.metadata)}):Hc.resolve()})},t.loadNextBatchIdFromDb=function(t){var e=eh;return Oh(t).iterate({reverse:!0},function(t,n,r){var i,o,s=t[0];if(t[1]>e&&(e=n.batchId),""===s)r.done();else{var a=(o=(i=s).length-1,0===i.length?"":"\0"===i.charAt(o)?i.substring(0,o):i.substring(0,o)+String.fromCharCode(i.charCodeAt(o)-1));r.skip([a])}}).next(function(){return e+1})},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound(this.keyForBatchId(Number.NEGATIVE_INFINITY),this.keyForBatchId(Number.POSITIVE_INFINITY));return Oh(t).iterate({range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.getNextBatchId=function(t){return Hc.resolve(this.nextBatchId)},t.prototype.getHighestAcknowledgedBatchId=function(t){return Hc.resolve(this.metadata.lastAcknowledgedBatchId)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;return au(r>this.metadata.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),this.metadata.lastAcknowledgedBatchId=r,this.metadata.lastStreamToken=Nh(n),xh(t).put(this.metadata)},t.prototype.getLastStreamToken=function(t){return Hc.resolve(this.metadata.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.metadata.lastStreamToken=Nh(e),xh(t).put(this.metadata)},t.prototype.addMutationBatch=function(t,e,n){var r=this,i=this.nextBatchId;this.nextBatchId++;var o=new nh(i,e,n),s=this.serializer.toDbMutationBatch(this.userId,o);return Oh(t).put(s).next(function(){for(var e=0,o=n;e<o.length;e++){var s=o[e],a=(uh(s.key.path),yh.key(r.userId,s.key.path,i));Rh(t).put(a,yh.PLACEHOLDER)}return Hc.waitFor([])}).next(function(){return o})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Oh(t).get(this.keyForBatchId(e)).next(function(t){return t?n.serializer.fromDbMutationBatch(t):null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=IDBKeyRange.lowerBound(this.keyForBatchId(e+1)),i=null;return Oh(t).iterate({range:r},function(t,r,o){r.userId===n.userId&&(au(r.batchId>e,"Should have found mutation after "+e),i=n.serializer.fromDbMutationBatch(r)),o.done()}).next(function(){return i})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound(this.keyForBatchId(eh),this.keyForBatchId(Number.POSITIVE_INFINITY));return Oh(t).loadAll(n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesThroughBatchId=function(t,e){var n=this,r=IDBKeyRange.bound(this.keyForBatchId(eh),this.keyForBatchId(e));return Oh(t).loadAll(r).next(function(t){return t.map(function(t){return n.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=yh.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Rh(t).iterate({range:i},function(r,i,s){var a=r[0],u=r[2],l=hh(r[1]);if(a===n.userId&&e.path.isEqual(l)){var c=n.keyForBatchId(u);return Oh(t).get(c).next(function(t){null===t&&su("Dangling document-mutation reference found: "+r+" which points to "+c),o.push(n.serializer.fromDbMutationBatch(t))})}s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;au(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var r=e.path,i=r.length+1,o=yh.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Yl(Mu);return Rh(t).iterate({range:s},function(t,e,o){var s=t[0],u=t[2],l=hh(t[1]);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(u)):o.done()}).next(function(){var e=[],r=[];return a.forEach(function(i){var o=n.keyForBatchId(i);r.push(Oh(t).get(o).next(function(t){null===t&&su("Dangling document-mutation reference found, which points to "+o),e.push(n.serializer.fromDbMutationBatch(t))}))}),Hc.waitFor(r).next(function(){return e})})},t.prototype.removeMutationBatches=function(t,e){for(var n=Oh(t),r=Rh(t),i=[],o=function(t){var e=IDBKeyRange.only(s.keyForBatchId(t.batchId)),o=0,a=n.iterate({range:e},function(t,e,n){return o++,n.delete()});i.push(a.next(function(){au(1===o,"Dangling document-mutation reference found: Missing batch "+t.batchId)}));for(var u=0,l=t.mutations;u<l.length;u++){var c=l[u],h=yh.key(s.userId,c.key.path,t.batchId);i.push(r.delete(h)),null!==s.garbageCollector&&s.garbageCollector.addPotentialGarbageKey(c.key)}},s=this,a=0,u=e;a<u.length;a++)o(u[a]);return Hc.waitFor(i)},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Hc.resolve();var r=IDBKeyRange.lowerBound(yh.prefixForUser(e.userId)),i=[];return Rh(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=hh(t[1]);i.push(o)}else r.done()}).next(function(){au(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=this,r=yh.prefixForPath(this.userId,e.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Rh(t).iterate({range:o,keysOnly:!0},function(t,e,r){t[0]===n.userId&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})},t.prototype.keyForBatchId=function(t){return[this.userId,t]},t}();function Nh(t){return au("string"==typeof t,"Persisting non-string stream token not supported."),t}function Oh(t){return Dh(t,gh.store)}function Rh(t){return Dh(t,yh.store)}function xh(t){return Dh(t,mh.store)}function Dh(t,e){return t instanceof Th?t.store(e):su("Invalid transaction object provided!")}var Ph=function(){function t(t){this.serializer=t,this.lastRemoteSnapshotVersion=Ll.MIN,this.metadata=new wh(0,0,Ll.MIN.toTimestamp()),this.garbageCollector=null}return t.prototype.start=function(t){var e=this;return Lh(t).get(wh.key).next(function(t){if(null!==t){e.metadata=t;var n=t.lastRemoteSnapshotVersion;e.lastRemoteSnapshotVersion=Ll.fromTimestamp(new Ml(n.seconds,n.nanos))}return Hc.resolve()})},t.prototype.getHighestTargetId=function(){return this.metadata.highestTargetId},t.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},t.prototype.setLastRemoteSnapshotVersion=function(t,e){return this.lastRemoteSnapshotVersion=e,this.metadata.lastRemoteSnapshotVersion=e.toTimestamp(),Lh(t).put(wh.key,this.metadata)},t.prototype.addQueryData=function(t,e){var n=this,r=e.targetId,i=Mh(t).put(this.serializer.toDbTarget(e));return r>this.metadata.highestTargetId?(this.metadata.highestTargetId=r,i.next(function(){return Lh(t).put(wh.key,n.metadata)})):i},t.prototype.removeQueryData=function(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){Mh(t).delete(e.targetId)})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Mh(t).iterate({range:i,index:bh.queryTargetsIndexName},function(t,r,i){var s=n.serializer.fromDbTarget(r);e.isEqual(s.query)&&(o=s,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=[],i=Vh(t);return e.forEach(function(t){var e=uh(t.path);r.push(i.put(new _h(n,e)))}),Hc.waitFor(r)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=[],o=Vh(t);return e.forEach(function(t){var e=uh(t.path);i.push(o.delete([n,e])),null!==r.garbageCollector&&r.garbageCollector.addPotentialGarbageKey(t)}),Hc.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Vh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return this.notifyGCForRemovedKeys(t,r).next(function(){return n.delete(r)})},t.prototype.notifyGCForRemovedKeys=function(t,e){var n=this,r=Vh(t);return null!==this.garbageCollector&&this.garbageCollector.isEager?r.iterate({range:e,keysOnly:!0},function(t,e,r){var i=hh(t[1]),o=new Qu(i);au(null!==n.garbageCollector,"GarbageCollector for query cache set to null during key removal."),n.garbageCollector.addPotentialGarbageKey(o)}):Hc.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Vh(t),i=sc();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=hh(t[1]),o=new Qu(r);i=i.add(o)}).next(function(){return i})},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){au(null!==t,"Persistence Transaction cannot be null for query cache containsKey");var n,r=uh(e.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return Vh(t).iterate({index:_h.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){o++,n.done()}).next(function(){return o>0})},t}();function Mh(t){return Uh(t,bh.store)}function Lh(t){return Uh(t,wh.store)}function Vh(t){return Uh(t,_h.store)}function Uh(t,e){return t instanceof Th?t.store(e):su("Invalid transaction object provided!")}var Fh=function(){function t(t){this.serializer=t}return t.prototype.addEntry=function(t,e){return jh(t).put(Bh(e.key),this.serializer.toDbRemoteDocument(e))},t.prototype.removeEntry=function(t,e){return jh(t).delete(Bh(e))},t.prototype.getEntry=function(t,e){var n=this;return jh(t).get(Bh(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,r=nc(),i=e.path.toArray(),o=IDBKeyRange.lowerBound(i);return jh(t).iterate({range:o},function(t,i,o){var s=n.serializer.fromDbRemoteDocument(i);e.path.isPrefixOf(s.key.path)?s instanceof $u&&e.matches(s)&&(r=r.insert(s.key,s)):o.done()}).next(function(){return r})},t}();function jh(t){return t instanceof Th?t.store(vh.store):su("Invalid transaction object provided!")}function Bh(t){return t.path.toArray()}var qh,Hh=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document);if(t.noDocument){var e=Qu.fromSegments(t.noDocument.path),n=t.noDocument.readTime,r=new Ml(n.seconds,n.nanos);return new Xu(e,Ll.fromTimestamp(r))}return su("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof $u){var e=this.remoteSerializer.toDocument(t);return new vh(null,e)}var n=t.key.path.toArray(),r=t.version.toTimestamp(),i=new fh(r.seconds,r.nanos);return new vh(new function(t,e){this.path=t,this.readTime=e}(n,i),null)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new gh(t,e.batchId,e.localWriteTime.toEpochMilliseconds(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=Ml.fromEpochMilliseconds(t.localWriteTimeMs);return new nh(t.batchId,r,n)},t.prototype.fromDbTarget=function(t){var e,n=new Ml(t.readTime.seconds,t.readTime.nanos),r=Ll.fromTimestamp(n);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Ul(e,t.targetId,Cl.Listen,r,t.resumeToken)},t.prototype.toDbTarget=function(t){au(Cl.Listen===t.purpose,"Only queries with purpose "+Cl.Listen+" may be stored, got "+t.purpose);var e,n=t.snapshotVersion.toTimestamp(),r=new fh(n.seconds,n.nanos);e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),au("string"==typeof t.resumeToken,"Persisting non-string resume token not supported.");var i=t.resumeToken;return new bh(t.targetId,t.query.canonicalId(),r,i,0,e)},t}(),Gh="There is another tab open with offline persistence enabled. Only one such tab is allowed at a time. The other tab must be closed or persistence must be disabled.",Kh=function(){function t(e,n){this.ownerId=this.generateOwnerId(),this.dbName=e+t.MAIN_DATABASE,this.serializer=new Hh(n),this.localStoragePrefix=e}return t.prototype.start=function(){var e=this;return t.isAvailable()?(au(!this.started,"IndexedDbPersistence double-started!"),this.started=!0,Ch.openOrCreate(this.dbName,1,dh).then(function(t){e.simpleDb=t}).then(function(){return e.tryAcquireOwnerLease()}).then(function(){e.scheduleOwnerLeaseRefreshes(),e.attachWindowUnloadHook()})):(this.persistenceError=new du(hu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled."),Promise.reject(this.persistenceError))},t.prototype.shutdown=function(){var t=this;return au(this.started,"IndexedDbPersistence shutdown without start!"),this.started=!1,this.detachWindowUnloadHook(),this.stopOwnerLeaseRefreshes(),this.releaseOwnerLease().then(function(){t.simpleDb.close()})},t.prototype.getMutationQueue=function(t){return kh.forUser(t,this.serializer)},t.prototype.getQueryCache=function(){return new Ph(this.serializer)},t.prototype.getRemoteDocumentCache=function(){return new Fh(this.serializer)},t.prototype.runTransaction=function(t,e){var n=this;return this.persistenceError?Promise.reject(this.persistenceError):(ru("IndexedDbPersistence","Starting transaction:",t),this.simpleDb.runTransaction("readwrite",Eh,function(t){return n.ensureOwnerLease(t).next(function(){return e(t)})}))},t.isAvailable=function(){return Ch.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.tryAcquireOwnerLease=function(){var t=this;return this.simpleDb.runTransaction("readwrite",[ph.store],function(e){var n=e.store(ph.store);return n.get("owner").next(function(e){if(t.validOwner(e))return ru("IndexedDbPersistence","Valid owner already. Failing. Current owner:",e),t.persistenceError=new du(hu.FAILED_PRECONDITION,Gh),Hc.reject(t.persistenceError);var r=new ph(t.ownerId,Date.now());return ru("IndexedDbPersistence","No valid owner. Acquiring owner lease. Current owner:",e,"New owner:",r),n.put("owner",r)})})},t.prototype.releaseOwnerLease=function(){var t=this;return this.simpleDb.runTransaction("readwrite",[ph.store],function(e){var n=e.store(ph.store);return n.get("owner").next(function(e){return null!==e&&e.ownerId===t.ownerId?(ru("IndexedDbPersistence","Releasing owner lease."),n.delete("owner")):Hc.resolve()})})},t.prototype.ensureOwnerLease=function(t){var e=this;return t.store(ph.store).get("owner").next(function(t){return null===t||t.ownerId!==e.ownerId?(e.persistenceError=new du(hu.FAILED_PRECONDITION,Gh),Hc.reject(e.persistenceError)):Hc.resolve()})},t.prototype.validOwner=function(t){var e=Date.now();return!(null===t||t.leaseTimestampMs<e-5e3||(t.leaseTimestampMs>e?(iu("Persistence owner-lease is in the future. Discarding.",t),1):t.ownerId===this.getZombiedOwnerId()))},t.prototype.scheduleOwnerLeaseRefreshes=function(){var t=this;this.ownerLeaseRefreshHandle=setInterval(function(){t.runTransaction("Refresh owner timestamp",function(e){return e.store(ph.store).put("owner",new ph(t.ownerId,Date.now()))}).catch(function(e){iu(e),t.stopOwnerLeaseRefreshes()})},4e3)},t.prototype.stopOwnerLeaseRefreshes=function(){this.ownerLeaseRefreshHandle&&(clearInterval(this.ownerLeaseRefreshHandle),this.ownerLeaseRefreshHandle=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;this.windowUnloadHandler=function(){t.setZombiedOwnerId(t.ownerId),t.shutdown()},window.addEventListener("unload",this.windowUnloadHandler)},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.getZombiedOwnerId=function(){try{var t=window.localStorage.getItem(this.zombiedOwnerLocalStorageKey());return ru("IndexedDbPersistence","Zombied ownerID from LocalStorage:",t),t}catch(t){return iu("Failed to get zombie owner id.",t),null}},t.prototype.setZombiedOwnerId=function(t){try{null===t?window.localStorage.removeItem(this.zombiedOwnerLocalStorageKey()):window.localStorage.setItem(this.zombiedOwnerLocalStorageKey(),t)}catch(t){iu("Failed to set zombie owner id.",t)}},t.prototype.zombiedOwnerLocalStorageKey=function(){return this.localStoragePrefix+"zombiedOwnerId"},t.prototype.generateOwnerId=function(){return Pu.newId()},t.MAIN_DATABASE="main",t}(),Wh=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.remoteDocumentCache.getEntry(t,e).next(function(r){return n.computeLocalDocument(t,e,r)})},t.prototype.getDocuments=function(t,e){var n=this,r=[],i=tc();return e.forEach(function(e){r.push(n.getDocument(t,e).next(function(t){t||(t=new Xu(e,Ll.forDeletedDoc())),i=i.insert(e,t)}))}),Hc.waitFor(r).next(function(){return i})},t.prototype.getDocumentsMatchingQuery=function(t,e){return Qu.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new Qu(e)).next(function(t){var e=nc();return t instanceof $u&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(e){return r.computeLocalDocuments(t,e)}).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){for(var i=sc(),o=0,s=e;o<s.length;o++)for(var a=0,u=s[o].mutations;a<u.length;a++){var l=u[a];n.get(l.key)||(i=i.add(l.key))}var c=[];return i.forEach(function(e){c.push(r.getDocument(t,e).next(function(t){t instanceof $u&&(n=n.insert(t.key,t))}))}),Hc.waitFor(c)}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t.prototype.computeLocalDocument=function(t,e,n){return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(t){for(var r=0,i=t;r<i.length;r++)n=i[r].applyToLocalView(e,n);return n})},t.prototype.computeLocalDocuments=function(t,e){var n=this,r=[];return e.forEach(function(i,o){r.push(n.computeLocalDocument(t,i,o).next(function(t){t instanceof $u?e=e.insert(t.key,t):t instanceof Xu?e=e.remove(t.key):su("Unknown MaybeDocument: "+t)}))}),Hc.waitFor(r).next(function(){return e})},t}(),zh=function(){function t(t){this.remoteDocumentCache=t,this.changes=tc()}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this.assertChanges().get(e);return n?Hc.resolve(n):this.remoteDocumentCache.getEntry(t,e)},t.prototype.apply=function(t){var e=this,n=[];return this.assertChanges().forEach(function(r,i){n.push(e.remoteDocumentCache.addEntry(t,i))}),this.changes=null,Hc.waitFor(n)},t.prototype.assertChanges=function(){return au(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Qh=function(){function t(t,e,n){this.persistence=t,this.garbageCollector=n,this.localViewReferences=new Wc,this.targetIds={},this.targetIdGenerator=Xc.forLocalStore(),this.heldBatchResults=[],this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Wh(this.remoteDocuments,this.mutationQueue),this.garbageCollector.addGarbageSource(this.localViewReferences),this.garbageCollector.addGarbageSource(this.queryCache),this.garbageCollector.addGarbageSource(this.mutationQueue)}return t.prototype.start=function(){var t=this;return this.persistence.runTransaction("Start LocalStore",function(e){return t.startMutationQueue(e).next(function(){return t.startQueryCache(e)})})},t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.garbageCollector.removeGarbageSource(e.mutationQueue),e.mutationQueue=e.persistence.getMutationQueue(t),e.garbageCollector.addGarbageSource(e.mutationQueue),e.startMutationQueue(n)}).next(function(){return e.localDocuments=new Wh(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=sc(),o=0,s=[r,t];o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++)for(var l=0,c=u[a].mutations;l<c.length;l++)i=i.add(c[l].key);return e.localDocuments.getDocuments(n,i)})})},t.prototype.startQueryCache=function(t){var e=this;return this.queryCache.start(t).next(function(){var t=e.queryCache.getHighestTargetId();e.targetIdGenerator=Xc.forLocalStore(t)})},t.prototype.startMutationQueue=function(t){var e=this;return this.mutationQueue.start(t).next(function(){return e.heldBatchResults=[],e.mutationQueue.getHighestAcknowledgedBatchId(t)}).next(function(n){return n!==eh?e.mutationQueue.getAllMutationBatchesThroughBatchId(t,n):Hc.resolve([])}).next(function(n){return n.length>0?e.mutationQueue.removeMutationBatches(t,n):Hc.resolve()})},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations",function(n){var r,i=Ml.now();return e.mutationQueue.addMutationBatch(n,i,t).next(function(t){var i=(r=t).keys();return e.localDocuments.getDocuments(n,i)}).next(function(t){return{batchId:r.batchId,changes:t}})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch",function(n){var r;return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){if(e.shouldHoldBatchResult(t.commitVersion))return e.heldBatchResults.push(t),r=sc(),Hc.resolve();var i=new zh(e.remoteDocuments);return e.releaseBatchResults(n,[t],i).next(function(t){return r=t,i.apply(n)})}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch",function(n){var r,i;return e.mutationQueue.lookupMutationBatch(n,t).next(function(i){return au(null!=i,"Attempt to reject nonexistent batch!"),r=i,e.mutationQueue.getHighestAcknowledgedBatchId(n).next(function(e){return au(t>e,"Acknowledged batches can't be rejected."),r})}).next(function(){return e.removeMutationBatch(n,r)}).next(function(t){return i=t,e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,i)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){return this.queryCache.getLastRemoteSnapshotVersion()},t.prototype.applyRemoteEvent=function(t){var e=this,n=new zh(this.remoteDocuments);return this.persistence.runTransaction("Apply remote event",function(r){var i=[];mu(t.targetChanges,function(t,n){var o=e.targetIds[t];if(o){var s=n.mapping;if(s)if(s instanceof cc)i.push(e.queryCache.removeMatchingKeysForTargetId(r,t).next(function(){return e.queryCache.addMatchingKeys(r,s.documents,t)}));else{if(!(s instanceof hc))return su("Unknown mapping type: "+JSON.stringify(s));i.push(e.queryCache.removeMatchingKeys(r,s.removedDocuments,t).next(function(){return e.queryCache.addMatchingKeys(r,s.addedDocuments,t)}))}var a=n.resumeToken;a.length>0&&(o=o.update({resumeToken:a,snapshotVersion:n.snapshotVersion}),e.targetIds[t]=o,i.push(e.queryCache.addQueryData(r,o)))}});var o=sc();t.documentUpdates.forEach(function(t,s){o=o.add(t),i.push(n.getEntry(r,t).next(function(r){null==r||s.version.isEqual(Ll.MIN)||s.version.compareTo(r.version)>=0?n.addEntry(s):ru("LocalStore","Ignoring outdated watch update for ",t,". Current version:",r.version," Watch version:",s.version),e.garbageCollector.addPotentialGarbageKey(t)}))});var s,a=e.queryCache.getLastRemoteSnapshotVersion(),u=t.snapshotVersion;return u.isEqual(Ll.MIN)||(au(u.compareTo(a)>=0,"Watch stream reverted to previous snapshot?? "+u+" < "+a),i.push(e.queryCache.setLastRemoteSnapshotVersion(r,u))),Hc.waitFor(i).next(function(){return e.releaseHeldBatchResults(r,n)}).next(function(t){return s=t,n.apply(r)}).next(function(){return e.localDocuments.getDocuments(r,o.unionWith(s))})})},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("Notify local view changes",function(n){for(var r=[],i=function(t){r.push(e.queryCache.getQueryData(n,t.query).next(function(n){au(null!==n,"Local view changes contain unallocated query.");var r=n.targetId;e.localViewReferences.addReferences(t.addedKeys,r),e.localViewReferences.removeReferences(t.removedKeys,r)}))},o=0,s=t;o<s.length;o++)i(s[o]);return Hc.waitFor(r)})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch",function(n){return void 0===t&&(t=eh),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){if(i)return r=i,Hc.resolve();var o=e.targetIdGenerator.next();return r=new Ul(t,o,Cl.Listen),e.queryCache.addQueryData(n,r)}).next(function(){return au(!e.targetIds[r.targetId],"Tried to allocate an already allocated query: "+t),e.targetIds[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t){var e=this;return this.persistence.runTransaction("Release query",function(n){return e.queryCache.getQueryData(n,t).next(function(r){return au(null!=r,"Tried to release nonexistent query: "+t),e.localViewReferences.removeReferencesForId(r.targetId),delete e.targetIds[r.targetId],e.garbageCollector.isEager?e.queryCache.removeQueryData(n,r):Hc.resolve()}).next(function(){if(yu(e.targetIds)){var t=new zh(e.remoteDocuments);return e.releaseHeldBatchResults(n,t).next(function(){t.apply(n)})}return Hc.resolve()})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.collectGarbage=function(){var t=this;return this.persistence.runTransaction("Garbage collection",function(e){return t.garbageCollector.collectGarbage(e).next(function(n){var r=[];return n.forEach(function(n){r.push(t.remoteDocuments.removeEntry(e,n))}),Hc.waitFor(r)})})},t.prototype.releaseHeldBatchResults=function(t,e){for(var n=[],r=0,i=this.heldBatchResults;r<i.length;r++){var o=i[r];if(!this.isRemoteUpToVersion(o.commitVersion))break;n.push(o)}return 0===n.length?Hc.resolve(sc()):(this.heldBatchResults.splice(0,n.length),this.releaseBatchResults(t,n,e))},t.prototype.isRemoteUpToVersion=function(t){var e=this.queryCache.getLastRemoteSnapshotVersion();return t.compareTo(e)<=0||yu(this.targetIds)},t.prototype.shouldHoldBatchResult=function(t){return!this.isRemoteUpToVersion(t)||this.heldBatchResults.length>0},t.prototype.releaseBatchResults=function(t,e,n){for(var r=this,i=Hc.resolve(),o=function(e){i=i.next(function(){return r.applyWriteToRemoteDocuments(t,e,n)})},s=0,a=e;s<a.length;s++)o(a[s]);return i.next(function(){return r.removeMutationBatches(t,e.map(function(t){return t.batch}))})},t.prototype.removeMutationBatch=function(t,e){return this.removeMutationBatches(t,[e])},t.prototype.removeMutationBatches=function(t,e){for(var n=sc(),r=0,i=e;r<i.length;r++)for(var o=0,s=i[r].mutations;o<s.length;o++)n=n.add(s[o].key);return this.mutationQueue.removeMutationBatches(t,e).next(function(){return n})},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=e.batch,i=r.keys(),o=Hc.resolve();return i.forEach(function(i){o=o.next(function(){return n.getEntry(t,i)}).next(function(t){var o=t,s=e.docVersions.get(i);au(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=r.applyToRemoteDocument(i,o,e))?n.addEntry(o):au(!t,"Mutation batch "+r+" applied to document "+t+" resulted in null"))})}),o},t}(),$h=function(){function t(){this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=eh,this.lastStreamToken=lu(),this.garbageCollector=null,this.batchesByDocumentKey=new Yl(zc.compareByKey)}return t.prototype.start=function(t){return 0===this.mutationQueue.length&&(this.nextBatchId=1,this.highestAcknowledgedBatchId=eh),au(this.highestAcknowledgedBatchId<this.nextBatchId,"highestAcknowledgedBatchId must be less than the nextBatchId"),Hc.resolve()},t.prototype.checkEmpty=function(t){return Hc.resolve(0===this.mutationQueue.length)},t.prototype.getNextBatchId=function(t){return Hc.resolve(this.nextBatchId)},t.prototype.getHighestAcknowledgedBatchId=function(t){return Hc.resolve(this.highestAcknowledgedBatchId)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;au(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged"),o=this.mutationQueue[i];return au(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),au(!o.isTombstone(),"Can't acknowledge a previously removed batch"),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,Hc.resolve()},t.prototype.getLastStreamToken=function(t){return Hc.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Hc.resolve()},t.prototype.addMutationBatch=function(t,e,n){au(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&au(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new nh(r,e,n);this.mutationQueue.push(i);for(var o=0,s=n;o<s.length;o++)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new zc(s[o].key,r));return Hc.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return Hc.resolve(this.findMutationBatch(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.mutationQueue.length;e=Math.max(e+1,this.highestAcknowledgedBatchId);for(var r=this.indexOfBatchId(e),i=r<0?0:r;i<n;i++){var o=this.mutationQueue[i];if(!o.isTombstone())return Hc.resolve(o)}return Hc.resolve(null)},t.prototype.getAllMutationBatches=function(t){return Hc.resolve(this.getAllLiveMutationBatchesBeforeIndex(this.mutationQueue.length))},t.prototype.getAllMutationBatchesThroughBatchId=function(t,e){var n=this.mutationQueue.length,r=this.indexOfBatchId(e);return r<0?r=0:r>=n?r=n:r++,Hc.resolve(this.getAllLiveMutationBatchesBeforeIndex(r))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new zc(e,0),i=new zc(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){au(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);au(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Hc.resolve(o)},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=r;Qu.isDocumentKey(o)||(o=o.child(""));var s=new zc(new Qu(o),0),a=new Yl(Mu);this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!r.isPrefixOf(e)&&(e.length===i&&(a=a.add(t.targetOrBatchId)),!0)},s);var u=[];return a.forEach(function(t){var e=n.findMutationBatch(t);null!==e&&u.push(e)}),Hc.resolve(u)},t.prototype.removeMutationBatches=function(t,e){var n=e.length;au(n>0,"Should not remove mutations when none exist.");var r=e[0].batchId,i=this.mutationQueue.length,o=this.indexOfExistingBatchId(r,"removed");au(this.mutationQueue[o].batchId===r,"Removed batches must exist in the queue");for(var s=1,a=o+1;s<n&&a<i;)(d=this.mutationQueue[a]).isTombstone()?a++:(au(d.batchId===e[s].batchId,"Removed batches must be contiguous in the queue"),s++,a++);if(0===o){for(;a<i&&(d=this.mutationQueue[a]).isTombstone();a++);this.mutationQueue.splice(o,a-o)}else for(var u=o;u<a;u++)this.mutationQueue[u]=this.mutationQueue[u].toTombstone();for(var l=this.batchesByDocumentKey,c=0,h=e;c<h.length;c++)for(var d,f=(d=h[c]).batchId,p=0,m=d.mutations;p<m.length;p++){var g=m[p].key;null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(g);var y=new zc(g,f);l=l.delete(y)}return this.batchesByDocumentKey=l,Hc.resolve()},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=new zc(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Hc.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&au(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Hc.resolve()},t.prototype.getAllLiveMutationBatchesBeforeIndex=function(t){for(var e=[],n=0;n<t;n++){var r=this.mutationQueue[n];r.isTombstone()||e.push(r)}return e},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return au(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return au(n.batchId===t,"If found batch must match"),n.isTombstone()?null:n},t}(),Xh=function(){function t(){this.queries=new jc(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Ll.MIN,this.highestTargetId=0,this.references=new Wc}return t.prototype.start=function(t){return Hc.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},t.prototype.getHighestTargetId=function(){return this.highestTargetId},t.prototype.setLastRemoteSnapshotVersion=function(t,e){return this.lastRemoteSnapshotVersion=e,Hc.resolve()},t.prototype.addQueryData=function(t,e){this.queries.set(e.query,e);var n=e.targetId;return n>this.highestTargetId&&(this.highestTargetId=n),Hc.resolve()},t.prototype.removeQueryData=function(t,e){return this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),Hc.resolve()},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Hc.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.references.addReferences(e,n),Hc.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){return this.references.removeReferences(e,n),Hc.resolve()},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Hc.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Hc.resolve(n)},t.prototype.setGarbageCollector=function(t){this.references.setGarbageCollector(t)},t.prototype.containsKey=function(t,e){return this.references.containsKey(t,e)},t}(),Jh=function(){function t(){this.docs=tc()}return t.prototype.addEntry=function(t,e){return this.docs=this.docs.insert(e.key,e),Hc.resolve()},t.prototype.removeEntry=function(t,e){return this.docs=this.docs.remove(e),Hc.resolve()},t.prototype.getEntry=function(t,e){return Hc.resolve(this.docs.get(e))},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=nc(),r=new Qu(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),s=o.value;if(!e.path.isPrefixOf(o.key.path))break;s instanceof $u&&e.matches(s)&&(n=n.insert(s.key,s))}return Hc.resolve(n)},t}(),Yh=function(){function t(){this.mutationQueues={},this.remoteDocumentCache=new Jh,this.queryCache=new Xh,this.started=!1}return t.prototype.start=function(){return au(!this.started,"MemoryPersistence double-started!"),this.started=!0,Promise.resolve()},t.prototype.shutdown=function(){return au(this.started,"MemoryPersistence shutdown without start!"),this.started=!1,Promise.resolve()},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new $h,this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e){return ru("MemoryPersistence","Starting transaction:",t),e(new Zh).toPromise()},t}(),Zh=function(){},td=function(){function t(){this.isEager=!1}return t.prototype.addGarbageSource=function(t){},t.prototype.removeGarbageSource=function(t){},t.prototype.addPotentialGarbageKey=function(t){},t.prototype.collectGarbage=function(t){return Hc.resolve(sc())},t}(),ed=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}(),nd=function(){function t(t,e,n){this.initialDelayMs=t,this.backoffFactor=e,this.maxDelayMs=n,this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndWait=function(){var t=new ed,e=this.currentBaseMs+this.jitterDelayMs();return this.currentBaseMs>0&&ru("ExponentialBackoff","Backing off for "+e+" ms (base delay: "+this.currentBaseMs+" ms)"),setTimeout(function(){t.resolve()},e),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs),t.promise},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Auth=1]="Auth",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t[t.Stopped=5]="Stopped"}(qh||(qh={}));var rd=1e3,id=6e4,od=1.5,sd=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentialsProvider=n,this.idle=!1,this.stream=null,this.listener=null,this.backoff=new nd(r||rd,od,id),this.state=qh.Initial}return t.prototype.isStarted=function(){return this.state===qh.Backoff||this.state===qh.Auth||this.state===qh.Open},t.prototype.isOpen=function(){return this.state===qh.Open},t.prototype.start=function(t){this.state!==qh.Error?(au(this.state===qh.Initial,"Already started"),this.listener=t,this.auth()):this.performBackoff(t)},t.prototype.stop=function(){this.isStarted()&&this.close(qh.Stopped)},t.prototype.inhibitBackoff=function(){au(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=qh.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.idle=!0,this.queue.schedule(function(){return t.handleIdleCloseTimer()},6e4).catch(function(t){au(t.code===hu.CANCELLED,"Received unexpected error in idle timeout closure. Expected CANCELLED, but was: "+t)})},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return this.isOpen()&&this.idle?this.close(qh.Initial):Promise.resolve()},t.prototype.cancelIdleCheck=function(){this.idle=!1},t.prototype.close=function(t,e){au(t===qh.Error||El(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),t!==qh.Error?this.backoff.reset():e&&e.code===hu.RESOURCE_EXHAUSTED&&(iu(e.toString()),iu("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t;var n=this.listener;return this.listener=null,t!==qh.Stopped?n.onClose(e):Promise.resolve()},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;au(this.state===qh.Initial,"Must be in initial state to auth"),this.state=qh.Auth,this.credentialsProvider.getToken(!1).then(function(e){t.startStream(e)},function(e){t.queue.schedule(function(){if(t.state!==qh.Stopped){var n=new du(hu.UNKNOWN,"Fetching auth token failed: "+e.message);return t.handleStreamClose(n)}return Promise.resolve()})})},t.prototype.startStream=function(t){var e=this;if(this.state!==qh.Stopped){au(this.state===qh.Auth,"Trying to start stream in a non-auth state");var n=function(t,n){e.queue.schedule(function(){return e.stream===t?n():Promise.resolve()})};if(null!==this.listener){var r=this.startRpc(t);this.stream=r,this.stream.onOpen(function(){n(r,function(){return au(e.state===qh.Auth,"Expected stream to be in state auth, but was "+e.state),e.state=qh.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(r,function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(r,function(){return e.onMessage(t)})})}}},t.prototype.performBackoff=function(t){var e=this;au(this.state===qh.Error,"Should only perform backoff in an error case"),this.state=qh.Backoff,this.backoff.backoffAndWait().then(function(){e.queue.schedule(function(){return e.state===qh.Stopped?Promise.resolve():(e.state=qh.Initial,e.start(t),au(e.isStarted(),"PersistentStream should have started"),Promise.resolve())})})},t.prototype.handleStreamClose=function(t){return au(this.isStarted(),"Can't handle server close on non-started stream"),ru("PersistentStream","close with error: "+t),this.stream=null,this.close(qh.Error,t)},t}(),ad=function(t){function e(e,n,r,i,o,s){var a=t.call(this,n,r,i,s)||this;return a.databaseInfo=e,a.serializer=o,a}return Object(cu.__extends)(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(sd),ud=function(t){function e(e,n,r,i,o,s){var a=t.call(this,n,r,i,s)||this;return a.databaseInfo=e,a.serializer=o,a.handshakeComplete_=!1,a}return Object(cu.__extends)(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(e){this.handshakeComplete_=!1,t.prototype.start.call(this,e)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(au(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return au(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){au(this.isOpen(),"Writing handshake requires an opened stream"),au(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;au(this.isOpen(),"Writing mutations requires an opened stream"),au(this.handshakeComplete_,"Handshake must be complete before writing mutations"),au(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(sd),ld=function(){function t(t,e,n,r,i,o){this.databaseInfo=t,this.queue=e,this.connection=n,this.credentials=r,this.serializer=i,this.initialBackoffDelay=o}return t.prototype.newPersistentWriteStream=function(){return new ud(this.databaseInfo,this.queue,this.connection,this.credentials,this.serializer,this.initialBackoffDelay)},t.prototype.newPersistentWatchStream=function(){return new ad(this.databaseInfo,this.queue,this.connection,this.credentials,this.serializer,this.initialBackoffDelay)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=tc();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);au(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken(!1).then(function(r){return n.connection.invokeRPC(t,e,r)})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken(!1).then(function(r){return n.connection.invokeStreamingRPC(t,e,r)})},t}(),cd=function(){function t(t){this.datastore=t,this.readVersions=ic(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e=t.version;t instanceof Xu&&(e=Ll.forDeletedDoc());var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new du(hu.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){return e.recordVersion(t)}),t})},t.prototype.write=function(t){if(this.committed)throw new du(hu.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?Hl.updateTime(e):Hl.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(Ll.forDeletedDoc()))throw new du(hu.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?Hl.updateTime(e):Hl.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new Ql(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,Ll.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}(),hd=function(){function t(t,e,n){this.localStore=t,this.datastore=e,this.onlineStateHandler=n,this.pendingWrites=[],this.lastBatchSeen=eh,this.listenTargets={},this.pendingTargetResponses={},this.accumulatedWatchChanges=[],this.watchStream=null,this.writeStream=null,this.watchStreamOnlineState=xc.Unknown,this.watchStreamFailures=0,this.shouldWarnOffline=!0}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.updateOnlineState=function(t){t!==this.watchStreamOnlineState&&(t===xc.Healthy?this.shouldWarnOffline=!1:t===xc.Unknown&&(this.watchStreamFailures=0),this.watchStreamOnlineState=t,this.onlineStateHandler(t))},t.prototype.updateOnlineStateAfterFailure=function(){this.watchStreamOnlineState===xc.Healthy?this.updateOnlineState(xc.Unknown):(this.watchStreamFailures++,this.watchStreamFailures>=2&&(this.shouldWarnOffline&&(iu("Could not reach Firestore backend."),this.shouldWarnOffline=!1),this.updateOnlineState(xc.Failed)))},t.prototype.isNetworkEnabled=function(){return au(null==this.watchStream==(null==this.writeStream),"WatchStream and WriteStream should both be null or non-null"),null!=this.watchStream},t.prototype.enableNetwork=function(){var t=this;return this.isNetworkEnabled()?Promise.resolve():(this.watchStream=this.datastore.newPersistentWatchStream(),this.writeStream=this.datastore.newPersistentWriteStream(),this.localStore.getLastStreamToken().then(function(e){return t.writeStream.lastStreamToken=e,t.shouldStartWatchStream()&&t.startWatchStream(),t.updateOnlineState(xc.Unknown),t.fillWritePipeline()}))},t.prototype.disableNetwork=function(){return this.disableNetworkInternal(),this.updateOnlineState(xc.Failed),Promise.resolve()},t.prototype.disableNetworkInternal=function(){this.isNetworkEnabled()&&(this.watchStream.stop(),this.writeStream.stop(),this.cleanUpWatchStreamState(),this.cleanUpWriteStreamState(),this.writeStream=null,this.watchStream=null)},t.prototype.shutdown=function(){return ru("RemoteStore","RemoteStore shutting down."),this.disableNetworkInternal(),this.updateOnlineState(xc.Unknown),Promise.resolve()},t.prototype.listen=function(t){au(!pu(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.isNetworkEnabled()&&this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){au(pu(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.isNetworkEnabled()&&this.watchStream.isOpen()&&(this.sendUnwatchRequest(t),yu(this.listenTargets)&&this.watchStream.markIdle())},t.prototype.sendWatchRequest=function(t){this.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.recordPendingTargetRequest=function(t){this.pendingTargetResponses[t]=(this.pendingTargetResponses[t]||0)+1},t.prototype.startWatchStream=function(){au(this.shouldStartWatchStream(),"startWriteStream() called when shouldStartWatchStream() is false."),this.watchStream.start({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)})},t.prototype.shouldStartWatchStream=function(){return this.isNetworkEnabled()&&!this.watchStream.isStarted()&&!yu(this.listenTargets)},t.prototype.cleanUpWatchStreamState=function(){this.accumulatedWatchChanges=[],this.pendingTargetResponses={}},t.prototype.onWatchStreamOpen=function(){var t=this;return mu(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),Promise.resolve()},t.prototype.onWatchStreamClose=function(t){return au(this.isNetworkEnabled(),"onWatchStreamClose() should only be called when the network is enabled"),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.updateOnlineStateAfterFailure(),this.startWatchStream()):this.updateOnlineState(xc.Unknown),Promise.resolve()},t.prototype.onWatchStreamChange=function(t,e){if(this.updateOnlineState(xc.Healthy),t instanceof mc&&t.state===pc.Removed&&t.cause)return this.handleTargetError(t);if(this.accumulatedWatchChanges.push(t),!e.isEqual(Ll.MIN)&&e.compareTo(this.localStore.getLastRemoteSnapshotVersion())>=0){var n=this.accumulatedWatchChanges;return this.accumulatedWatchChanges=[],this.handleWatchChangeBatch(e,n)}return Promise.resolve()},t.prototype.handleWatchChangeBatch=function(t,e){var n=this,r=new gc(t,this.listenTargets,this.pendingTargetResponses);r.addChanges(e);var i=r.createRemoteEvent();this.pendingTargetResponses=r.pendingTargetResponses;var o=[];return mu(r.existenceFilters,function(e,r){var s=n.listenTargets[e];if(s){var a=s.query;if(a.isDocumentQuery())if(0===r.count){var u=new Qu(a.path),l=new Xu(u,t);i.addDocumentUpdate(l)}else au(1===r.count,"Single document existence filter with count: "+r.count);else{var c=n.localStore.remoteDocumentKeys(e).then(function(t){if(i.targetChanges[e]){var o=i.targetChanges[e].mapping;null!==o&&(o instanceof hc?t=o.applyToKeySet(t):(au(o instanceof cc,"Expected either reset or update mapping but got something else: "+o),t=o.documents))}if(t.size!==r.count){i.handleExistenceFilterMismatch(e);var u=new Ul(a,e,s.purpose);n.listenTargets[e]=u,n.sendUnwatchRequest(e);var l=new Ul(a,e,Cl.ExistenceFilterMismatch);n.sendWatchRequest(l)}});o.push(c)}}}),Promise.all(o).then(function(){return mu(i.targetChanges,function(t,e){if(e.resumeToken.length>0){var r=n.listenTargets[t];r&&(n.listenTargets[t]=r.update({resumeToken:e.resumeToken,snapshotVersion:e.snapshotVersion}))}}),n.syncEngine.applyRemoteEvent(i)})},t.prototype.handleTargetError=function(t){var e=this;au(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return pu(e.listenTargets,t)?(delete e.listenTargets[t],e.syncEngine.rejectListen(t,n)):Promise.resolve()})}),r},t.prototype.cleanUpWriteStreamState=function(){this.lastBatchSeen=eh,ru("RemoteStore","Stopping write stream with "+this.pendingWrites.length+" pending writes"),this.pendingWrites=[]},t.prototype.fillWritePipeline=function(){var t=this;return this.canWriteMutations()?this.localStore.nextMutationBatch(this.lastBatchSeen).then(function(e){return null===e?(0===t.pendingWrites.length&&t.writeStream.markIdle(),Promise.resolve()):(t.commit(e),t.fillWritePipeline())}):Promise.resolve()},t.prototype.canWriteMutations=function(){return this.isNetworkEnabled()&&this.pendingWrites.length<10},t.prototype.outstandingWrites=function(){return this.pendingWrites.length},t.prototype.commit=function(t){au(this.canWriteMutations(),"commit called when batches can't be written"),this.lastBatchSeen=t.batchId,this.pendingWrites.push(t),this.shouldStartWriteStream()?this.startWriteStream():this.isNetworkEnabled()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.isNetworkEnabled()&&!this.writeStream.isStarted()&&this.pendingWrites.length>0},t.prototype.startWriteStream=function(){au(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})},t.prototype.onWriteStreamOpen=function(){return this.writeStream.writeHandshake(),Promise.resolve()},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.pendingWrites;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)})},t.prototype.onMutationResult=function(t,e){var n=this;au(this.pendingWrites.length>0,"Got result for empty pending writes");var r=this.pendingWrites.shift(),i=rh.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){var e=this;return au(this.isNetworkEnabled(),"onWriteStreamClose() should only be called when the network is enabled"),t&&this.pendingWrites.length>0?(au(!!t,"We have pending writes, but the write stream closed without an error"),(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})):Promise.resolve()},t.prototype.handleHandshakeError=function(t){return Xl(t.code)||t.code===hu.ABORTED?(ru("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=lu(),this.localStore.setLastStreamToken(lu())):Promise.resolve()},t.prototype.handleWriteError=function(t){var e=this;if(Xl(t.code)){var n=this.pendingWrites.shift();return this.writeStream.inhibitBackoff(),this.syncEngine.rejectFailedWrite(n.batchId,t).then(function(){return e.fillWritePipeline()})}return Promise.resolve()},t.prototype.createTransaction=function(){return new cd(this.datastore)},t.prototype.handleUserChange=function(t){if(ru("RemoteStore","RemoteStore changing users: uid=",t.uid),this.isNetworkEnabled())return this.disableNetworkInternal(),this.updateOnlineState(xc.Unknown),this.enableNetwork()},t}(),dd=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r}return t.prototype.start=function(t){var e=this,n=new ed,r=new ed,i=!1;return this.credentials.setUserChangeListener(function(o){i?e.asyncQueue.schedule(function(){return e.handleUserChange(o)}):(i=!0,e.initializePersistence(t,r).then(function(){return e.initializeRest(o)}).then(n.resolve,n.reject))}),this.asyncQueue.schedule(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.schedule(function(){return t.remoteStore.enableNetwork()})},t.prototype.initializePersistence=function(t,e){var n=this;return t?this.startIndexedDbPersistence().then(e.resolve).catch(function(t){return e.reject(t),n.canFallback(t)?(console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),n.startMemoryPersistence()):Promise.reject(t)}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t.code===hu.FAILED_PRECONDITION||t.code===hu.UNIMPLEMENTED},t.prototype.startIndexedDbPersistence=function(){this.garbageCollector=new td;var t=Kh.buildStoragePrefix(this.databaseInfo),e=new Sc(this.databaseInfo.databaseId,{useProto3Json:!0});return this.persistence=new Kh(t,e),this.persistence.start()},t.prototype.startMemoryPersistence=function(){return this.garbageCollector=new Gc,this.persistence=new Yh,this.persistence.start()},t.prototype.initializeRest=function(t){var e=this;return this.platform.loadConnection(this.databaseInfo).then(function(n){e.localStore=new Qh(e.persistence,t,e.garbageCollector);var r=e.platform.newSerializer(e.databaseInfo.databaseId),i=new ld(e.databaseInfo,e.asyncQueue,n,e.credentials,r);return e.remoteStore=new hd(e.localStore,i,function(t){e.syncEngine.applyOnlineStateChange(t),e.eventMgr.applyOnlineStateChange(t)}),e.syncEngine=new th(e.localStore,e.remoteStore,t),e.remoteStore.syncEngine=e.syncEngine,e.eventMgr=new Bc(e.syncEngine),e.localStore.start()}).then(function(){return e.remoteStore.start()})},t.prototype.handleUserChange=function(t){return this.asyncQueue.verifyOperationInProgress(),ru("FirestoreClient","User Changed: "+t.uid),this.syncEngine.handleUserChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.schedule(function(){return t.remoteStore.disableNetwork()})},t.prototype.shutdown=function(){var t=this;return this.asyncQueue.schedule(function(){return t.credentials.removeUserChangeListener(),t.remoteStore.shutdown()}).then(function(){return t.persistence.shutdown()})},t.prototype.listen=function(t,e,n){var r=this,i=new qc(t,e,n);return this.asyncQueue.schedule(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.schedule(function(){return e.eventMgr.unlisten(t)})},t.prototype.write=function(t){var e=this,n=new ed;return this.asyncQueue.schedule(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.schedule(function(){return Promise.resolve()}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),fd=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),pd=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.delayedOperationsCount=0,this.operationInProgress=!1}return t.prototype.schedule=function(t,e){var n=this;if(this.failure&&su("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message)),(e||0)>0){this.delayedOperationsCount++;var r={handle:null,op:t,deferred:new ed};return r.handle=setTimeout(function(){n.scheduleInternal(function(){return r.op().then(function(t){r.deferred.resolve(t)})}),r.handle=null,n.delayedOperationsCount--,0===n.delayedOperationsCount&&(n.delayedOperations=[])},e),this.delayedOperations.push(r),r.deferred.promise}return this.scheduleInternal(t)},t.prototype.scheduleInternal=function(t){var e=this;return this.tail=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw iu("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(){e.operationInProgress=!1})}),this.tail},t.prototype.verifyOperationInProgress=function(){au(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(t){var e=this;return this.delayedOperations.forEach(function(n){n.handle&&(clearTimeout(n.handle),t?e.scheduleInternal(n.op).then(n.deferred.resolve,n.deferred.reject):n.deferred.reject(new du(hu.CANCELLED,"Operation cancelled by shutdown")))}),this.delayedOperations=[],this.delayedOperationsCount=0,this.schedule(function(){return Promise.resolve()})},t}(),md=function(){function t(t){this.uid=t}return t.prototype.isUnauthenticated=function(){return null==this.uid},t.prototype.toKey=function(){return this.isUnauthenticated()?"anonymous-user":"uid:"+this.uid},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),gd=function(){function t(){this.userListener=null}return t.prototype.getToken=function(t){return Promise.resolve(null)},t.prototype.setUserChangeListener=function(t){au(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=t,t(md.UNAUTHENTICATED)},t.prototype.removeUserChangeListener=function(){au(null!==this.userListener,"removeUserChangeListener() when no listener registered"),this.userListener=null},t}(),yd=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.userCounter=0,this.userListener=null,this.tokenListener=function(){var t=e.getUser();e.currentUser&&t.isEqual(e.currentUser)||(e.currentUser=t,e.userCounter++,e.userListener&&e.userListener(e.currentUser))},this.userCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(t){var e=this;au(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.userCounter;return this.app.INTERNAL.getToken(t).then(function(t){if(e.userCounter!==n)throw new du(hu.ABORTED,"getToken aborted due to uid change.");return t?(au("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}(t.accessToken,e.currentUser)):null})},t.prototype.setUserChangeListener=function(t){au(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeUserChangeListener=function(){au(null!=this.tokenListener,"removeUserChangeListener() called twice"),au(null!==this.userListener,"removeUserChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.userListener=null},t.prototype.getUser=function(){"function"!=typeof this.app.INTERNAL.getUid&&su("This version of the Firestore SDK requires at least version 3.7.0 of firebase.js.");var t=this.app.INTERNAL.getUid();return au(null===t||"string"==typeof t,"Received invalid UID: "+t),new md(t)},t}(),vd=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=md.FIRST_PARTY,au(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),bd=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,au(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(t){return Promise.resolve(new vd(this.gapi,this.sessionIndex))},t.prototype.setUserChangeListener=function(t){t(md.FIRST_PARTY)},t.prototype.removeUserChangeListener=function(){},t}();function _d(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var wd,Ed=function(){function t(){}return t.delete=function(){return Cd.instance},t.serverTimestamp=function(){return Sd.instance},t.prototype.isEqual=function(t){return this===t},t}(),Cd=function(t){function e(){return t.call(this)||this}return Object(cu.__extends)(e,t),e.instance=new e,e}(Ed),Sd=function(t){function e(){return t.call(this)||this}return Object(cu.__extends)(e,t),e.instance=new e,e}(Ed),Td=fu(Ed,"Use FieldValue.<field>() instead."),Id=/^__.*__$/,Ad=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new Wl(t,this.data,this.fieldMask,e):new Kl(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new zl(t,this.fieldTransforms)),n},t}(),kd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new Wl(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new zl(t,this.fieldTransforms)),n},t}();function Nd(t){switch(t){case wd.Set:case wd.MergeSet:case wd.Update:return!0;case wd.QueryValue:return!1;default:throw su("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.QueryValue=3]="QueryValue"}(wd||(wd={}));var Od=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new du(hu.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(Nd(this.dataSource)&&Id.test(t))throw this.createError("Document fields cannot begin and end with __")},t.prototype.isWrite=function(){return this.dataSource===wd.Set||this.dataSource===wd.Update},t}(),Rd=function(t,e){this.databaseId=t,this.key=e},xd=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new Od(wd.Set,t,zu.EMPTY_PATH);Pd("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new Ad(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e){var n=new Od(wd.MergeSet,t,zu.EMPTY_PATH);Pd("Data must be an object, but it was:",n,e);var r=this.parseData(e,n),i=new Fl(n.fieldMask);return new Ad(r,i,n.fieldTransforms)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new Od(wd.Update,t,zu.EMPTY_PATH);Pd("Data must be an object, but it was:",r,e);var i=[],o=gl.EMPTY;gu(e,function(e,s){var a=Ld(t,e),u=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,u))instanceof Cd)i.push(a);else{var l=n.parseData(s,u);null!=l&&(i.push(a),o=o.set(a,l))}});var s=new Fl(i);return new kd(o,s,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new Od(wd.Update,t,zu.EMPTY_PATH),o=[Md(t,e)],s=[n];if(r.length%2!=0)throw new du(hu.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(Md(t,r[a])),s.push(r[a+1]);var u=[],l=gl.EMPTY;for(a=0;a<o.length;++a){var c=o[a],h=i.childContextForFieldPath(c),d=this.runPreConverter(s[a],h);if(d instanceof Cd)u.push(c);else{var f=this.parseData(d,h);null!=f&&(u.push(c),l=l.set(c,f))}}var p=new Fl(u);return new kd(l,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new Od(wd.QueryValue,t,zu.EMPTY_PATH),r=this.parseData(e,n);return au(null!=r,"Parsed data should not be null."),au(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=Vd(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if((t=this.runPreConverter(t,e))instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return e.path&&e.fieldMask.push(e.path),this.parseArray(t,e)}return Dd(t)?(Pd("Unsupported field value:",e,t),this.parseObject(t,e)):(e.path&&e.fieldMask.push(e.path),this.parseScalarValue(t,e))},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=this.parseData(o[i],e.childContextForArray(r));null==s&&(s=il.INSTANCE),n.push(s),r++}return new yl(n)},t.prototype.parseObject=function(t,e){var n=this,r=new Ju(Mu);return gu(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new gl(r)},t.prototype.parseScalarValue=function(t,e){if(null===t)return il.INSTANCE;if("number"==typeof t)return function(t){return wl(t)&&t<=_l&&t>=bl}(t)?new ul(t):new ll(t);if("boolean"==typeof t)return ol.of(t);if("string"==typeof t)return new cl(t);if(t instanceof Date)return new hl(Ml.fromDate(t));if(t instanceof Bu)return new ml(t);if(t instanceof Fu)return new fl(t);if(t instanceof Rd)return new pl(t.databaseId,t.key);if(t instanceof Ed){if(t instanceof Cd){if(e.dataSource===wd.MergeSet)return null;throw e.dataSource===wd.Update?(au(null==e.path||e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() can only be used with update() and set() with {merge:true}")}if(t instanceof Sd){if(!Nd(e.dataSource))throw e.createError("FieldValue.serverTimestamp() can only be used with set() and update()");if(null===e.path)throw e.createError("FieldValue.serverTimestamp() is not currently supported inside arrays");return e.fieldTransforms.push(new Bl(e.path,jl.instance)),null}return su("Unknown FieldValue type: "+t)}throw e.createError("Unsupported field value: "+ku(t))},t}();function Dd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Bu||t instanceof Fu||t instanceof Rd||t instanceof Ed)}function Pd(t,e,n){if(!Dd(n)||!Au(n)){var r=ku(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function Md(t,e){if(e instanceof Dc)return e._internalPath;if("string"==typeof e)return Ld(t,e);throw new du(hu.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ld(t,e){try{return function(t){if(t.search(Pc)>=0)throw new du(hu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Dc.bind.apply(Dc,[void 0].concat(t.split("."))))}catch(e){throw new du(hu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=Vd(e);throw new du(hu.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Vd(t){return t instanceof Error?t.message:t.toString()}var Ud="firestore.googleapis.com",Fd=!0,jd=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new du(hu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ud,this.ssl=Fd}else Su("settings","string","host",t.host),this.host=t.host,Tu("settings","boolean","ssl",t.ssl),this.ssl=void 0!==(e=t.ssl)?e:Fd;var e;Ou("settings",t,["host","ssl","credentials"]),Tu("settings","object","credentials",t.credentials),this.credentials=t.credentials}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials},t}(),Bd=function(){},qd=function(){function t(e){var n=this;this._queue=new pd,this.INTERNAL={delete:function(){return n._firestoreClient?n._firestoreClient.shutdown():Promise.resolve()},drainAsyncQueue:function(t){return n._queue.drain(t)}};var r=new Bd;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new yd(i)}else{var o=e;if(!o.projectId)throw new du(hu.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new Hu(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new gd}r.settings=new jd({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(bu("Firestore.settings",arguments,1),Eu("Firestore.settings","object",1,t),pu(t,"persistence"))throw new du(hu.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new jd(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new du(hu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new gd;switch(t.type){case"gapi":return new bd(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new du(hu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(){if(this._firestoreClient)throw new du(hu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(!0)},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(!1),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;au(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),au(!this._firestoreClient,"configureClient() called multiple times");var n=new function(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new xd(function(t){if(t instanceof Kd){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new du(hu.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Rd(e._config.databaseId,t._key)}return t}),this._firestoreClient=new dd(uu.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!pu(e,"projectId")){if(pu(e,"firestoreId"))throw new du(hu.INVALID_ARGUMENT,'"firestoreId" is now specified as "projectId" in firebase.initializeApp.');throw new du(hu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.')}if(pu(e,"firestoreOptions"))throw new du(hu.INVALID_ARGUMENT,'"firestoreOptions" values are now specified with Firestore.settings()');var n=e.projectId;if(!n||"string"!=typeof n)throw new du(hu.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Hu(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new du(hu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(bu("Firestore.collection",arguments,1),Eu("Firestore.collection","string",1,t),!t)throw new du(hu.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new Jd(Ku.fromString(t),this)},t.prototype.doc=function(t){if(bu("Firestore.doc",arguments,1),Eu("Firestore.doc","string",1,t),!t)throw new du(hu.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),Kd.forPath(Ku.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return bu("Firestore.runTransaction",arguments,1),Eu("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new Hd(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new Gd(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(eu()){case Za.DEBUG:return"debug";case Za.ERROR:return"error";case Za.SILENT:return"silent";default:return su("Unknown log level: "+eu())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(bu("Firestore.setLogLevel",arguments,1),Eu("Firestore.setLogLevel","string",1,t),t){case"debug":nu(Za.DEBUG);break;case"error":nu(Za.ERROR);break;case"silent":nu(Za.SILENT);break;default:throw new du(hu.INVALID_ARGUMENT,"Invalid log level: "+t)}},t}(),Hd=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;bu("Transaction.get",arguments,1);var n=tf("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return su("Mismatch in docs returned from document lookup.");var r=t[0];return new zd(e._firestore,n._key,r instanceof Xu?null:r,!1)})},t.prototype.set=function(t,e,n){wu("Transaction.set",arguments,2,3);var r=tf("Transaction.set",t,this._firestore),i=(n=Yd("Transaction.set",n)).merge?this._firestore._dataConverter.parseMergeData("Transaction.set",e):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Dc?(_u("Transaction.update",arguments,3),r=tf("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(bu("Transaction.update",arguments,2),r=tf("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){bu("Transaction.delete",arguments,1);var e=tf("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Gd=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){wu("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=tf("WriteBatch.set",t,this._firestore),i=(n=Yd("WriteBatch.set",n)).merge?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,Hl.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Dc?(_u("WriteBatch.update",arguments,3),r=tf("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(bu("WriteBatch.update",arguments,2),r=tf("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,Hl.exists(!0))),this},t.prototype.delete=function(t){bu("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=tf("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Ql(e._key,Hl.NONE)),this},t.prototype.commit=function(){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._firestore.ensureClientConfigured().write(this._mutations):Promise.resolve()},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new du(hu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Kd=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new du(hu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new Qu(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Jd(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(bu("DocumentReference.collection",arguments,1),Eu("DocumentReference.collection","string",1,t),!t)throw new du(hu.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Ku.fromString(t);return new Jd(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Ru("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){wu("DocumentReference.set",arguments,1,2);var n=(e=Yd("DocumentReference.set",e)).merge?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,Hl.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Dc?(_u("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(bu("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,Hl.exists(!0)))},t.prototype.delete=function(){return bu("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Ql(this._key,Hl.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];wu("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||_d(t[i])||(Ou("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Tu("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeDocumentMetadataChanges:r.includeMetadataChanges,includeQueryMetadataChanges:r.includeMetadataChanges};return _d(t[i])?n=t[i]:(Eu("DocumentReference.onSnapshot","function",i,t[i]),Cu("DocumentReference.onSnapshot","function",i+1,t[i+1]),Cu("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new fd({next:function(t){if(e.next){au(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new zd(n.firestore,n._key,r,t.fromCache))}},error:r}),o=this._firestoreClient.listen(Sl.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(){var t=this;return bu("DocumentReference.get",arguments,0),new Promise(function(e,n){var r=t.onSnapshotInternal({includeQueryMetadataChanges:!0,includeDocumentMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){r(),!t.exists&&t.metadata.fromCache?n(new du(hu.ABORTED,"Failed to get document because the client is offline.")):e(t)},error:n})})},t}(),Wd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),zd=function(){function t(t,e,n,r){this._firestore=t,this._key=e,this._document=n,this._fromCache=r}return t.prototype.data=function(t){return wu("DocumentSnapshot.data",arguments,0,1),t=Zd("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,nl.fromSnapshotOptions(t)):void 0},t.prototype.get=function(t,e){if(wu("DocumentSnapshot.get",arguments,1,2),e=Zd("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(Md("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,nl.fromSnapshotOptions(e))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Kd(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Wd(null!==this._document&&this._document.hasLocalMutations,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Ru("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof gl)return this.convertObject(t,e);if(t instanceof yl)return this.convertArray(t,e);if(t instanceof pl){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||iu("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Kd(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),Qd=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return Object(cu.__extends)(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return au("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(zd),$d=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){var i;bu("Query.where",arguments,3),Eu("Query.where","string",2,n),Nu("Query.where",3,r);var o=Md("Query.where",e);if(o.isKeyField())if("string"==typeof r){if(-1!==r.indexOf("/"))throw new du(hu.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new du(hu.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var s=this._query.path.child(new Ku([r]));au(s.length%2==0,"Path should be a document key"),i=new pl(this.firestore._databaseId,new Qu(s))}else{if(!(r instanceof Kd))throw new du(hu.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+ku(r)+".");i=new pl(this.firestore._databaseId,r._key)}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var a=function(t,e,n){if(n.isEqual(il.INSTANCE)){if(e!==Tl.EQUAL)throw new du(hu.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Al(t)}if(n.isEqual(ll.NAN)){if(e!==Tl.EQUAL)throw new du(hu.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new kl(t)}return new Il(t,e,n)}(o,Tl.fromString(n),i);return this.validateNewFilter(a),new t(this._query.addFilter(a),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(wu("Query.orderBy",arguments,1,2),Cu("Query.orderBy","string",2,n),void 0===n||"asc"===n)r=Nl.ASCENDING;else{if("desc"!==n)throw new du(hu.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Nl.DESCENDING}if(null!==this._query.startAt)throw new du(hu.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new du(hu.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Md("Query.orderBy",e),o=new Rl(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(bu("Query.limit",arguments,1),Eu("Query.limit","number",1,e),e<=0)throw new du(hu.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];_u("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];_u("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];_u("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];_u("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Ru("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(Nu(t,1,e),e instanceof zd){if(n.length>0)throw new du(hu.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new du(hu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new pl(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(void 0===a){var u=s.field.canonicalString();throw new du(hu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Ol(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new du(hu.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new du(hu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(-1!==s.indexOf("/"))throw new du(hu.INVALID_ARGUMENT,"Invalid query. Document ID '"+s+"' contains a slash in "+t+"()");var a=new Qu(this._query.path.child(s));i.push(new pl(this.firestore._databaseId,a))}else{var u=this.firestore._dataConverter.parseQueryValue(t,s);i.push(u)}}return new Ol(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];wu("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||_d(t[i])||(Ou("Query.onSnapshot",r=t[i],["includeQueryMetadataChanges","includeDocumentMetadataChanges"]),Tu("Query.onSnapshot","boolean","includeDocumentMetadataChanges",r.includeDocumentMetadataChanges),Tu("Query.onSnapshot","boolean","includeQueryMetadataChanges",r.includeQueryMetadataChanges),i++),_d(t[i])?n=t[i]:(Eu("Query.onSnapshot","function",i,t[i]),Cu("Query.onSnapshot","function",i+1,t[i+1]),Cu("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new fd({next:function(t){e.next&&e.next(new Xd(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(s)}},t.prototype.get=function(){var t=this;return bu("Query.get",arguments,0),new Promise(function(e,n){var r=t.onSnapshotInternal({includeDocumentMetadataChanges:!1,includeQueryMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){r(),e(t)},error:n})})},t.prototype.validateNewFilter=function(t){if(t instanceof Il&&t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new du(hu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new du(hu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Xd=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this.metadata=new Wd(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;wu("QuerySnapshot.forEach",arguments,1,2),Eu("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new $d(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"docChanges",{get:function(){return this._cachedChanges||(this._cachedChanges=function(t,e){if(e.oldDocs.isEmpty()){var n,r=0;return e.docChanges.map(function(i){var o=new Qd(t,i.doc.key,i.doc,e.fromCache);return au(i.type===Mc.Added,"Invalid event type for first snapshot"),au(!n||e.query.docComparator(n,i.doc)<0,"Got added events in wrong order"),n=i.doc,{type:"added",doc:o,oldIndex:-1,newIndex:r++}})}var i=e.oldDocs;return e.docChanges.map(function(n){var r=new Qd(t,n.doc.key,n.doc,e.fromCache),o=-1,s=-1;return n.type!==Mc.Added&&(au((o=i.indexOf(n.doc.key))>=0,"Index for document not found"),i=i.delete(n.doc.key)),n.type!==Mc.Removed&&(s=(i=i.add(n.doc)).indexOf(n.doc.key)),{type:function(t){switch(t){case Mc.Added:return"added";case Mc.Modified:case Mc.Metadata:return"modified";case Mc.Removed:return"removed";default:return su("Unknown change type: "+t)}}(n.type),doc:r,oldIndex:o,newIndex:s}})}(this._firestore,this._snapshot)),this._cachedChanges},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Ru("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Qd(this._firestore,t.key,t,this.metadata.fromCache)},t}(),Jd=function(t){function e(e,n){var r=t.call(this,Sl.atPath(e),n)||this;if(e.length%2!=1)throw new du(hu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return Object(cu.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Kd(new Qu(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(wu("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Pu.newId()),Eu("CollectionReference.doc","string",1,t),""===t)throw new du(hu.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Ku.fromString(t);return Kd.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){bu("CollectionReference.add",arguments,1),Eu("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}($d);function Yd(t,e){return void 0===e?{merge:!1}:(Ou(t,e,["merge"]),Tu(t,"boolean","merge",e.merge),e)}function Zd(t,e){return void 0===e?{}:(Ou(t,e,["serverTimestamps"]),void 0!==(n=e.serverTimestamps)&&function(t,e,n,r,i){for(var o=[],s=0,a=["estimate","previous","none"];s<a.length;s++){var u=a[s];if(u===r)return;o.push(ku(u))}var l=ku(r);throw new du(hu.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+t+'() for option "serverTimestamps". Acceptable values: '+o.join(", "))}(t,0,0,n),e);var n}function tf(t,e,n){if(e instanceof Kd){if(e.firestore!==n)throw new du(hu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Ru(t,"DocumentReference",1,e)}var ef=fu(qd,"Use firebase.firestore() instead."),nf=fu(Hd,"Use firebase.firestore().runTransaction() instead."),rf=fu(Gd,"Use firebase.firestore().batch() instead."),of=fu(Kd,"Use firebase.firestore().doc() instead."),sf=fu(zd),af=fu(Qd),uf=fu($d),lf=fu(Xd),cf=fu(Jd,"Use firebase.firestore().collection() instead.");Na.default.INTERNAL.registerService("firestore",function(t){return new qd(t)},vu({Firestore:ef,GeoPoint:Bu,Blob:ju,Transaction:nf,WriteBatch:rf,DocumentReference:of,DocumentSnapshot:sf,Query:uf,QueryDocumentSnapshot:af,QuerySnapshot:lf,CollectionReference:cf,FieldPath:Dc,FieldValue:Td,setLogLevel:qd.setLogLevel}));class hf{static enablePersistence(){return{ngModule:hf,providers:[{provide:$a,useValue:!0}]}}}class df{constructor(t,e){this._db=t,this._activeGame=e}get(t){return this._db.collection("games").doc(t).valueChanges()}getAll(t){this._getAllAsObservableWithMetadata().subscribe(t)}_getAllAsObservableWithMetadata(){return this._db.collection("games").snapshotChanges()}getGameID(t){return t.payload.doc.id}add(t){let e=this._getDatetime();this._activeGame.set(e);let n=this._preparePlayerObjects(t,1);this._db.collection("games").doc(e).set(n)}_preparePlayerObjects(t,e){let n={};for(let r,i=0;i<t.length;++i)n[r="player"+e]={name:t[i],strokes:[]},++e;return n}addMorePlayers(t,e){let n=this._preparePlayerObjects(t,e);this._db.collection("games").doc(this._activeGame.get()).update(n)}_getDatetime(){let t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"_"+t.getHours()+t.getMinutes()+t.getSeconds()}}class ff{constructor(t,e){this._game=t,this._activeGame=e}getPlayers(t){this._gameObservable=this._game.get(this._activeGame.get()),this.subscription=this._gameObservable.subscribe(t)}addMorePlayers(t,e){this._game.addMorePlayers(t,e)}}class pf{constructor(){this.self=["player1","player2","player3","player4"]}}class mf{constructor(t,e){this._playersService=t,this.playerNames=[],this.playersAddedLate=[],this.playerNumbers=e.self}ngOnInit(){this._refreshPlayers()}_refreshPlayers(){this._playersService.getPlayers(t=>{this.players=t,this._setPlayerNames()})}get playersStillAvailable(){return this.playerNumbers.slice(this.playerNames.length)}savePlayerToGame(){this._refreshPlayers(),this._playersService.addMorePlayers(this.playersAddedLate,this.playerNames.length+1),this.playersAddedLate=[]}_setPlayerNames(){for(let t in this.playerNames=[],this.players)this.playerNames.push(this.players[t].name)}}var gf=r._1({encapsulation:2,styles:[],data:{}});function yf(t){return r._23(0,[(t()(),r._3(0,0,null,null,4,"div",[],[[8,"className",0],[8,"id",0]],null,null,null,null)),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r._3(2,0,null,null,1,"div",[["class","cell"]],null,null,null,null,null)),(t()(),r._21(3,null,["\n        ","\n    "])),(t()(),r._21(-1,null,["\n"]))],null,function(t,e){var n=e.component;t(e,0,0,"cell label-cell player-name-input-cell "+n.playerNumbers[e.context.index]+"-row",n.playerNumbers[e.context.index]+"-input-cell"),t(e,3,0,e.context.$implicit)})}function vf(t){return r._23(0,[(t()(),r._3(0,0,null,null,8,"div",[],[[8,"className",0],[8,"id",0]],null,null,null,null)),(t()(),r._21(-1,null,["\n    "])),(t()(),r._3(2,0,null,null,5,"input",[["class","scorecard-input player-name-input"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r._13(t,3)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r._13(t,3).onTouched()&&i),"compositionstart"===e&&(i=!1!==r._13(t,3)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r._13(t,3)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.playersAddedLate[t.context.index]=n)&&i),"blur"===e&&(i=!1!==o.savePlayerToGame()&&i),i},null,null)),r._2(3,16384,null,0,cn,[r.B,r.k,[2,ln]],null,null),r._18(1024,null,an,function(t){return[t]},[cn]),r._2(5,671744,null,0,or,[[8,null],[8,null],[8,null],[2,an]],{model:[0,"model"]},{update:"ngModelChange"}),r._18(2048,null,mn,null,[or]),r._2(7,16384,null,0,jn,[mn],null,null),(t()(),r._21(-1,null,["\n"]))],function(t,e){t(e,5,0,e.component.playersAddedLate[e.context.index])},function(t,e){t(e,0,0,"cell label-cell player-name-input-cell "+e.context.$implicit+"-row",e.context.$implicit+"-input-cell"),t(e,2,0,e.context.$implicit+" name",r._13(e,7).ngClassUntouched,r._13(e,7).ngClassTouched,r._13(e,7).ngClassPristine,r._13(e,7).ngClassDirty,r._13(e,7).ngClassValid,r._13(e,7).ngClassInvalid,r._13(e,7).ngClassPending)})}function bf(t){return r._23(0,[(t()(),r._21(-1,null,["\n"])),(t()(),r.Y(16777216,null,null,1,null,yf)),r._2(2,802816,null,0,j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._21(-1,null,["\n\n"])),(t()(),r.Y(16777216,null,null,1,null,vf)),r._2(5,802816,null,0,j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._21(-1,null,["\n"]))],function(t,e){var n=e.component;t(e,2,0,n.playerNames),t(e,5,0,n.playersStillAvailable)},null)}class _f{constructor(){}ngOnInit(){}}var wf=r._1({encapsulation:2,styles:[],data:{}});function Ef(t){return r._23(0,[(t()(),r._3(0,0,null,null,16,"div",[["class","card-column first-column"],["id","label-column"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n    "])),(t()(),r._3(2,0,null,null,1,"div",[["class","cell label-cell hole-row"],["id","hole-cell"]],null,null,null,null,null)),(t()(),r._21(-1,null,["Hole"])),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r._3(5,0,null,null,1,"choose-tee",[],null,null,null,ka,Ia)),r._2(6,245760,null,0,Ta,[ba],null,null),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r._3(8,0,null,null,1,"div",[["class","cell label-cell par-row"],["id","par-column-1"]],null,null,null,null,null)),(t()(),r._21(-1,null,["Par"])),(t()(),r._21(-1,null,["\n    "])),(t()(),r._3(11,0,null,null,1,"div",[["class","cell label-cell hcp-row"],["id","hcp-column-1"]],null,null,null,null,null)),(t()(),r._21(-1,null,["Handicap"])),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r._3(14,0,null,null,1,"player-names",[],null,null,null,bf,gf)),r._2(15,114688,null,0,mf,[ff,pf],null,null),(t()(),r._21(-1,null,["\n\n"])),(t()(),r._21(-1,null,["\n"]))],function(t,e){t(e,6,0),t(e,15,0)},null)}class Cf{constructor(t,e){this.courseService=t,this.playersService=e,this.players=[],this.outColumn="out",this.inColumn="in",this.totalColumn="total",this.totalColumnIDs=[this.outColumn,this.inColumn,this.totalColumn],this.columnIDs=["1","2","3","4","5","6","7","8","9",this.outColumn,"10","11","12","13","14","15","16","17","18",this.inColumn,this.totalColumn],this.playersRowTotals=[]}ngOnInit(){this.descriptiveRows=Object.keys(this.courseService.descriptiveData),this.playersService.getPlayers(t=>{this.players=Object.values(t),this._calculateAllPlayerTotals()})}ngOnDestroy(){this.courseService.courseSubscription.unsubscribe(),this.playersService.subscription.unsubscribe()}_calculateAllPlayerTotals(){this._initialize_playersRowTotals(),this._fill_playersRowTotals()}_initialize_playersRowTotals(){for(let t=0;t<this.players.length;++t)this._initialize_playerRowTotals(t)}_initialize_playerRowTotals(t){this.playersRowTotals[t]=[]}ifTotalColumn_showTotal(t){this.isTotalColumn(t)}validateAndUpdatePlayerTotals(t,e){this.validateEntry(this.players[t],e),this.updateRowTotals(t)}validateEntry(t,e){""!==t.strokes[e]&&isNaN(Number(t.strokes[e]))&&(t.strokes[e]=0)}updateRowTotals(t){this._initialize_playerRowTotals(t),this._fill_Totals(t)}getColumnIDForHTML(t){return isNaN(t)?t+"-column":"hole-"+t+"-column"}getPlayerCellID(t,e){let n;return t+(n=this.isTotalColumn(e)?"-cell-":"-strokes-")+e}isTotalColumn(t){return t===this.outColumn||t===this.inColumn||t===this.totalColumn}isNumberedColumn(t){return!isNaN(t)}figureOutWhatDataToShow(t,e){return this.isNumberedColumn(t)?this.showDescriptiveData(t,e):this.isTotalColumn(t)?(t=this.totalColumnIDs.indexOf(t),this.courseService.descriptiveDataTotals[e][t]):void 0}showDescriptiveData(t,e){return this.courseService.descriptiveData[e][t-1]}_fill_playersRowTotals(){this.playersRowTotals.forEach((t,e)=>{this._fill_Totals(e)})}_fill_Totals(t){let e=this.courseService.totalTallyRanges;console.log(e),e.forEach(e=>{let n=this._calculateTotalsInRange(e,this.players[t].strokes);this.playersRowTotals[t].push(n)})}_calculateTotalsInRange(t,e){return this._getTally(e.slice(t[0],t[1]+1))}_getTally(t){let e=0;for(let n=0;n<t.length;++n)isNaN(t[n])&&(t[n]=0),e+=t[n];return e}isLastPlayer(t){return this.players.length-1===t}}var Sf=r._1({encapsulation:2,styles:[],data:{}});function Tf(t){return r._23(0,[(t()(),r._3(0,0,null,null,1,"div",[],[[8,"className",0],[8,"id",0]],null,null,null,null)),(t()(),r._21(1,null,["\n        ","\n    "]))],null,function(t,e){var n=e.component;t(e,0,0,"cell "+e.context.$implicit+"-row",e.context.$implicit+"-cell-"+e.parent.context.$implicit),t(e,1,0,n.figureOutWhatDataToShow(e.parent.context.$implicit,e.context.$implicit))})}function If(t){return r._23(0,[(t()(),r._3(0,0,null,null,5,"input",[["class","scorecard-input  strokes-input"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r._13(t,1)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r._13(t,1).onTouched()&&i),"compositionstart"===e&&(i=!1!==r._13(t,1)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r._13(t,1)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(t.parent.context.$implicit.strokes[t.parent.parent.context.$implicit-1]=n)&&i),"change"===e&&(i=!1!==o.validateAndUpdatePlayerTotals(t.parent.context.index,t.parent.parent.context.$implicit-1)&&i),i},null,null)),r._2(1,16384,null,0,cn,[r.B,r.k,[2,ln]],null,null),r._18(1024,null,an,function(t){return[t]},[cn]),r._2(3,671744,null,0,or,[[8,null],[8,null],[8,null],[2,an]],{model:[0,"model"]},{update:"ngModelChange"}),r._18(2048,null,mn,null,[or]),r._2(5,16384,null,0,jn,[mn],null,null)],function(t,e){t(e,3,0,e.parent.context.$implicit.strokes[e.parent.parent.context.$implicit-1])},function(t,e){t(e,0,0,r._13(e,5).ngClassUntouched,r._13(e,5).ngClassTouched,r._13(e,5).ngClassPristine,r._13(e,5).ngClassDirty,r._13(e,5).ngClassValid,r._13(e,5).ngClassInvalid,r._13(e,5).ngClassPending)})}function Af(t){return r._23(0,[(t()(),r._3(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r._21(1,null,["\n            ","\n        "]))],null,function(t,e){var n=e.component;t(e,1,0,n.playersRowTotals[e.parent.context.index][n.totalColumnIDs.indexOf(e.parent.parent.context.$implicit)])})}function kf(t){return r._23(0,[(t()(),r._3(0,0,null,null,7,"div",[],[[8,"className",0],[2,"strokes-input-cell",null],[2,"bottom-row",null],[8,"id",0]],null,null,null,null)),(t()(),r._21(-1,null,["\n        "])),(t()(),r.Y(16777216,null,null,1,null,If)),r._2(3,16384,null,0,q,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r._21(-1,null,["\n        "])),(t()(),r.Y(16777216,null,null,1,null,Af)),r._2(6,16384,null,0,q,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r._21(-1,null,["\n    "]))],function(t,e){var n=e.component;t(e,3,0,n.isNumberedColumn(e.parent.context.$implicit)),t(e,6,0,n.isTotalColumn(e.parent.context.$implicit))},function(t,e){var n=e.component;t(e,0,0,"cell player"+(e.context.index+1)+"-row",n.isNumberedColumn(e.parent.context.$implicit),n.isLastPlayer(e.context.index),n.getPlayerCellID("player"+(e.context.index+1)))})}function Nf(t){return r._23(0,[(t()(),r._3(0,0,null,null,11,"div",[["class","card-column"]],[[2,"total-column",null],[8,"id",0]],null,null,null,null)),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r._3(2,0,null,null,2,"div",[["class","cell hole-row"]],[[8,"id",0]],null,null,null,null)),(t()(),r._21(3,null,["\n        ","\n    "])),r._17(4,1),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r.Y(16777216,null,null,1,null,Tf)),r._2(7,802816,null,0,j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._21(-1,null,["\n\n\n    "])),(t()(),r.Y(16777216,null,null,1,null,kf)),r._2(10,802816,null,0,j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._21(-1,null,["\n\n\n"]))],function(t,e){var n=e.component;t(e,7,0,n.descriptiveRows),t(e,10,0,n.players)},function(t,e){var n=e.component;t(e,0,0,n.isTotalColumn(e.context.$implicit),n.getColumnIDForHTML(e.context.$implicit)),t(e,2,0,"hole-cell-"+e.context.$implicit),t(e,3,0,r._22(e,3,0,t(e,4,0,r._13(e.parent,0),e.context.$implicit)))})}function Of(t){return r._23(0,[r._16(0,lt,[]),(t()(),r._21(-1,null,["\n"])),(t()(),r.Y(16777216,null,null,1,null,Nf)),r._2(3,802816,null,0,j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._21(-1,null,["\n"]))],function(t,e){t(e,3,0,e.component.columnIDs)},null)}class Rf{constructor(){}ngOnInit(){}}var xf=r._1({encapsulation:2,styles:[],data:{}});function Df(t){return r._23(0,[(t()(),r._3(0,0,null,null,1,"choose-course",[],null,null,null,Sa,Ea)),r._2(1,245760,null,0,wa,[ba,_a],null,null),(t()(),r._21(-1,null,["\n\n"])),(t()(),r._3(3,0,null,null,7,"div",[["id","card-container"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n\n   "])),(t()(),r._3(5,0,null,null,1,"label-column",[],null,null,null,Ef,wf)),r._2(6,114688,null,0,_f,[],null,null),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r._3(8,0,null,null,1,"hole-columns",[],null,null,null,Of,Sf)),r._2(9,245760,null,0,Cf,[ba,ff],null,null),(t()(),r._21(-1,null,["\n\n"])),(t()(),r._21(-1,null,["\n\n"])),(t()(),r._3(12,0,null,null,3,"div",[["id","images-container"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n    "])),(t()(),r._3(14,0,null,null,0,"img",[["src","../../../assets/images/tenor.gif"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n"])),(t()(),r._21(-1,null,["\n"]))],function(t,e){t(e,1,0),t(e,6,0),t(e,9,0)},null)}var Pf=r.Z("scorecard",Rf,function(t){return r._23(0,[(t()(),r._3(0,0,null,null,1,"scorecard",[],null,null,null,Df,xf)),r._2(1,114688,null,0,Rf,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]);class Mf extends c.a{constructor(t,e,n){super(t),this.project=e,this.resultSelector=n,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=Object(l.a)(this,t,e,n))}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.resultSelector?this._tryNotifyNext(t,e,n,r):this.destination.next(e)}_tryNotifyNext(t,e,n,r){let i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)}}s.a.prototype.switchMap=function(t,e){return function(t,e){return function(n){return n.lift(new class{constructor(t,e){this.project=t,this.resultSelector=e}call(t,e){return e.subscribe(new Mf(t,this.project,this.resultSelector))}}(t,e))}}(t,e)(this)},s.a.of=br,s.a.fromPromise=v;class Lf{constructor(t){this.app=t,this.auth=t.auth();const e=new s.a(t=>({unsubscribe:this.auth.onAuthStateChanged(t)}));this.authState=qa.call(e,new Ba(Zone.current));const n=new s.a(t=>({unsubscribe:this.auth.onIdTokenChanged(t)})).switchMap(t=>t?s.a.fromPromise(t.getIdToken()):s.a.of(null));this.idToken=qa.call(n,new Ba(Zone.current))}}function Vf(t){return new Lf(t)}n("TL6u");class Uf{}class Ff{constructor(t,e,n,r){this._angularFireAuth=t,this._gameService=e,this._activeGame=n,this.signedUpPlayerNames=[],this.gameIDs=[],this.chosenGame="",this.playerNumbers=r.self}ngOnInit(){this._gameService.getAll(t=>{this._setGameIDs(t),this._setDefaultFor_chosenGame()})}_setDefaultFor_chosenGame(){""===this.chosenGame&&(this.chosenGame=this.gameIDs[0])}getPlayerPlaceholder(){return this.playerNumbers[this.signedUpPlayerNames.length]+" name"}addPlayerName(){this.newPlayerName.length>0&&(this.signedUpPlayerNames.push(this.newPlayerName),this.newPlayerName="")}lessThanFourPlayersSignedUp(){return this.signedUpPlayerNames.length<4}atLeastOnePlayerSignedUp(){return this.signedUpPlayerNames.length>0}createNewGame(){this._gameService.add(this.signedUpPlayerNames)}resumeGame(){this._activeGame.set(this.chosenGame)}_setGameIDs(t){t.forEach(t=>{let e=this._gameService.getGameID(t);this.gameIDs.push(e)})}}var jf=r._1({encapsulation:2,styles:[],data:{}});function Bf(t){return r._23(0,[(t()(),r._3(0,0,null,null,22,"div",[],null,null,null,null,null)),(t()(),r._21(-1,null,["\n            "])),(t()(),r._3(2,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),r._21(-1,null,["Start New Game?"])),(t()(),r._21(-1,null,["\n            "])),(t()(),r._3(5,0,null,null,16,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r._13(t,7).onSubmit(n)&&i),"reset"===e&&(i=!1!==r._13(t,7).onReset()&&i),i},null,null)),r._2(6,16384,null,0,dr,[],null,null),r._2(7,4210688,null,0,tr,[[8,null],[8,null]],null,null),r._18(2048,null,Ye,null,[tr]),r._2(9,16384,null,0,Bn,[Ye],null,null),(t()(),r._21(-1,null,["\n                "])),(t()(),r._3(11,0,null,null,7,"input",[["class","welcome-page-input form-control center-block"],["required",""],["type","text"]],[[8,"placeholder",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r._13(t,12)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r._13(t,12).onTouched()&&i),"compositionstart"===e&&(i=!1!==r._13(t,12)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r._13(t,12)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.newPlayerName=n)&&i),i},null,null)),r._2(12,16384,null,0,cn,[r.B,r.k,[2,ln]],null,null),r._2(13,16384,null,0,hr,[],{required:[0,"required"]},null),r._18(1024,null,tn,function(t){return[t]},[hr]),r._18(1024,null,an,function(t){return[t]},[cn]),r._2(16,671744,null,0,or,[[2,Ye],[2,tn],[8,null],[2,an]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._18(2048,null,mn,null,[or]),r._2(18,16384,null,0,jn,[mn],null,null),(t()(),r._21(-1,null,["\n                "])),(t()(),r._3(20,0,null,null,0,"input",[["class","welcome-page-button"],["type","submit"],["value","Add Player"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.addPlayerName()&&r),r},null,null)),(t()(),r._21(-1,null,["\n            "])),(t()(),r._21(-1,null,["\n        "]))],function(t,e){var n=e.component;t(e,13,0,""),t(e,16,0,n.getPlayerPlaceholder(),n.newPlayerName)},function(t,e){var n=e.component;t(e,5,0,r._13(e,9).ngClassUntouched,r._13(e,9).ngClassTouched,r._13(e,9).ngClassPristine,r._13(e,9).ngClassDirty,r._13(e,9).ngClassValid,r._13(e,9).ngClassInvalid,r._13(e,9).ngClassPending),t(e,11,0,n.getPlayerPlaceholder(),r._13(e,13).required?"":null,r._13(e,18).ngClassUntouched,r._13(e,18).ngClassTouched,r._13(e,18).ngClassPristine,r._13(e,18).ngClassDirty,r._13(e,18).ngClassValid,r._13(e,18).ngClassInvalid,r._13(e,18).ngClassPending)})}function qf(t){return r._23(0,[(t()(),r._3(0,0,null,null,3,"button",[["class","welcome-page-button"],["id","begin-button"]],null,[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r._13(t,1).onClick()&&i),"click"===e&&(i=!1!==o.createNewGame()&&i),i},null,null)),r._2(1,16384,null,0,gs,[fs,ko,[8,null],r.B,r.k],{routerLink:[0,"routerLink"]},null),r._15(2,1),(t()(),r._21(-1,null,["Begin"]))],function(t,e){t(e,1,0,t(e,2,0,"/game"))},null)}function Hf(t){return r._23(0,[(t()(),r._3(0,0,null,null,3,"option",[["name","choose-game-option"]],null,null,null,null,null)),r._2(1,147456,null,0,wn,[r.k,r.B,[2,_n]],{value:[0,"value"]},null),r._2(2,147456,null,0,Sn,[r.k,r.B,[8,null]],{value:[0,"value"]},null),(t()(),r._21(3,null,["\n                    ","\n                "]))],function(t,e){t(e,1,0,e.context.$implicit),t(e,2,0,e.context.$implicit)},function(t,e){t(e,3,0,e.context.$implicit)})}function Gf(t){return r._23(0,[(t()(),r._3(0,0,null,null,30,"div",[["class","center-block"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n        "])),(t()(),r._3(2,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),r._21(-1,null,["Or, Resume Game?"])),(t()(),r._21(-1,null,["\n        "])),(t()(),r._3(5,0,null,null,24,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r._13(t,7).onSubmit(n)&&i),"reset"===e&&(i=!1!==r._13(t,7).onReset()&&i),i},null,null)),r._2(6,16384,null,0,dr,[],null,null),r._2(7,4210688,null,0,tr,[[8,null],[8,null]],null,null),r._18(2048,null,Ye,null,[tr]),r._2(9,16384,null,0,Bn,[Ye],null,null),(t()(),r._21(-1,null,["\n            "])),(t()(),r._3(11,0,null,null,1,"label",[],null,null,null,null,null)),(t()(),r._21(-1,null,["Choose Game "])),(t()(),r._21(-1,null,["\n            "])),(t()(),r._3(14,0,null,null,9,"select",[["name","choose-game"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"change"===e&&(i=!1!==r._13(t,15).onChange(n.target.value)&&i),"blur"===e&&(i=!1!==r._13(t,15).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.chosenGame=n)&&i),i},null,null)),r._2(15,16384,null,0,_n,[r.B,r.k],null,null),r._18(1024,null,an,function(t){return[t]},[_n]),r._2(17,671744,null,0,or,[[2,Ye],[8,null],[8,null],[2,an]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._18(2048,null,mn,null,[or]),r._2(19,16384,null,0,jn,[mn],null,null),(t()(),r._21(-1,null,["\n                "])),(t()(),r.Y(16777216,null,null,1,null,Hf)),r._2(22,802816,null,0,j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._21(-1,null,["\n            "])),(t()(),r._21(-1,null,["\n            "])),(t()(),r._3(25,0,null,null,3,"button",[],null,[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r._13(t,26).onClick()&&i),"click"===e&&(i=!1!==o.resumeGame()&&i),i},null,null)),r._2(26,16384,null,0,gs,[fs,ko,[8,null],r.B,r.k],{routerLink:[0,"routerLink"]},null),r._15(27,1),(t()(),r._21(-1,null,["Resume"])),(t()(),r._21(-1,null,["\n        "])),(t()(),r._21(-1,null,["\n    "]))],function(t,e){var n=e.component;t(e,17,0,"choose-game",n.chosenGame),t(e,22,0,n.gameIDs),t(e,26,0,t(e,27,0,"/game"))},function(t,e){t(e,5,0,r._13(e,9).ngClassUntouched,r._13(e,9).ngClassTouched,r._13(e,9).ngClassPristine,r._13(e,9).ngClassDirty,r._13(e,9).ngClassValid,r._13(e,9).ngClassInvalid,r._13(e,9).ngClassPending),t(e,14,0,r._13(e,19).ngClassUntouched,r._13(e,19).ngClassTouched,r._13(e,19).ngClassPristine,r._13(e,19).ngClassDirty,r._13(e,19).ngClassValid,r._13(e,19).ngClassInvalid,r._13(e,19).ngClassPending)})}function Kf(t){return r._23(0,[(t()(),r._21(-1,null,["\n"])),(t()(),r._3(1,0,null,null,18,"div",[],null,null,null,null,null)),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r._3(3,0,null,null,7,"div",[["class","center-block"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n\n        "])),(t()(),r.Y(16777216,null,null,1,null,Bf)),r._2(6,16384,null,0,q,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r._21(-1,null,["\n\n        "])),(t()(),r.Y(16777216,null,null,1,null,qf)),r._2(9,16384,null,0,q,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r._21(-1,null,["\n    "])),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r.Y(16777216,null,null,1,null,Gf)),r._2(13,16384,null,0,q,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r._3(15,0,null,null,3,"div",[["class","center-block"],["id","images-container"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n        "])),(t()(),r._3(17,0,null,null,0,"img",[["src","../../../assets/images/bill-murray.jpg"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n    "])),(t()(),r._21(-1,null,["\n\n"])),(t()(),r._21(-1,null,["\n\n"]))],function(t,e){var n=e.component;t(e,6,0,n.lessThanFourPlayersSignedUp()),t(e,9,0,n.atLeastOnePlayerSignedUp()),t(e,13,0,n.lessThanFourPlayersSignedUp())},null)}var Wf=r.Z("welcome",Ff,function(t){return r._23(0,[(t()(),r._3(0,0,null,null,1,"welcome",[],null,null,null,Kf,jf)),r._2(1,114688,null,0,Ff,[Lf,df,_a,pf],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),zf=r._1({encapsulation:2,styles:[],data:{}});function Qf(t){return r._23(0,[(t()(),r._3(0,0,null,null,7,"div",[["class","container"],["id","top-container"]],null,null,null,null,null)),(t()(),r._21(-1,null,["\n    "])),(t()(),r._3(2,0,null,null,1,"header",[["id","app-title"]],null,null,null,null,null)),(t()(),r._21(3,null,["",""])),(t()(),r._21(-1,null,["\n\n    "])),(t()(),r._3(5,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r._2(6,212992,null,0,_s,[bs,r.M,r.j,[8,null],r.h],null,null),(t()(),r._21(-1,null,["\n\n"])),(t()(),r._21(-1,null,["\n"]))],function(t,e){t(e,6,0)},function(t,e){t(e,3,0,e.component.title)})}var $f=r.Z("app-root",o,function(t){return r._23(0,[(t()(),r._3(0,0,null,null,1,"app-root",[],null,null,null,Qf,zf)),r._2(1,49152,null,0,o,[],null,null)],null,null)},{},{},[]);class Xf{}class Jf{}const Yf="*";function Zf(t,e=null){return{type:2,steps:t,options:e}}function tp(t){return{type:6,styles:t,offset:null}}function ep(t){Promise.resolve(null).then(t)}class np{constructor(){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=0}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ep(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class rp{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?ep(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const ip="!";function op(t){switch(t.length){case 0:return new np;case 1:return t[0];default:return new rp(t)}}function sp(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,l=null;if(r.forEach(t=>{const n=t.offset,r=n==u,c=r&&l||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case ip:a=i[n];break;case Yf:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}c[r]=a}),r||a.push(c),l=c,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function ap(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&up(n,"start",t.totalTime)));break;case"done":t.onDone(()=>r(n&&up(n,"done",t.totalTime)));break;case"destroy":t.onDestroy(()=>r(n&&up(n,"destroy",t.totalTime)))}}function up(t,e,n){const r=lp(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,void 0==n?t.totalTime:n),i=t._data;return null!=i&&(r._data=i),r}function lp(t,e,n,r,i="",o=0){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o}}function cp(t,e,n){let r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function hp(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let dp=(t,e)=>!1,fp=(t,e)=>!1,pp=(t,e,n)=>[];if("undefined"!=typeof Element){if(dp=((t,e)=>t.contains(e)),Element.prototype.matches)fp=((t,e)=>t.matches(e));else{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;e&&(fp=((t,n)=>e.apply(t,[n])))}pp=((t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r})}let mp=null,gp=!1;function yp(t){mp||(mp=vp()||{},gp=!!mp.style&&"WebkitAppearance"in mp.style);let e=!0;return mp.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in mp.style)&&gp&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in mp.style),e}function vp(){return"undefined"!=typeof document?document.body:null}const bp=fp,_p=dp,wp=pp;class Ep{validateStyleProperty(t){return yp(t)}matchesElement(t,e){return bp(t,e)}containsElement(t,e){return _p(t,e)}query(t,e,n){return wp(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[]){return new np}}class Cp{}Cp.NOOP=new Ep;const Sp=1e3,Tp="{{",Ip="ng-enter",Ap="ng-leave",kp="ng-trigger",Np=".ng-trigger",Op="ng-animating",Rp=".ng-animating";function xp(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Dp(parseFloat(e[1]),e[2])}function Dp(t,e){switch(e){case"s":return t*Sp;default:return t}}function Pp(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Dp(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=Dp(Math.floor(parseFloat(s)),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function Mp(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Lp(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Mp(t,n);return n}function Vp(t,e){t.style&&Object.keys(e).forEach(n=>{const r=Kp(n);t.style[r]=e[n]})}function Up(t,e){t.style&&Object.keys(e).forEach(e=>{const n=Kp(e);t.style[n]=""})}function Fp(t){return Array.isArray(t)?1==t.length?t[0]:Zf(t):t}const jp=new RegExp(`${Tp}\\s*(.+?)\\s*}}`,"g");function Bp(t){let e=[];if("string"==typeof t){const n=t.toString();let r;for(;r=jp.exec(n);)e.push(r[1]);jp.lastIndex=0}return e}function qp(t,e,n){const r=t.toString(),i=r.replace(jp,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Hp(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Gp=/-+([a-z0-9])/g;function Kp(t){return t.replace(Gp,(...t)=>t[1].toUpperCase())}function Wp(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}const zp="*",Qp=new Set(["true","1"]),$p=new Set(["false","0"]);function Xp(t,e){const n=Qp.has(t)||$p.has(t),r=Qp.has(e)||$p.has(e);return(i,o)=>{let s=t==zp||t==i,a=e==zp||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?Qp.has(t):$p.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?Qp.has(e):$p.has(e)),s&&a}}const Jp=":self",Yp=new RegExp(`s*${Jp}s*,?`,"g");function Zp(t,e,n){return new em(t).build(e,n)}const tm="";class em{constructor(t){this._driver=t}build(t,e){const n=new nm(e);return this._resetContextStyleTimingState(n),Wp(this,Fp(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector=tm,t.collectedStyles={},t.collectedStyles[tm]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(rm(t)){const e=t;Object.keys(e).forEach(t=>{Bp(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Hp(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Wp(this,Fp(t.animation),e);return{type:1,matchers:function(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>(function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(Xp(i,s)),"<"!=o[0]||i==zp&&s==zp||e.push(Xp(s,i))})(t,n,e)):n.push(t),n}(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:im(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Wp(this,t,e)),options:im(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Wp(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:im(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return om(Pp(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=om(0,0,"");return t.dynamic=!0,t.strValue=r,t}return om((n=n||Pp(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:tp({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=tp(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Yf?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(rm(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf(Tp)>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(r,i,o){const s=e.options.params||{},a=Bp(t[n]);a.length&&a.forEach(t=>{s.hasOwnProperty(t)||o.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(0,0,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(rm(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(rm(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),l=0;return null!=u&&(r++,l=n.offset=u),s=s||l<0||l>1,o=o||l<a,a=l,i.push(l),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const l=t.steps.length;let c=0;r>0&&r<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(l-1));const h=l-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=c>0?r==h?1:c*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Wp(this,Fp(t.animation),e),options:im(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:im(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:im(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>t==Jp);return e&&(t=t.replace(Yp,"")),[t=t.replace(/@\*/g,Np).replace(/@\w+/g,t=>Np+"-"+t.substr(1)).replace(/:animating/g,Rp),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,cp(e.collectedStyles,e.currentQuerySelector,{});const s=Wp(this,Fp(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:im(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Pp(t.timings,e.errors,!0);return{type:12,animation:Wp(this,Fp(t.animation),e),timings:n,options:null}}}class nm{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function rm(t){return!Array.isArray(t)&&"object"==typeof t}function im(t){var e;return t?(t=Mp(t)).params&&(t.params=(e=t.params)?Mp(e):null):t={},t}function om(t,e,n){return{duration:t,delay:e,easing:n}}function sm(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class am{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const um=1,lm=new RegExp(":enter","g"),cm=new RegExp(":leave","g");function hm(t,e,n,r,i,o={},s={},a,u,l=[]){return(new dm).buildKeyframes(t,e,n,r,i,o,s,a,u,l)}class dm{buildKeyframes(t,e,n,r,i,o,s,a,u,l=[]){u=u||new am;const c=new pm(t,e,u,r,i,l,[]);c.options=a,c.currentTimeline.setStyles([o],null,c.errors,a),Wp(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,c.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[sm(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?xp(n.duration):null,o=null!=n.delay?xp(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Wp(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&((r=e.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=fm);const t=xp(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Wp(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?xp(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),Wp(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Pp(e.params?qp(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?xp(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=fm);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),Wp(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const l=u.currentTime;Wp(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)}}const fm={};class pm{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new mm(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=xp(n.duration)),null!=n.delay&&(r.delay=xp(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=qp(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new pm(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=fm,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new gm(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(lm,"."+this._enterClassName)).replace(cm,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class mm{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new mm(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=um,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Yf,this._currentKeyframe[t]=Yf}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e)).forEach(t=>{n[t]=Yf}):Lp(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=qp(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Yf),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=Lp(i,!0);Object.keys(s).forEach(n=>{const r=s[n];r==ip?t.add(n):r==Yf&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?Hp(t.values()):[],o=e.size?Hp(e.values()):[];if(n){const t=r[0],e=Mp(t);t.offset=0,e.offset=1,r=[t,e]}return sm(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class gm extends mm{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=Lp(t[0],!1);a.offset=0,i.push(a);const u=Lp(t[0],!1);u.offset=ym(s),i.push(u);const l=t.length-1;for(let r=1;r<=l;r++){let s=Lp(t[r],!1);s.offset=ym((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return sm(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function ym(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class vm{}class bm extends vm{normalizePropertyName(t,e){return Kp(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(_m[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const _m=function(t){const e={};return"width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",").forEach(t=>e[t]=!0),e}();function wm(t,e,n,r,i,o,s,a,u,l,c,h){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:c,errors:h}}const Em={};class Cm{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e){return function(t,e,n){return t.some(t=>t(e,n))}(this.ast.matchers,t,e)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u){const l=[],c=this.ast.options&&this.ast.options.params||Em,h=this.buildStyles(n,s&&s.params||Em,l),d=a&&a.params||Em,f=this.buildStyles(r,d,l),p=new Set,m=new Map,g=new Map,y="void"===r,v={params:Object.assign({},c,d)},b=hm(t,e,this.ast.animation,i,o,h,f,v,u,l);if(l.length)return wm(e,this._triggerName,n,r,y,h,f,[],[],m,g,l);b.forEach(t=>{const n=t.element,r=cp(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=cp(g,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&p.add(n)});const _=Hp(p.values());return wm(e,this._triggerName,n,r,y,h,f,b,_,m,g)}}class Sm{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Mp(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=qp(o,r,e)),n[t]=o})}}),n}}class Tm{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Sm(t.style,t.options&&t.options.params||{})}),Im(this.states,"true","1"),Im(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Cm(t,e,this.states))}),this.fallbackTransition=new Cm(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e){return this.transitionFactories.find(n=>n.match(t,e))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Im(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Am=new am;class km{constructor(t,e){this._driver=t,this._normalizer=e,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=Zp(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=sp(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[])}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=hm(this._driver,e,i,Ip,Ap,{},{},n,Am,r)).forEach(t=>{const e=cp(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)}):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Yf)})});const a=op(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=lp(e,"","","");return ap(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Nm="ng-animate-queued",Om=".ng-animate-queued",Rm="ng-animate-disabled",xm=".ng-animate-disabled",Dm="ng-star-inserted",Pm=".ng-star-inserted",Mm=[],Lm={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!1},Vm={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!0},Um="__ng_removed";class Fm{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){const e=Mp(t);delete e.value,this.options=e}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const jm="void",Bm=new Fm(jm),qm=new Fm("DELETED");class Hm{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Jm(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=cp(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=cp(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Jm(t,kp),Jm(t,kp+"-"+e),a[e]=Bm),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new Km(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Jm(t,kp),Jm(t,kp+"-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new Fm(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a){if(a===qm)return o}else a=Bm;if(u.value!==jm&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Up(t,n),Vp(t,r)})}return}const l=cp(this._engine.playersByElement,t,[]);l.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=i.matchTransition(a.value,u.value),h=!1;if(!c){if(!r)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(Jm(t,Nm),o.onStart(()=>{Ym(t,Nm)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),l.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e,n=!1){this._engine.driver.query(t,Np,!0).forEach(t=>{if(t[Um])return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)})}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,jm,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&op(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,o=this._engine.statesByElement.get(t)[r]||Bm,s=new Fm(jm),a=new Km(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}this.prepareLeaveAnimationListeners(t),r?n.markElementAsRemoved(this.id,t,!1,e):(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}insertNode(t,e){Jm(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=lp(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,ap(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(e=>e.element===t)||e}}class Gm{constructor(t,e){this.driver=t,this._normalizer=e,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=((t,e)=>{})}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Hm(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){return!!Wm(e)&&(this._fetchNamespace(t).trigger(e,n,r),!0)}insertNode(t,e,n,r){if(!Wm(e))return;const i=e[Um];i&&i.setForRemoval&&(i.setForRemoval=!1),t&&this._fetchNamespace(t).insertNode(e,n),r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Jm(t,Rm)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Ym(t,Rm))}removeNode(t,e,n){if(!Wm(e))return void this._onRemovalComplete(e,n);const r=t?this._fetchNamespace(t):null;r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e[Um]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Wm(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e)}destroyInnerAnimations(t){let e=this.driver.query(t,Np,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Rp,!0)).forEach(t=>this.finishActiveQueriedAnimationOnElement(t))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()});const n=this.statesByElement.get(t);n&&Object.keys(n).forEach(t=>n[t]=qm)}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return op(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Um];if(e&&e.setForRemoval){if(t[Um]=Lm,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,xm)&&this.markElementAsDisabled(t,!1),this.driver.query(t,xm,!0).forEach(e=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Jm(this.collectedEnterElements[n],Dm);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?op(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new am,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,l=new Set;this.disabledNodes.forEach(t=>{l.add(t);const e=this.driver.query(t,Om,!0);for(let n=0;n<e.length;n++)l.add(e[n])});const c=vp(),h=Array.from(this.statesByElement.keys()),d=$m(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=Ip+p++;f.set(e,n),t.forEach(t=>Jm(t,n))});const m=[],g=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const t=this.collectedLeaveElements[O],e=t[Um];e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,Pm,!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=$m(h,Array.from(g));b.forEach((t,e)=>{const n=Ap+p++;v.set(e,n),t.forEach(t=>Jm(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Ym(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Ym(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(t=>{const e=t.player;_.push(e);const i=t.element;if(!c||!this.driver.containsElement(c,i))return void e.destroy();const l=v.get(i),h=f.get(i),d=this._buildInstruction(t,n,h,l);if(!d.errors||!d.errors.length)return t.isFallbackTransition?(e.onStart(()=>Up(i,d.fromStyles)),e.onDestroy(()=>Vp(i,d.toStyles)),void r.push(e)):(d.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,d.timelines),o.push({instruction:d,player:e,element:i}),d.queriedElements.forEach(t=>cp(s,t,[]).push(e)),d.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),void d.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))}));w.push(d)});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const E=new Map,C=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,E))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{cp(E,e,[]).push(t),t.destroy()})});const S=m.filter(t=>tg(t,a,u)),T=new Map;Qm(T,this.driver,y,u,Yf).forEach(t=>{tg(t,a,u)&&S.push(t)});const I=new Map;d.forEach((t,e)=>{Qm(I,this.driver,new Set(t),a,ip)}),S.forEach(t=>{const e=T.get(t),n=I.get(t);T.set(t,Object.assign({},e,n))});const A=[],k=[],N={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(l.has(e))return o.onDestroy(()=>Vp(e,s.toStyles)),void r.push(o);let t=N;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,E,i,I,T);if(o.setRealPlayer(n),t===N)A.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=op(e)),r.push(o)}}else Up(e,s.fromStyles),o.onDestroy(()=>Vp(e,s.toStyles)),k.push(o),l.has(e)&&r.push(o)}),k.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=op(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let O=0;O<m.length;O++){const t=m[O],e=t[Um];if(Ym(t,Ap),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Rp,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Zm(this,t,r):this.processLeaveNode(t)}return m.length=0,A.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),A}elementContainsData(t,e){let n=!1;const r=e[Um];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==jm;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=cp(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Up(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],l=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;l.add(h);const d=h[Um];if(d&&d.removedBeforeQueried)return new np;const f=h!==a,p=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof rp?t(i.players,n):n.push(i)}}((n.get(h)||Mm).map(t=>t.getRealPlayer()),e),e}().filter(t=>!!t.element&&t.element===h),m=i.get(h),g=o.get(h),y=sp(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&c.add(h),f){const e=new Km(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{cp(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>(function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e)){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e]){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r})(this.playersByQueriedElement,t.element,t))}),l.forEach(t=>Jm(t,Op));const d=op(h);return d.onDestroy(()=>{l.forEach(t=>Ym(t,Op)),Vp(a,e.toStyles)}),c.forEach(t=>{cp(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new np}}class Km{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new np,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.queued=!0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>ap(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.queued=!1)}getRealPlayer(){return this._player}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){cp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}get totalTime(){return this._player.totalTime}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Wm(t){return t&&1===t.nodeType}function zm(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Qm(t,e,n,r,i){const o=[];n.forEach(t=>o.push(zm(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r[Um]=Vm,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>zm(t,o[a++])),s}function $m(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=i.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:r.has(s)?1:t(s),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}const Xm="$$classes";function Jm(t,e){if(t.classList)t.classList.add(e);else{let n=t[Xm];n||(n=t[Xm]={}),n[e]=!0}}function Ym(t,e){if(t.classList)t.classList.remove(e);else{let n=t[Xm];n&&delete n[e]}}function Zm(t,e,n){op(n).onDone(()=>t.processLeaveNode(e))}function tg(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class eg{constructor(t,e){this._driver=t,this._triggerCache={},this.onRemovalComplete=((t,e)=>{}),this._transitionEngine=new Gm(t,e),this._timelineEngine=new km(t,e),this._transitionEngine.onRemovalComplete=((t,e)=>this.onRemovalComplete(t,e))}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=Zp(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new Tm(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n){this._transitionEngine.removeNode(t,e,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=hp(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=hp(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}class ng{constructor(t,e,n,r=[]){this.element=t,this.keyframes=e,this.options=n,this.previousPlayers=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.previousStyles={},this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay,(0===this._duration||0===this._delay)&&r.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>this.previousStyles[t]=e[t])})}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes.map(t=>Lp(t,!1)),e=Object.keys(this.previousStyles);if(e.length&&t.length){let r=t[0],i=[];if(e.forEach(t=>{r.hasOwnProperty(t)||i.push(t),r[t]=this.previousStyles[t]}),i.length){const e=this;for(var n=1;n<t.length;n++){let r=t[n];i.forEach(function(t){r[t]=rg(e.element,t)})}}}this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:rg(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function rg(t,e){return window.getComputedStyle(t)[e]}class ig{validateStyleProperty(t){return yp(t)}matchesElement(t,e){return bp(t,e)}containsElement(t,e){return _p(t,e)}query(t,e,n){return wp(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,i,o=[]){const s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);const a=o.filter(t=>t instanceof ng);return new ng(t,e,s,a)}}class og extends Xf{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.N.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Zf(t):t;return ug(this._renderer,null,e,"register",[n]),new sg(e,this._renderer)}}class sg extends Jf{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ag(this._id,t,e||{},this._renderer)}}class ag{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return ug(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function ug(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const lg="@",cg="@.disabled";class hg{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=((t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)})}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new dg("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(i,t),e.data.animation.forEach(e=>this.engine.registerTrigger(r,i,t,e.name,e)),new fg(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){Zone.current.scheduleMicroTask("incremenet the animation microtask",()=>this._microtaskId++)}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}class dg{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t){return this.delegate.selectRootElement(t)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==lg&&e==cg?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class fg extends dg{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==lg?"."==e.charAt(1)&&e==cg?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==lg){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=lg&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}class pg extends eg{constructor(t,e){super(t,e)}}function mg(){return"undefined"!=typeof Element&&"function"==typeof Element.prototype.animate?new ig:new Ep}function gg(){return new bm}function yg(t,e,n){return new hg(t,e,n)}class vg{}function bg(t){const e=function(t){return new s.a(e=>(t.on("state_changed",t=>e.next(t),t=>e.error(t),()=>e.complete()),()=>t.cancel()))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,downloadURL:()=>Ur(t.then(t=>t.downloadURL)),percentageChanges:()=>e.pipe(_(t=>t.bytesTransferred/t.totalBytes*100))}}function _g(t){return{getDownloadURL:()=>Ur(t.getDownloadURL()),getMetadata:()=>Ur(t.getMetadata()),delete:()=>Ur(t.delete()),child:e=>_g(t.child(e)),updateMetatdata:e=>Ur(t.updateMetadata(e)),put:(e,n)=>bg(t.put(e,n)),putString:(e,n,r)=>bg(t.putString(e,n,r))}}n("CLKv"),n("jLix"),new Va(Ma),n("oZkc"),n("G9H4"),n("cv3d"),n("xYan"),n("jOLw"),n("Thd6"),n("o1Kc"),n("PK/U");class wg{constructor(t){this.app=t,this.storage=t.storage()}ref(t){return _g(this.storage.ref(t))}upload(t,e,n){return _g(this.storage.ref(t)).put(e,n)}}var Eg="https://firebasestorage.googleapis.com",Cg="/v0",Sg="/v0",Tg=12e4,Ig=6e4,Ag=-9007199254740991,kg=function(){function t(t,e){this.code_=Og(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return Og(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),Ng={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function Og(t){return"storage/"+t}function Rg(){return new kg(Ng.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function xg(){return new kg(Ng.CANCELED,"User canceled the upload/download.")}function Dg(){return new kg(Ng.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Pg(t,e,n){return new kg(Ng.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function Mg(){return new kg(Ng.APP_DELETED,"The Firebase app was deleted.")}function Lg(t,e){return new kg(Ng.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vg(t){throw new kg(Ng.INTERNAL_ERROR,"Internal error: "+t)}var Ug={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Fg(t){switch(t){case Ug.RAW:case Ug.BASE64:case Ug.BASE64URL:case Ug.DATA_URL:return;default:throw"Expected one of the event types: ["+Ug.RAW+", "+Ug.BASE64+", "+Ug.BASE64URL+", "+Ug.DATA_URL+"]."}}var jg=function(t,e){this.data=t,this.contentType=e||null};function Bg(t,e){switch(t){case Ug.RAW:return new jg(qg(e));case Ug.BASE64:case Ug.BASE64URL:return new jg(Hg(t,e));case Ug.DATA_URL:return new jg(function(t){var e=new Gg(t);return e.base64?Hg(Ug.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Lg(Ug.DATA_URL,"Malformed data URL.")}return qg(e)}(e.rest)}(e),function(t){return new Gg(t).contentType}(e))}throw Rg()}function qg(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Hg(t,e){switch(t){case Ug.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Lg(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Ug.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Lg(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw Lg(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Gg=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Lg(Ug.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Kg={STATE_CHANGED:"state_changed"},Wg={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},zg={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qg(t){switch(t){case Wg.RUNNING:case Wg.PAUSING:case Wg.CANCELING:return zg.RUNNING;case Wg.PAUSED:return zg.PAUSED;case Wg.SUCCESS:return zg.SUCCESS;case Wg.CANCELED:return zg.CANCELED;case Wg.ERROR:default:return zg.ERROR}}function $g(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xg(t,e){for(var n in t)$g(t,n)&&e(n,t[n])}function Jg(t){if(null==t)return{};var e={};return Xg(t,function(t,n){e[t]=n}),e}function Yg(t){return new Promise(t)}function Zg(t){return Promise.resolve(t)}function ty(t){return null!=t}function ey(t){return void 0!==t}function ny(t){return"function"==typeof t}function ry(t){return"object"==typeof t}function iy(t){return ry(t)&&null!==t}function oy(t){return"string"==typeof t||t instanceof String}function sy(t){return ay()&&t instanceof Blob}function ay(){return"undefined"!=typeof Blob}var uy=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),ly=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=uy.NO_ERROR,this.sendPromise_=Yg(function(e,n){t.xhr_.addEventListener("abort",function(n){t.errorCode_=uy.ABORT,e(t)}),t.xhr_.addEventListener("error",function(n){t.errorCode_=uy.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(n){e(t)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw Vg("cannot .send() more than once");return this.sent_=!0,this.xhr_.open(e,t,!0),ty(r)&&Xg(r,function(t,e){i.xhr_.setRequestHeader(t,e.toString())}),ty(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Vg("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Vg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Vg("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){ty(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){ty(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),cy=function(){function t(){}return t.prototype.createXhrIo=function(){return new ly},t}(),hy=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new kg(Ng.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){for(var n=null,r=[{regex:new RegExp("^gs://([A-Za-z0-9.\\-]+)(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],i=0;i<r.length;i++){var o=r[i],s=o.regex.exec(e);if(s){var a=s[o.indices.path];a||(a=""),n=new t(s[o.indices.bucket],a),o.postModify(n);break}}if(null==n)throw function(t){return new kg(Ng.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return n},t}();function dy(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function fy(t){return Eg+Cg+t}function py(t){return Eg+Sg+t}function my(t){var e=encodeURIComponent,n="?";return Xg(t,function(t,r){var i=e(t)+"="+e(r);n=n+i+"&"}),n=n.slice(0,-1)}function gy(t,e){return e}var yy=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||gy}}(),vy=null;function by(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function _y(t){if(!t||!ry(t))throw"Expected Metadata object.";for(var e in t){var n=t[e];if("customMetadata"===e){if(!ry(n))throw"Expected object for 'customMetadata' mapping."}else if(iy(n))throw"Mapping for '"+e+"' cannot be an object."}}function wy(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var s,a,u,l;if(!(r<=n.length&&n.length<=i))throw(s=r)===(a=i)?(u=s,l=1===s?"argument":"arguments"):(u="between "+s+" and "+a,l="arguments"),new kg(Ng.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+t+"`: Expected "+u+" "+l+", received "+n.length+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?Pg(o,t,e.message):Pg(o,t,e)}}var Ey=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!ey(e)||t(e)},this.optional=!!e}}();function Cy(t,e){function n(t){if(!oy(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new Ey(r,e)}function Sy(t){return new Ey(_y,t)}function Ty(){return new Ey(function(t){if(!(function(t){return"number"==typeof t||t instanceof Number}(t)&&t>=0))throw"Expected a number 0 or greater."})}function Iy(t,e){return new Ey(function(e){if(!(null===e||ty(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)},e)}function Ay(t){return new Ey(function(t){if(null!==t&&!ny(t))throw"Expected a Function."},t)}function ky(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}var Ny=function(){function t(t,e){var n=0,r="";sy(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(sy(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ay()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ky();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ay())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}).apply(null,r))}var i=e.map(function(t){return oy(t)?Bg(Ug.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Oy(t,e){return-1!==t.indexOf(e)}var Ry=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function xy(t){if(!t)throw Rg()}function Dy(t,e){return function(n,r){var i=function(t,e,n){var i=function(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return ry(n=e)&&!Array.isArray(n)?e:null}(r);return null===i?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new hy(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,i,n)}(t,0,e);return xy(null!==i),i}}function Py(t){return function(e,n){var r;return(r=401===e.getStatus()?new kg(Ng.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new kg(Ng.QUOTA_EXCEEDED,"Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new kg(Ng.UNAUTHORIZED,"User does not have permission to access '"+t.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function My(t){var e=Py(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new kg(Ng.OBJECT_NOT_FOUND,"Object '"+t.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function Ly(t,e,n){var r=fy(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Ry(r,"GET",Dy(t,n),i);return o.errorHandler=My(e),o}function Vy(t,e,n){var r=Jg(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Uy=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Fy(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){xy(!1)}return xy(Oy(e||["active"],n)),n}var jy=function(){return function(t,e,n){if(ny(t)||ty(e)||ty(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),By=function(){function t(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}return Object.defineProperty(t.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var t=this.metadata.downloadURLs;return null!=t&&null!=t[0]?t[0]:null}return null},enumerable:!0,configurable:!0}),t}();function qy(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Zg(!0).then(function(){t.apply(null,e)})}}var Hy=function(){function t(t,e,n,r,i,o){void 0===o&&(o=null);var s=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=Wg.RUNNING,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(Ng.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(Wg.ERROR))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(Ng.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(Wg.ERROR))},this.promise_=Yg(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===Wg.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case Wg.RUNNING:t(n);break;case Wg.CANCELING:e.transition_(Wg.CANCELED);break;case Wg.PAUSING:e.transition_(Wg.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Vy(e,r,i),a={name:s.fullPath},u=py(o),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},c=by(s,n),h=t.maxUploadRetryTime(),d=new Ry(u,"POST",function(t,e){var n;Fy(t);try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){xy(!1)}return xy(oy(n)),n},h);return d.urlParams=a,d.headers=l,d.body=c,d.errorHandler=Py(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=function(e,n,r,i){var o=t.authWrapper_.maxUploadRetryTime(),s=new Ry(r,"POST",function(t,e){var n,r=Fy(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){xy(!1)}var o=parseInt(n,10);return xy(!isNaN(o)),new Uy(o,i.size(),"final"===r)},o);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=Py(n),s}(0,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new Uy(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new Uy(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new kg(Ng.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,c=l;i>0&&(c=Math.min(c,i));var h=u.current,d={"X-Goog-Upload-Command":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+c);if(null===f)throw Dg();var p=e.maxUploadRetryTime(),m=new Ry(n,"POST",function(t,n){var i,s=Fy(t,["active","final"]),a=u.current+c,l=r.size();return i="final"===s?Dy(e,o)(t,n):null,new Uy(a,l,"final"===s,i)},p);return m.headers=d,m.body=f.uploadData(),m.progressCallback=a||null,m.errorHandler=Py(t),m}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(Wg.ERROR)}var s=t.authWrapper_.makeRequest(o,i);t.request_=s,s.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(Wg.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=Ly(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(Wg.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Vy(e,r,i),l=by(u,n),c=Ny.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===c)throw Dg();var h={name:u.fullPath},d=py(o),f=t.maxUploadRetryTime(),p=new Ry(d,"POST",Dy(t,n),f);return p.urlParams=h,p.headers=s,p.body=c.uploadData(),p.errorHandler=Py(e),p}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(Wg.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case Wg.CANCELING:case Wg.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case Wg.RUNNING:var e=this.state_===Wg.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case Wg.PAUSED:this.state_=t,this.notifyObservers_();break;case Wg.CANCELED:this.error_=xg(),this.state_=t,this.notifyObservers_();break;case Wg.ERROR:case Wg.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case Wg.PAUSING:this.transition_(Wg.PAUSED);break;case Wg.CANCELING:this.transition_(Wg.CANCELED);break;case Wg.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Qg(this.state_);return new By(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=Ay(!0).validator,s=Iy(null,!0).validator;function a(t){try{return void o(t)}catch(t){}try{if(s(t),!(ey(t.next)||ey(t.error)||ey(t.complete)))throw"";return}catch(t){throw i}}wy("on",[Cy(function(e){if(t!==Kg.STATE_CHANGED)throw"Expected one of the event types: ["+Kg.STATE_CHANGED+"]."}),Iy(a,!0),Ay(!0),Ay(!0)],arguments);var u=this;function l(t){return function(e,n,i){null!==t&&wy("on",t,arguments);var o=new jy(e,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var c=[Iy(function(t){if(null===t)throw i;a(t)}),Ay(!0),Ay(!0)];return ey(e)||ey(n)||ey(r)?l(null)(e,n,r):l(c)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e,n;-1!==(n=(e=this.observers_).indexOf(t))&&e.splice(n,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),Array.prototype.slice.call(this.observers_).forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Qg(this.state_)){case zg.SUCCESS:qy(this.resolve_.bind(null,this.snapshot))();break;case zg.CANCELED:case zg.ERROR:qy(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Qg(this.state_)){case zg.RUNNING:case zg.PAUSED:null!==t.next&&qy(t.next.bind(t,this.snapshot))();break;case zg.SUCCESS:null!==t.complete&&qy(t.complete.bind(t))();break;case zg.CANCELED:case zg.ERROR:null!==t.error&&qy(t.error.bind(t,this.error_))();break;default:null!==t.error&&qy(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){wy("resume",[],arguments);var t=this.state_===Wg.PAUSED||this.state_===Wg.PAUSING;return t&&this.transition_(Wg.RUNNING),t},t.prototype.pause=function(){wy("pause",[],arguments);var t=this.state_===Wg.RUNNING;return t&&this.transition_(Wg.PAUSING),t},t.prototype.cancel=function(){wy("cancel",[],arguments);var t=this.state_===Wg.RUNNING||this.state_===Wg.PAUSING;return t&&this.transition_(Wg.CANCELING),t},t}(),Gy=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof hy?e:hy.makeFromUrl(e)}return t.prototype.toString=function(){return wy("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(vy)return vy;var t=[];t.push(new yy("bucket")),t.push(new yy("generation")),t.push(new yy("metageneration")),t.push(new yy("name","fullPath",!0));var e=new yy("name");e.xform=function(t,e){return function(t){return!oy(t)||t.length<2?t:dy(t=t)}(e)},t.push(e);var n=new yy("size");return n.xform=function(t,e){return ty(e)?+e:e},t.push(n),t.push(new yy("timeCreated")),t.push(new yy("updated")),t.push(new yy("md5Hash",null,!0)),t.push(new yy("cacheControl",null,!0)),t.push(new yy("contentDisposition",null,!0)),t.push(new yy("contentEncoding",null,!0)),t.push(new yy("contentLanguage",null,!0)),t.push(new yy("contentType",null,!0)),t.push(new yy("metadata","customMetadata",!0)),t.push(new yy("downloadTokens","downloadURLs",!1,function(t,e){if(!(oy(e)&&e.length>0))return[];var n=encodeURIComponent;return e.split(",").map(function(e){var r,i=t.fullPath;return r="/b/"+n(t.bucket)+"/o/"+n(i),"https://firebasestorage.googleapis.com"+Cg+r+my({alt:"media",token:e})})})),vy=t}()},t.prototype.child=function(t){wy("child",[Cy()],arguments);var e=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new hy(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0==t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new hy(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new hy(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return dy(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),wy("put",[new Ey(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||ay()&&t instanceof Blob))throw"Expected Blob or File."}),Sy(!0)],arguments),this.throwIfRoot_("put"),new Hy(this,this.authWrapper,this.location,this.mappings(),new Ny(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Ug.RAW),wy("putString",[Cy(),Cy(Fg,!0),Sy(!0)],arguments),this.throwIfRoot_("putString");var r=Bg(e,t),i=Jg(n);return!ty(i.contentType)&&ty(r.contentType)&&(i.contentType=r.contentType),new Hy(this,this.authWrapper,this.location,this.mappings(),new Ny(r.data,!0),i)},t.prototype.delete=function(){wy("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e){var n=fy(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new Ry(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=My(e),i}(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){wy("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=Ly(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){wy("updateMetadata",[Sy()],arguments),this.throwIfRoot_("updateMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=function(t,e,n,r){var i=fy(e.fullServerUrl()),o=by(n,r),s=t.maxOperationRetryTime(),a=new Ry(i,"PATCH",Dy(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=My(e),a}(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){return wy("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(t){var e=t.downloadURLs[0];if(ty(e))return e;throw new kg(Ng.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new kg(Ng.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Ky=function(){function t(t){this.promise_=function(t){return Promise.reject(t)}(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),Wy=function(){function t(){this.map_={},this.id_=Ag}return t.prototype.addRequest=function(t){var e=this.id_;this.id_++,this.map_[e]=t;var n=this;function r(){delete n.map_[e]}t.getPromise().then(r,r)},t.prototype.clear=function(){Xg(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),zy=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var s=this.app_.options;ty(s)&&(this.bucket_=t.extractBucket_(s))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=Tg,this.maxUploadRetryTime_=Ig,this.requestMap_=new Wy}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:hy.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&ty(this.app_.INTERNAL)&&ty(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):Zg(null)},t.prototype.bucket=function(){if(this.deleted_)throw Mg();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Ky(Mg());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),Qy=function(){function t(t,e,n,r,i,o,s,a,u,l,c){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=l,this.timeout_=u,this.pool_=c;var h=this;this.promise_=Yg(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());ey(a)?i(a):i()}catch(t){o(t)}else null!==s?((r=Rg()).setServerResponseProp(s.getResponseText()),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Mg():xg():new kg(Ng.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new $y(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function l(){u||(u=!0,e.apply(null,arguments))}function c(e){i=setTimeout(function(){i=null,t(h,a())},e)}function h(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];u||(t?l.apply(null,arguments):a()||o?l.apply(null,arguments):(r<64&&(r*=2),1===s?(s=2,e=0):e=1e3*(r+Math.random()),c(e)))}var d=!1;function f(t){d||(d=!0,u||(null!==i?(t||(s=2),clearTimeout(i),c(0)):t||(s=1)))}return c(0),setTimeout(function(){o=!0,f(!0)},n),f}(function(e,n){if(n)e(!1,new $y(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===uy.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=Oy(t.successCodes_,o);e(!0,new $y(s,n))}else{var a=n.getErrorCode()===uy.ABORT;e(!1,new $y(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}},e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=Oy([408,429],t),r=Oy(this.additionalRetryCodes_,t);return e||n||r},t}(),$y=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Xy(t,e,n){var r=my(t.urlParams),i=t.url+r,o=Jg(t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(o,e),function(t){t["X-Firebase-Storage-Version"]="webjs/"+("undefined"!=typeof Na.default?Na.default.SDK_VERSION:"AppManager")}(o),new Qy(i,t.method,o,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var Jy=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new zy(t,function(t,e){return new Gy(t,e)},Xy,this,e),this.app_=t,null!=n)this.bucket_=hy.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new hy(r,""))}this.internals_=new Yy(this)}return t.prototype.ref=function(t){if(wy("ref",[Cy(function(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new Gy(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return wy("refFromURL",[Cy(function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{hy.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Gy(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){wy("setMaxUploadRetryTime",[Ty()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){wy("setMaxOperationRetryTime",[Ty()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Yy=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Zg(void 0)},t}();function Zy(t){return new wg(t)}Na.default.INTERNAL.registerService("storage",function(t,e,n){return new Jy(t,new cy,n)},{TaskState:zg,TaskEvent:Kg,StringFormat:Ug,Storage:Jy,Reference:Gy},void 0,!0);class tv{}class ev{}var nv=r._0(i,[o],function(t){return r._10([r._11(512,r.j,r.W,[[8,[Pf,Wf,$f]],[3,r.j],r.v]),r._11(5120,r.s,r._19,[[3,r.s]]),r._11(4608,L,V,[r.s,[2,M]]),r._11(5120,r.c,r._5,[]),r._11(5120,r.q,r._12,[]),r._11(5120,r.r,r._14,[]),r._11(4608,Fe,je,[ht]),r._11(6144,r.E,null,[Fe]),r._11(4608,ue,le,[]),r._11(5120,Mt,function(t,e,n,i,o){return[new class extends Vt{constructor(t,e){super(t),this.ngZone=e,this.patchEvent()}patchEvent(){if(!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[ne]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let i=n;if(!t[Zt]||r.x.isInAngularZone()&&!oe(e))t.addEventListener(e,i,!1);else{let n=ee[e];n||(n=ee[e]=Yt("ANGULAR"+e+"FALSE"));let r=t[n];const o=r&&r.length>0;r||(r=t[n]=[]);const s=oe(e)?Zone.root:Zone.current;if(0===r.length)r.push({zone:s,handler:i});else{let t=!1;for(let e=0;e<r.length;e++)if(r[e].handler===i){t=!0;break}t||r.push({zone:s,handler:i})}o||t[Zt](e,se,!1)}return()=>this.removeEventListener(t,e,i)}removeEventListener(t,e,n){let r=t[te];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);let i=ee[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);let s=!1;for(let a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(t,[e,se,!1]):t.removeEventListener.apply(t,[e,n,!1])}}(t,e),new de(n),new class extends Vt{constructor(t,e){super(t),this._config=e}supports(t){if(!ae.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t))return!1;if(!window.Hammer)throw new Error(`Hammer.js is not loaded, can not bind ${t} event`);return!0}addEventListener(t,e,n){const r=this.manager.getZone();return e=e.toLowerCase(),r.runOutsideAngular(()=>{const i=this._config.buildHammer(t),o=function(t){r.runGuarded(function(){n(t)})};return i.on(e,o),()=>i.off(e,o)})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}(i,o)]},[ht,r.x,ht,ht,ue]),r._11(4608,Lt,Lt,[Mt,r.x]),r._11(135680,Ft,Ft,[ht]),r._11(4608,Wt,Wt,[Lt,Ft]),r._11(5120,Cp,mg,[]),r._11(5120,vm,gg,[]),r._11(4608,eg,pg,[Cp,vm]),r._11(5120,r.C,yg,[Wt,eg,r.x]),r._11(6144,Ut,null,[Ft]),r._11(4608,r.K,r.K,[r.x]),r._11(4608,At,At,[ht]),r._11(4608,Rt,Rt,[ht]),r._11(4608,Xf,og,[r.C,St]),r._11(4608,gn,gn,[]),r._11(4608,da,fa,[ht,r.z,ca]),r._11(4608,pa,pa,[da,ha]),r._11(5120,ia,function(t){return[t]},[pa]),r._11(4608,ua,ua,[]),r._11(6144,aa,null,[ua]),r._11(4608,la,la,[aa]),r._11(6144,Bs,null,[la]),r._11(5120,js,ma,[Bs,[2,ia]]),r._11(4608,na,na,[js]),r._11(5120,Ra,xa,[Oa,Fa]),r._11(4608,Ja,Ja,[Ra,[2,void 0]]),r._11(5120,Lf,Vf,[Ra]),r._11(5120,wg,Zy,[Ra]),r._11(5120,ko,Ms,[fs]),r._11(4608,Ss,Ss,[]),r._11(6144,Es,null,[Ss]),r._11(135680,Ts,Ts,[fs,r.u,r.i,r.p,Es]),r._11(4608,Cs,Cs,[]),r._11(5120,Fs,Us,[Ls]),r._11(5120,r.b,function(t){return[t]},[Fs]),r._11(4608,_a,_a,[]),r._11(4608,df,df,[Ja,_a]),r._11(4608,ff,ff,[df,_a]),r._11(4608,va,va,[na]),r._11(4608,ba,ba,[va]),r._11(4608,pf,pf,[]),r._11(512,ct,ct,[]),r._11(1024,r.l,$e,[]),r._11(1024,r.w,function(){return[Ns()]},[]),r._11(512,Ls,Ls,[r.p]),r._11(1024,r.d,function(t,e){return[(n=t,xt("probe",Pt),xt("coreTokens",Object.assign({},Dt,(n||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>Pt),Vs(e)];var n},[[2,r.w],Ls]),r._11(512,r.e,r.e,[[2,r.d]]),r._11(131584,r.g,r.g,[r.x,r.X,r.p,r.l,r.j,r.e]),r._11(512,r.f,r.f,[r.g]),r._11(512,Xe,Xe,[[3,Xe]]),r._11(512,vg,vg,[]),r._11(512,fr,fr,[]),r._11(512,pr,pr,[]),r._11(512,ga,ga,[]),r._11(512,ya,ya,[]),r._11(1024,As,xs,[[3,fs]]),r._11(512,Yi,Zi,[]),r._11(512,bs,bs,[]),r._11(256,Is,{},[]),r._11(1024,I,Rs,[S,[2,A],Is]),r._11(512,k,k,[I]),r._11(512,r.i,r.i,[]),r._11(512,r.u,r.H,[r.i,[2,r.I]]),r._11(1024,as,function(){return[[{path:"game",component:Rf}],[{path:"welcome",component:Ff},{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"**",redirectTo:"welcome",pathMatch:"full"}]]},[]),r._11(1024,fs,Ps,[r.g,Yi,bs,k,r.p,r.u,r.i,as,Is,[2,ls],[2,os]]),r._11(512,Os,Os,[[2,As],[2,fs]]),r._11(512,ja,ja,[]),r._11(512,hf,hf,[]),r._11(512,Uf,Uf,[]),r._11(512,tv,tv,[]),r._11(512,ev,ev,[]),r._11(512,i,i,[]),r._11(256,ca,"XSRF-TOKEN",[]),r._11(256,ha,"X-XSRF-TOKEN",[]),r._11(256,Oa,{apiKey:"AIzaSyCS9pG9933rNcf8ebj0amcTMze3Xswjb8Y",authDomain:"golf-scorecard-15298.firebaseapp.com",databaseURL:"https://golf-scorecard-15298.firebaseio.com",projectId:"golf-scorecard-15298",storageBucket:"golf-scorecard-15298.appspot.com",messagingSenderId:"180929117832"},[]),r._11(256,Fa,void 0,[])])});Object(r.Q)(),Qe().bootstrapModuleFactory(nv).catch(t=>console.log(t))},cv3d:function(t,e,n){"use strict";e.a=function(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(o.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(s.a)(e)(new i.a(t,n))};var r=n("05/P"),i=n("sngF"),o=n("oZkc"),s=n("G3Tt")},"e9+7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};e.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=(15&a)<<2|l>>6,h=63&l;u||(h=64,s||(c=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[c],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!=a&&(r.push(s<<4&240|a>>2),64!=u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},e.base64Encode=function(t){var n=r(t);return e.base64.encodeByteArray(n,!0)},e.base64Decode=function(t){try{return e.base64.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}},fRUx:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},g2hh:function(t,e,n){"use strict";var r=n("05/P");class i extends r.a{constructor(t,e){super(),this.value=t,this.scheduler=e,this._isScalar=!0,e&&(this._isScalar=!1)}static create(t,e){return new i(t,e)}static dispatch(t){const{done:e,value:n,subscriber:r}=t;e?r.complete():(r.next(n),r.closed||(t.done=!0,this.schedule(t)))}_subscribe(t){const e=this.value,n=this.scheduler;if(n)return n.schedule(i.dispatch,0,{done:!1,value:e,subscriber:t});t.next(e),t.closed||t.complete()}}e.a=i},gwp7:function(t,e,n){"use strict";e.a={closed:!0,next(t){},error(t){throw t},complete(){}}},iwAo:function(t,e,n){"use strict";e.a=(t=>t&&"number"==typeof t.length)},jLix:function(t,e,n){"use strict";e.a={e:{}}},jOLw:function(t,e,n){"use strict";var r=n("0mJR");e.a=class extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},o1Kc:function(t,e,n){"use strict";e.a=function(){return t=>Object(i.a)()(Object(r.a)(s)(t))};var r=n("xYan"),i=n("Thd6"),o=n("9i4M");function s(){return new o.a}},oZkc:function(t,e,n){"use strict";e.a=function(t){return t&&"function"==typeof t.schedule}},rhNu:function(t,e,n){"use strict";e.a=function(t,e,n=Number.POSITIVE_INFINITY){return function(o){return"number"==typeof e&&(n=e,e=null),o.lift(new class{constructor(t,e,n=Number.POSITIVE_INFINITY){this.project=t,this.resultSelector=e,this.concurrent=n}call(t,e){return e.subscribe(new class extends i.a{constructor(t,e,n,r=Number.POSITIVE_INFINITY){super(t),this.project=e,this.resultSelector=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){this.add(Object(r.a)(this,t,e,n))}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()}notifyNext(t,e,n,r,i){this.resultSelector?this._notifyResultSelector(t,e,n,r):this.destination.next(e)}_notifyResultSelector(t,e,n,r){let i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}(t,this.project,this.resultSelector,this.concurrent))}}(t,e,n))}};var r=n("t0Wy"),i=n("7wpj")},sngF:function(t,e,n){"use strict";var r=n("05/P"),i=n("g2hh"),o=n("P6aB"),s=n("oZkc");class a extends r.a{constructor(t,e){super(),this.array=t,this.scheduler=e,e||1!==t.length||(this._isScalar=!0,this.value=t[0])}static create(t,e){return new a(t,e)}static of(...t){let e=t[t.length-1];Object(s.a)(e)?t.pop():e=null;const n=t.length;return n>1?new a(t,e):1===n?new i.a(t[0],e):new o.a(e)}static dispatch(t){const{array:e,index:n,count:r,subscriber:i}=t;n>=r?i.complete():(i.next(e[n]),i.closed||(t.index=n+1,this.schedule(t)))}_subscribe(t){const e=this.array,n=e.length,r=this.scheduler;if(r)return r.schedule(a.dispatch,0,{array:e,index:0,count:n,subscriber:t});for(let i=0;i<n&&!t.closed;i++)t.next(e[i]);t.complete()}}e.a=a},t0Wy:function(t,e,n){"use strict";var r=n("2K0D"),i=n("iwAo"),o=n("2mbX"),s=n("tiL7"),a=n("05/P"),u=n("Lq4y"),l=n("WJ2g");class c extends l.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var h=n("CdVW");e.a=function(t,e,n,l){let d=new c(t,n,l);if(d.closed)return null;if(e instanceof a.a)return e._isScalar?(d.next(e.value),d.complete(),null):(d.syncErrorThrowable=!0,e.subscribe(d));if(Object(i.a)(e)){for(let t=0,n=e.length;t<n&&!d.closed;t++)d.next(e[t]);d.closed||d.complete()}else{if(Object(o.a)(e))return e.then(t=>{d.closed||(d.next(t),d.complete())},t=>d.error(t)).then(null,t=>{r.a.setTimeout(()=>{throw t})}),d;if(e&&"function"==typeof e[u.a]){const t=e[u.a]();for(;;){let e=t.next();if(e.done){d.complete();break}if(d.next(e.value),d.closed)break}}else if(e&&"function"==typeof e[h.a]){const r=e[h.a]();if("function"==typeof r.subscribe)return r.subscribe(new c(t,n,l));d.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{const t=`You provided ${Object(s.a)(e)?"an invalid object":`'${e}'`} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.";d.error(new TypeError(t))}}return null}},tiL7:function(t,e,n){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},uzI5:function(t,e,n){"use strict";var r=n("6Xbx").__extends;Object.defineProperty(e,"__esModule",{value:!0});var i=n("32XG");e.Sha1=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^a&(u^l),o=1518500249):(i=a^u^l,o=1859775393):r<60?(i=a&u|l&(a|u),o=2400959708):(i=a^u^l,o=3395469782);var h=(s<<5|s>>>27)+i+c+o+n[r]&4294967295;c=l,l=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(i.Hash)},xEcM:function(t,e,n){"use strict";const r=n("2K0D").a.Symbol,i="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber";e.a=i},xYan:function(t,e,n){"use strict";var r=n("9i4M"),i=n("05/P"),o=(n("WJ2g"),n("0mJR")),s=n("Thd6");const a=class extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new o.a).add(this.source.subscribe(new class extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}(this.getSubject(),this))),t.closed?(this._connection=null,t=o.a.EMPTY):this._connection=t),t}refCount(){return Object(s.a)()(this)}}.prototype,u={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}};e.a=function(t,e){return function(n){let r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new class{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:n}=this,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}(r,e));const i=Object.create(n,u);return i.source=n,i.subjectFactory=r,i}}}},[0]);